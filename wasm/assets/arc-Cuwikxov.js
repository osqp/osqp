import{w as dt,p as lt,c as I,s as T,a as P,h as ft,e as f,t as Tt,b as D,m as rt,d as pt,f as o,g as gt,i as At,j as Rt}from"./step-BwsUM5iJ.js";function bt(i){return i.innerRadius}function jt(i){return i.outerRadius}function wt(i){return i.startAngle}function zt(i){return i.endAngle}function Pt(i){return i&&i.padAngle}function S(i,k,J,q,b,j,E){var e=i-J,V=k-q,c=(E?j:-j)/D(e*e+V*V),n=c*V,A=-c*e,u=i+n,a=k+A,y=J+n,l=q+A,H=(u+y)/2,s=(a+l)/2,t=y-u,r=l-a,m=t*t+r*r,h=b-j,p=u*l-y*a,v=(r<0?-1:1)*D(At(0,h*h*m-p*p)),w=(p*r-t*v)/m,z=(-p*t-r*v)/m,K=(p*r+t*v)/m,O=(-p*t+r*v)/m,d=w-H,g=z-s,x=K-H,Q=O-s;return d*d+g*g>x*x+Q*Q&&(w=K,z=O),{cx:w,cy:z,x01:-n,y01:-A,x11:w*(b/h-1),y11:z*(b/h-1)}}function kt(){var i=bt,k=jt,J=P(0),q=null,b=wt,j=zt,E=Pt,e=null,V=dt(c);function c(){var n,A,u=+i.apply(this,arguments),a=+k.apply(this,arguments),y=b.apply(this,arguments)-ft,l=j.apply(this,arguments)-ft,H=pt(l-y),s=l>y;if(e||(e=n=V()),a<u&&(A=a,a=u,u=A),a>f)if(H>Tt-f)e.moveTo(a*I(y),a*T(y)),e.arc(0,0,a,y,l,!s),u>f&&(e.moveTo(u*I(l),u*T(l)),e.arc(0,0,u,l,y,s));else{var t,r,m=y,h=l,p=y,v=l,w=H,z=H,K=E.apply(this,arguments)/2,O=K>f&&(q?+q.apply(this,arguments):D(u*u+a*a)),d=rt(pt(a-u)/2,+J.apply(this,arguments)),g=d,x=d;if(O>f){var Q=gt(O/u*T(K)),U=gt(O/a*T(K));(w-=2*Q)>f?(p+=Q*=s?1:-1,v-=Q):(w=0,p=v=(y+l)/2),(z-=2*U)>f?(m+=U*=s?1:-1,h-=U):(z=0,m=h=(y+l)/2)}var _=a*I(m),$=a*T(m),Y=u*I(v),Z=u*T(v);if(d>f){var R,F=a*I(h),G=a*T(h),L=u*I(p),M=u*T(p);if(H<lt)if(R=function(tt,nt,xt,mt,at,ct,ht,vt){var st=xt-tt,it=mt-nt,ot=ht-at,yt=vt-ct,W=yt*st-ot*it;if(!(W*W<f))return[tt+(W=(ot*(nt-ct)-yt*(tt-at))/W)*st,nt+W*it]}(_,$,L,M,F,G,Y,Z)){var N=_-R[0],X=$-R[1],C=F-R[0],B=G-R[1],et=1/T(Rt((N*C+X*B)/(D(N*N+X*X)*D(C*C+B*B)))/2),ut=D(R[0]*R[0]+R[1]*R[1]);g=rt(d,(u-ut)/(et-1)),x=rt(d,(a-ut)/(et+1))}else g=x=0}z>f?x>f?(t=S(L,M,_,$,a,x,s),r=S(F,G,Y,Z,a,x,s),e.moveTo(t.cx+t.x01,t.cy+t.y01),x<d?e.arc(t.cx,t.cy,x,o(t.y01,t.x01),o(r.y01,r.x01),!s):(e.arc(t.cx,t.cy,x,o(t.y01,t.x01),o(t.y11,t.x11),!s),e.arc(0,0,a,o(t.cy+t.y11,t.cx+t.x11),o(r.cy+r.y11,r.cx+r.x11),!s),e.arc(r.cx,r.cy,x,o(r.y11,r.x11),o(r.y01,r.x01),!s))):(e.moveTo(_,$),e.arc(0,0,a,m,h,!s)):e.moveTo(_,$),u>f&&w>f?g>f?(t=S(Y,Z,F,G,u,-g,s),r=S(_,$,L,M,u,-g,s),e.lineTo(t.cx+t.x01,t.cy+t.y01),g<d?e.arc(t.cx,t.cy,g,o(t.y01,t.x01),o(r.y01,r.x01),!s):(e.arc(t.cx,t.cy,g,o(t.y01,t.x01),o(t.y11,t.x11),!s),e.arc(0,0,u,o(t.cy+t.y11,t.cx+t.x11),o(r.cy+r.y11,r.cx+r.x11),s),e.arc(r.cx,r.cy,g,o(r.y11,r.x11),o(r.y01,r.x01),!s))):e.arc(0,0,u,v,p,s):e.lineTo(Y,Z)}else e.moveTo(0,0);if(e.closePath(),n)return e=null,n+""||null}return c.centroid=function(){var n=(+i.apply(this,arguments)+ +k.apply(this,arguments))/2,A=(+b.apply(this,arguments)+ +j.apply(this,arguments))/2-lt/2;return[I(A)*n,T(A)*n]},c.innerRadius=function(n){return arguments.length?(i=typeof n=="function"?n:P(+n),c):i},c.outerRadius=function(n){return arguments.length?(k=typeof n=="function"?n:P(+n),c):k},c.cornerRadius=function(n){return arguments.length?(J=typeof n=="function"?n:P(+n),c):J},c.padRadius=function(n){return arguments.length?(q=n==null?null:typeof n=="function"?n:P(+n),c):q},c.startAngle=function(n){return arguments.length?(b=typeof n=="function"?n:P(+n),c):b},c.endAngle=function(n){return arguments.length?(j=typeof n=="function"?n:P(+n),c):j},c.padAngle=function(n){return arguments.length?(E=typeof n=="function"?n:P(+n),c):E},c.context=function(n){return arguments.length?(e=n??null,c):e},c}export{kt as d};
