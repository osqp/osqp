import{w as dt,p as lt,c as H,s as T,a as P,h as ft,e as f,t as Tt,b as C,m as rt,d as pt,f as o,g as gt,i as At,j as Rt}from"./step-BwsUM5iJ.js";function bt(i){return i.innerRadius}function jt(i){return i.outerRadius}function qt(i){return i.startAngle}function wt(i){return i.endAngle}function Pt(i){return i&&i.padAngle}function S(i,k,I,Q,b,j,D){var e=i-I,V=k-Q,c=(D?j:-j)/C(e*e+V*V),n=c*V,A=-c*e,u=i+n,a=k+A,y=I+n,l=Q+A,G=(u+y)/2,s=(a+l)/2,t=y-u,r=l-a,m=t*t+r*r,h=b-j,p=u*l-y*a,v=(r<0?-1:1)*C(At(0,h*h*m-p*p)),q=(p*r-t*v)/m,w=(-p*t-r*v)/m,J=(p*r+t*v)/m,N=(-p*t+r*v)/m,d=q-G,g=w-s,x=J-G,O=N-s;return d*d+g*g>x*x+O*O&&(q=J,w=N),{cx:q,cy:w,x01:-n,y01:-A,x11:q*(b/h-1),y11:w*(b/h-1)}}function kt(){var i=bt,k=jt,I=P(0),Q=null,b=qt,j=wt,D=Pt,e=null,V=dt(c);function c(){var n,A,u=+i.apply(this,arguments),a=+k.apply(this,arguments),y=b.apply(this,arguments)-ft,l=j.apply(this,arguments)-ft,G=pt(l-y),s=l>y;if(e||(e=n=V()),a<u&&(A=a,a=u,u=A),a>f)if(G>Tt-f)e.moveTo(a*H(y),a*T(y)),e.arc(0,0,a,y,l,!s),u>f&&(e.moveTo(u*H(l),u*T(l)),e.arc(0,0,u,l,y,s));else{var t,r,m=y,h=l,p=y,v=l,q=G,w=G,J=D.apply(this,arguments)/2,N=J>f&&(Q?+Q.apply(this,arguments):C(u*u+a*a)),d=rt(pt(a-u)/2,+I.apply(this,arguments)),g=d,x=d;if(N>f){var O=gt(N/u*T(J)),U=gt(N/a*T(J));(q-=2*O)>f?(p+=O*=s?1:-1,v-=O):(q=0,p=v=(y+l)/2),(w-=2*U)>f?(m+=U*=s?1:-1,h-=U):(w=0,m=h=(y+l)/2)}var _=a*H(m),$=a*T(m),Y=u*H(v),Z=u*T(v);if(d>f){var R,E=a*H(h),F=a*T(h),K=u*H(p),L=u*T(p);if(G<lt)if(R=function(tt,nt,xt,mt,at,ct,ht,vt){var st=xt-tt,it=mt-nt,ot=ht-at,yt=vt-ct,W=yt*st-ot*it;if(!(W*W<f))return[tt+(W=(ot*(nt-ct)-yt*(tt-at))/W)*st,nt+W*it]}(_,$,K,L,E,F,Y,Z)){var M=_-R[0],X=$-R[1],B=E-R[0],z=F-R[1],et=1/T(Rt((M*B+X*z)/(C(M*M+X*X)*C(B*B+z*z)))/2),ut=C(R[0]*R[0]+R[1]*R[1]);g=rt(d,(u-ut)/(et-1)),x=rt(d,(a-ut)/(et+1))}else g=x=0}w>f?x>f?(t=S(K,L,_,$,a,x,s),r=S(E,F,Y,Z,a,x,s),e.moveTo(t.cx+t.x01,t.cy+t.y01),x<d?e.arc(t.cx,t.cy,x,o(t.y01,t.x01),o(r.y01,r.x01),!s):(e.arc(t.cx,t.cy,x,o(t.y01,t.x01),o(t.y11,t.x11),!s),e.arc(0,0,a,o(t.cy+t.y11,t.cx+t.x11),o(r.cy+r.y11,r.cx+r.x11),!s),e.arc(r.cx,r.cy,x,o(r.y11,r.x11),o(r.y01,r.x01),!s))):(e.moveTo(_,$),e.arc(0,0,a,m,h,!s)):e.moveTo(_,$),u>f&&q>f?g>f?(t=S(Y,Z,E,F,u,-g,s),r=S(_,$,K,L,u,-g,s),e.lineTo(t.cx+t.x01,t.cy+t.y01),g<d?e.arc(t.cx,t.cy,g,o(t.y01,t.x01),o(r.y01,r.x01),!s):(e.arc(t.cx,t.cy,g,o(t.y01,t.x01),o(t.y11,t.x11),!s),e.arc(0,0,u,o(t.cy+t.y11,t.cx+t.x11),o(r.cy+r.y11,r.cx+r.x11),s),e.arc(r.cx,r.cy,g,o(r.y11,r.x11),o(r.y01,r.x01),!s))):e.arc(0,0,u,v,p,s):e.lineTo(Y,Z)}else e.moveTo(0,0);if(e.closePath(),n)return e=null,n+""||null}return c.centroid=function(){var n=(+i.apply(this,arguments)+ +k.apply(this,arguments))/2,A=(+b.apply(this,arguments)+ +j.apply(this,arguments))/2-lt/2;return[H(A)*n,T(A)*n]},c.innerRadius=function(n){return arguments.length?(i=typeof n=="function"?n:P(+n),c):i},c.outerRadius=function(n){return arguments.length?(k=typeof n=="function"?n:P(+n),c):k},c.cornerRadius=function(n){return arguments.length?(I=typeof n=="function"?n:P(+n),c):I},c.padRadius=function(n){return arguments.length?(Q=n==null?null:typeof n=="function"?n:P(+n),c):Q},c.startAngle=function(n){return arguments.length?(b=typeof n=="function"?n:P(+n),c):b},c.endAngle=function(n){return arguments.length?(j=typeof n=="function"?n:P(+n),c):j},c.padAngle=function(n){return arguments.length?(D=typeof n=="function"?n:P(+n),c):D},c.context=function(n){return arguments.length?(e=n??null,c):e},c}export{kt as d};
