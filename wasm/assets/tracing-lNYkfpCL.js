const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Ch00MeUT.js","./VegaLite-pJuoZ-ND.js","./index-aRpq2G87.js","./index-BqXWXM9d.css","./compile-CaQ04CEA.js","./time-DYh8gDo3.js","./timer-DFzT7np-.js","./linear-QODJVAWE.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./arc-Cuwikxov.js","./step-BwsUM5iJ.js","./index-DgUdtdK9.js"])))=>i.map(i=>d[i]);
import{u as G,d as N,T as F,am as J,ai as K,S as M,j as s,R as Q,an as W,ao as X,ap as O,aq as Z,aj as ee,ar as te,as as A,at as re,au as se,av as ie,__tla as oe}from"./index-aRpq2G87.js";import{P as ae,C as le,f as V,E as ne,a as me,u as pe,__tla as ce}from"./edit-page-BY_7u6u9.js";import{c as de}from"./compile-CaQ04CEA.js";import{r as ue,b as he,__tla as xe}from"./panels-DKqzt-8G.js";import{A as ge}from"./tree-Ndceu1dk.js";import{C as fe}from"./circle-play-DtG_6BcG.js";import"./_createAggregator-DGsbTvcV.js";import"./_baseEach-B07JCD58.js";import"./transform-Cyp0GDF-.js";import"./timer-DFzT7np-.js";import"./zoom-COrs4lFh.js";import"./sortBy-DSvxdc3a.js";import"./_baseMap-CLtXrJAu.js";import"./time-DYh8gDo3.js";import"./linear-QODJVAWE.js";import"./init-DLRA0X12.js";import"./range-CtcPcB_L.js";import"./ordinal-DDUp3AbE.js";import"./colors-bszWmPJw.js";import"./arc-Cuwikxov.js";import"./step-BwsUM5iJ.js";import"./index-CuOLLpR-.js";import"./index-y9T2qmqg.js";import"./index-CTmOkRy2.js";import"./index-BVnX-fpd.js";import"./index-XeVjW15r.js";import"./index-Bo_Q2aab.js";import"./index-BhfQxFJi.js";import"./index-DDKrpTIu.js";import"./index-BbXhF_SA.js";import"./index-C2oBrXC5.js";import"./index-CXQYYUq1.js";import"./index-DQKM8TJ_.js";import"./index-CeAdk8iH.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asterisk-B46aRdXb.js";import"./brainfuck-CtZaYBKt.js";import"./clike-BgBwzOhw.js";import"./cmake-DXn5xaP-.js";import"./cobol-stawOqaz.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./crystal-CRzZ78HM.js";import"./cypher-gJDei3ni.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dockerfile-knGOOxt4.js";import"./simple-mode-C3vEBAcb.js";import"./dtd-DI9Herc-.js";import"./dylan-CHJ5qNM_.js";import"./ebnf-B-Df8AvO.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-D7xaZ7Da.js";import"./erlang-BuqgqA5h.js";import"./factor-CFXhaUWb.js";import"./fcl-CVaBTCzQ.js";import"./forth-Dri_5nFc.js";import"./fortran-DL7KluxX.js";import"./gas-5kEe4nk0.js";import"./gherkin-B6X1vGSW.js";import"./groovy-DnIzCrpZ.js";import"./haskell-CmdsSjFB.js";import"./haxe-D25e-2l-.js";import"./http-BKJkqRj4.js";import"./idl-pcmmZuaN.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-HO6ttBFx.js";import"./lua-8DXOpKDz.js";import"./mathematica-IIbmv7SK.js";import"./mbox-z_N2Mo3d.js";import"./mirc-DkvFAiy5.js";import"./modelica-DSrSSXCg.js";import"./mscgen-B2igx18G.js";import"./mumps-zvxmGV4l.js";import"./nginx-B4hAVlXN.js";import"./nsis-BvKfQ9lQ.js";import"./ntriples-FFvkTduk.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CafrKXZF.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./solr-78MBEUkU.js";import"./sparql-BRLJFz69.js";import"./spreadsheet-CGlWr0eM.js";import"./stylus-OdhglgkO.js";import"./swift-B_XXVlXX.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./tiddlywiki-BgR6AEZu.js";import"./tiki-CI-ztowC.js";import"./toml-BQXy8elZ.js";import"./troff-Ce85hlLp.js";import"./ttcn-BxnYHtq8.js";import"./turtle-BkSuIpt-.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./verilog-B4LBqg_1.js";import"./vhdl-CWWH2SUo.js";import"./webidl-CGwyPRYs.js";import"./xquery-CVDBqZPY.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";import"./index-DgUdtdK9.js";let U,k,ve=Promise.all([(()=>{try{return oe}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return xe}catch{}})()]).then(async()=>{const Y=G("circle-ellipsis",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]),C="hoveredCellId",$="cellHover",R="startTimestamp",P="endTimestamp";let w,L,E,z,B,H,q,D;w=J(new Map),U=()=>{const t=N.c(28),{runIds:e,runMap:r}=F(ue),l=F(w),{clearRuns:o}=he(),{theme:a}=K(),[i,u]=M.useState("above");let m;t[0]!==i?(m=()=>{u(i==="above"?"sideBySide":"above")},t[0]=i,t[1]=m):m=t[1];const x=m;if(e.length===0){let h;return t[2]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(ae,{title:"No traces",description:s.jsx("span",{children:"Cells that have ran will appear here."}),icon:s.jsx(ge,{})}),t[2]=h):h=t[2],h}let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("label",{htmlFor:"chartPosition",className:"text-xs",children:"Inline chart"}),t[3]=d):d=t[3];const p=i==="sideBySide";let g,c,y,f,v,I;if(t[4]!==p||t[5]!==x?(g=s.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d,s.jsx("input",{type:"checkbox",name:"chartPosition",id:"chartPosition",onClick:x,defaultChecked:p,className:"h-3 cursor-pointer"})]}),t[4]=p,t[5]=x,t[6]=g):g=t[6],t[7]!==o?(c=s.jsx(le,{dataTestId:"clear-traces-button",onClick:o}),t[7]=o,t[8]=c):c=t[8],t[9]!==g||t[10]!==c?(y=s.jsxs("div",{className:"flex flex-row justify-end gap-3",children:[g,c]}),t[9]=g,t[10]=c,t[11]=y):y=t[11],t[12]!==i||t[13]!==l||t[14]!==e||t[15]!==r||t[16]!==a){let h;t[18]!==i||t[19]!==l||t[20]!==r||t[21]!==a?(h=(S,n)=>{const j=r.get(S);if(j)return s.jsx(z,{run:j,isExpanded:l.get(j.runId),isMostRecentRun:n===0,chartPosition:i,theme:a},j.runId)},t[18]=i,t[19]=l,t[20]=r,t[21]=a,t[22]=h):h=t[22],f=e.map(h),t[12]=i,t[13]=l,t[14]=e,t[15]=r,t[16]=a,t[17]=f}else f=t[17];return t[23]!==f?(v=s.jsx("div",{className:"flex flex-col gap-3",children:f}),t[23]=f,t[24]=v):v=t[24],t[25]!==y||t[26]!==v?(I=s.jsxs("div",{className:"py-1 px-2 overflow-y-scroll",children:[y,v]}),t[25]=y,t[26]=v,t[27]=I):I=t[27],I},L=Q.lazy(()=>W(()=>import("./index-Ch00MeUT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then(t=>({default:t.Vega}))),E=t=>{const e=N.c(10),{ref:r,width:l}=pe(),o=l===void 0?300:l,a=t.theme==="dark"?"dark":void 0,i=o-50;let u,m;return e[0]!==t.height||e[1]!==t.signalListeners||e[2]!==t.vegaSpec||e[3]!==a||e[4]!==i?(u=s.jsx(L,{spec:t.vegaSpec,theme:a,width:i,height:t.height,signalListeners:t.signalListeners,actions:!1}),e[0]=t.height,e[1]=t.signalListeners,e[2]=t.vegaSpec,e[3]=a,e[4]=i,e[5]=u):u=e[5],e[6]!==t.className||e[7]!==r||e[8]!==u?(m=s.jsx("div",{className:t.className,ref:r,children:u}),e[6]=t.className,e[7]=r,e[8]=u,e[9]=m):m=e[9],m},z=({run:t,isMostRecentRun:e,chartPosition:r,isExpanded:l,theme:o})=>{const a=X(w),i=(l=l??e)?re:se,u=s.jsx(i,{height:16,className:"inline"}),m=s.jsxs("span",{className:"text-sm cursor-pointer",onClick:()=>{a(x=>{const d=new Map(x);return d.set(t.runId,!l),d})},children:["Run - ",O(t.runStartTime),u]});return l?s.jsx(B,{run:t,chartPosition:r,theme:o,title:m},t.runId):s.jsx("div",{className:"flex flex-col",children:s.jsx("pre",{className:"font-mono font-semibold",children:m})},t.runId)},B=t=>{const e=N.c(32),{run:r,chartPosition:l,theme:o,title:a}=t,[i,u]=M.useState();let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={[$]:(S,n)=>{var _;const j=n,b=(_=j.cell)==null?void 0:_[0];u(b??null)}},e[0]=m):m=e[0];const x=m,d=Z();let p,g;if(e[1]!==d||e[2]!==l||e[3]!==r.cellRuns||e[4]!==r.runId||e[5]!==o){const S=[...r.cellRuns.values()].map(n=>{const j=n.elapsedTime??0;return{cell:n.cellId,cellNum:d.inOrderIds.indexOf(n.cellId),startTimestamp:k(n.startTime),endTimestamp:k(n.startTime+j),elapsedTime:V(1e3*j),status:n.status}});p=`hiddenInputElement-${r.runId}`,g=de(function(n,j,b,_){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:_==="dark"?"black":void 0,mark:{type:"bar",cornerRadius:2},params:[{name:C,bind:{element:`#${j}`}},{name:$,select:{type:"point",on:"mouseover",fields:["cell"],clear:"mouseout"}}],height:{step:b==="above"?21:26},encoding:{y:{field:"cellNum",scale:{paddingInner:.2},sort:{field:R},title:"cell",axis:b==="sideBySide"?null:void 0},x:{field:R,type:"temporal",axis:{orient:"top",title:null}},x2:{field:P,type:"temporal"},tooltip:[{field:R,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"Start"},{field:P,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"End"}],size:{value:{expr:`${C} == toString(datum.cell) ? 19.5 : 18`}},color:{field:"status",scale:{domain:["success","error"],range:["#37BE5F","red"]},legend:null}},data:{values:n},config:{view:{stroke:"transparent"}}}}(S,p,l,o)),e[1]=d,e[2]=l,e[3]=r.cellRuns,e[4]=r.runId,e[5]=o,e[6]=p,e[7]=g}else p=e[6],g=e[7];const c=g.spec;let y;e[8]!==p||e[9]!==i||e[10]!==r?(y=s.jsx(H,{run:r,hoveredCellId:i,hiddenInputElementId:p}),e[8]=p,e[9]=i,e[10]=r,e[11]=y):y=e[11];const f=y;if(l==="above"){let S,n,j;return e[12]!==o||e[13]!==c?(S=s.jsx(E,{vegaSpec:c,height:120,signalListeners:x,theme:o}),e[12]=o,e[13]=c,e[14]=S):S=e[14],e[15]!==S||e[16]!==a||e[17]!==f?(n=s.jsxs("pre",{className:"font-mono font-semibold",children:[a,S,f]}),e[15]=S,e[16]=a,e[17]=f,e[18]=n):n=e[18],e[19]!==r.runId||e[20]!==n?(j=s.jsx("div",{className:"flex flex-col",children:n},r.runId),e[19]=r.runId,e[20]=n,e[21]=j):j=e[21],j}let v,I,h;return e[22]!==a||e[23]!==f?(v=s.jsxs("pre",{className:"font-mono font-semibold",children:[a,f]}),e[22]=a,e[23]=f,e[24]=v):v=e[24],e[25]!==o||e[26]!==c?(I=s.jsx(E,{className:"-mt-0.5 flex-1",vegaSpec:c,height:100,signalListeners:x,theme:o}),e[25]=o,e[26]=c,e[27]=I):I=e[27],e[28]!==r.runId||e[29]!==v||e[30]!==I?(h=s.jsxs("div",{className:"flex flex-row",children:[v,I]},r.runId),e[28]=r.runId,e[29]=v,e[30]=I,e[31]=h):h=e[31],h},H=t=>{const e=N.c(12),{run:r,hoveredCellId:l,hiddenInputElementId:o}=t,a=M.useRef(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=c=>{a.current&&(a.current.value=String(c),a.current.dispatchEvent(new Event("input",{bubbles:!0})))},e[0]=i):i=e[0];const u=i,m=l||"";let x,d,p,g;return e[1]!==o||e[2]!==m?(x=s.jsx("input",{type:"text",id:o,defaultValue:m,hidden:!0,ref:a}),e[1]=o,e[2]=m,e[3]=x):x=e[3],e[4]!==r.cellRuns?(d=[...r.cellRuns.values()],e[4]=r.cellRuns,e[5]=d):d=e[5],e[6]!==l||e[7]!==d?(p=d.map(c=>s.jsx(D,{cellRun:c,hovered:c.cellId===l,dispatchHoverEvent:u},c.cellId)),e[6]=l,e[7]=d,e[8]=p):p=e[8],e[9]!==x||e[10]!==p?(g=s.jsxs("div",{className:"text-xs mt-0.5 ml-3 flex flex-col gap-0.5",children:[x,p]}),e[9]=x,e[10]=p,e[11]=g):g=e[11],g},q={success:s.jsx(me,{color:"green",size:14}),running:s.jsx(fe,{color:"var(--blue-10)",size:14}),error:s.jsx(ie,{color:"red",size:14}),queued:s.jsx(Y,{color:"grey",size:14})},D=t=>{const e=N.c(39),{cellRun:r,hovered:l,dispatchHoverEvent:o}=t;let a;e[0]!==r.elapsedTime?(a=r.elapsedTime?V(1e3*r.elapsedTime):"-",e[0]=r.elapsedTime,e[1]=a):a=e[1];const i=a;let u;e[2]!==r.elapsedTime||e[3]!==i?(u=r.elapsedTime?s.jsxs("span",{children:["This cell took ",s.jsx(ne,{elapsedTime:i})," to run"]}):s.jsx("span",{children:"This cell has not been run"}),e[2]=r.elapsedTime,e[3]=i,e[4]=u):u=e[4];const m=u;let x;e[5]!==r.cellId||e[6]!==o?(x=()=>{o(r.cellId)},e[5]=r.cellId,e[6]=o,e[7]=x):x=e[7];const d=x;let p;e[8]!==o?(p=()=>{o(null)},e[8]=o,e[9]=p):p=e[9];const g=p,c=l&&"bg-[var(--gray-3)] opacity-100";let y,f,v,I,h,S,n;e[10]!==c?(y=ee("flex flex-row gap-2 py-1 px-1 opacity-70 hover:bg-[var(--gray-3)] hover:opacity-100",c),e[10]=c,e[11]=y):y=e[11],e[12]!==r.startTime?(f=O(r.startTime),e[12]=r.startTime,e[13]=f):f=e[13],e[14]!==f?(v=s.jsxs("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",f,"]"]}),e[14]=f,e[15]=v):v=e[15],e[16]!==r.cellId?(I=s.jsxs("span",{className:"text-[var(--gray-10)] w-16",children:["(",s.jsx(te,{cellId:r.cellId}),")"]}),e[16]=r.cellId,e[17]=I):I=e[17],e[18]!==r.code?(h=s.jsx("span",{className:"w-40 truncate -ml-1",children:r.code}),e[18]=r.code,e[19]=h):h=e[19],e[20]!==i?(S=s.jsx("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:i}),e[20]=i,e[21]=S):S=e[21],e[22]!==m||e[23]!==S?(n=s.jsx(A,{content:m,children:S}),e[22]=m,e[23]=S,e[24]=n):n=e[24];const j=q[r.status];let b,_,T;return e[25]!==r.status||e[26]!==j?(b=s.jsx(A,{content:r.status,children:j}),e[25]=r.status,e[26]=j,e[27]=b):b=e[27],e[28]!==n||e[29]!==b?(_=s.jsxs("div",{className:"flex flex-row gap-1 w-16 justify-end -ml-2",children:[n,b]}),e[28]=n,e[29]=b,e[30]=_):_=e[30],e[31]!==d||e[32]!==g||e[33]!==h||e[34]!==_||e[35]!==y||e[36]!==v||e[37]!==I?(T=s.jsxs("div",{className:y,onMouseEnter:d,onMouseLeave:g,children:[v,I,h,_]}),e[31]=d,e[32]=g,e[33]=h,e[34]=_,e[35]=y,e[36]=v,e[37]=I,e[38]=T):T=e[38],T},k=function(t){try{const e=new Date(1e3*t),r=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),u=String(e.getSeconds()).padStart(2,"0");return`${r}-${l}-${o} ${a}:${i}:${u}.${String(e.getMilliseconds()).padStart(3,"0")}`}catch{return""}}});export{U as Tracing,ve as __tla,k as formatChartTime};
