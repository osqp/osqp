import{a as Tt,n as _n,r as Wn,s as Jn,t as qn}from"./precisionRound-Qxa8hC2h.js";import{i as _t,n as Hn,r as Gn,t as Zn}from"./defaultLocale-YmL2k7Vp.js";import{C as Vn,N as Wt,S as Qn,T as Jt,_ as qt,a as Kn,b as it,c as Ht,i as Xn,l as Gt,n as tr,o as nr,p as Zt,r as rr,s as er,t as ar,v as st,w as ur,x as or}from"./defaultLocale-zQltfbSS.js";function E(t,n,r){return t.fields=n||[],t.fname=r,t}function ir(t){return t==null?null:t.fname}function Vt(t){return t==null?null:t.fields}function Qt(t){return t.length===1?sr(t[0]):lr(t)}var sr=t=>function(n){return n[t]},lr=t=>{let n=t.length;return function(r){for(let e=0;e<n;++e)r=r[t[e]];return r}};function v(t){throw Error(t)}function wt(t){let n=[],r=t.length,e=null,a=0,u="",o,i,c;t+="";function l(){n.push(u+t.substring(o,i)),u="",o=i+1}for(o=i=0;i<r;++i)if(c=t[i],c==="\\")u+=t.substring(o,i++),o=i;else if(c===e)l(),e=null,a=-1;else{if(e)continue;o===a&&c==='"'||o===a&&c==="'"?(o=i+1,e=c):c==="."&&!a?i>o?l():o=i+1:c==="["?(i>o&&l(),a=o=i+1):c==="]"&&(a||v("Access path missing open bracket: "+t),a>0&&l(),a=0,o=i+1)}return a&&v("Access path missing closing bracket: "+t),e&&v("Access path missing closing quote: "+t),i>o&&(i++,l()),n}function lt(t,n,r){let e=wt(t);return t=e.length===1?e[0]:t,E((r&&r.get||Qt)(e),[t],n||t)}var cr=lt("id"),W=E(t=>t,[],"identity"),I=E(()=>0,[],"zero"),Kt=E(()=>1,[],"one"),fr=E(()=>!0,[],"true"),hr=E(()=>!1,[],"false"),gr=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(t=>typeof Object.prototype[t]=="function"),"__proto__"]);function pr(t,n,r){let e=[n].concat([].slice.call(r));console[t].apply(console,e)}var mr=0,dr=1,yr=2,vr=3,br=4;function Mr(t,n,r=pr){let e=t||0;return{level(a){return arguments.length?(e=+a,this):e},error(){return e>=1&&r(n||"error","ERROR",arguments),this},warn(){return e>=2&&r(n||"warn","WARN",arguments),this},info(){return e>=3&&r(n||"log","INFO",arguments),this},debug(){return e>=4&&r(n||"log","DEBUG",arguments),this}}}var J=Array.isArray;function $(t){return t===Object(t)}var Xt=t=>t!=="__proto__";function Cr(...t){return t.reduce((n,r)=>{for(let e in r)if(e==="signals")n.signals=Tr(n.signals,r.signals);else{let a=e==="legend"?{layout:1}:e==="style"?!0:null;jt(n,e,r[e],a)}return n},{})}function jt(t,n,r,e){if(!Xt(n))return;let a,u;if($(r)&&!J(r))for(a in u=$(t[n])?t[n]:t[n]={},r)e&&(e===!0||e[a])?jt(u,a,r[a]):Xt(a)&&(u[a]=r[a]);else t[n]=r}function Tr(t,n){if(t==null)return n;let r={},e=[];function a(u){r[u.name]||(r[u.name]=1,e.push(u))}return n.forEach(a),t.forEach(a),e}function P(t){return t[t.length-1]}function q(t){return t==null||t===""?null:+t}var tn=t=>n=>t*Math.exp(n),nn=t=>n=>Math.log(t*n),rn=t=>n=>Math.sign(n)*Math.log1p(Math.abs(n/t)),en=t=>n=>Math.sign(n)*Math.expm1(Math.abs(n))*t,ct=t=>n=>n<0?-((-n)**+t):n**+t;function ft(t,n,r,e){let a=r(t[0]),u=r(P(t)),o=(u-a)*n;return[e(a-o),e(u-o)]}function wr(t,n){return ft(t,n,q,W)}function jr(t,n){var r=Math.sign(t[0]);return ft(t,n,nn(r),tn(r))}function Dr(t,n,r){return ft(t,n,ct(r),ct(1/r))}function kr(t,n,r){return ft(t,n,rn(r),en(r))}function ht(t,n,r,e,a){let u=e(t[0]),o=e(P(t)),i=n==null?(u+o)/2:e(n);return[a(i+(u-i)*r),a(i+(o-i)*r)]}function Or(t,n,r){return ht(t,n,r,q,W)}function Ur(t,n,r){let e=Math.sign(t[0]);return ht(t,n,r,nn(e),tn(e))}function xr(t,n,r,e){return ht(t,n,r,ct(e),ct(1/e))}function Nr(t,n,r,e){return ht(t,n,r,rn(e),en(e))}function Ar(t){return 1+~~(new Date(t).getMonth()/3)}function Er(t){return 1+~~(new Date(t).getUTCMonth()/3)}function R(t){return t==null?[]:J(t)?t:[t]}function Sr(t,n,r){let e=t[0],a=t[1],u;return a<e&&(u=a,a=e,e=u),u=a-e,u>=r-n?[n,r]:[e=Math.min(Math.max(e,n),r-u),e+u]}function B(t){return typeof t=="function"}var Fr="descending";function Pr(t,n,r){r||(r={}),n=R(n)||[];let e=[],a=[],u={},o=r.comparator||zr;return R(t).forEach((i,c)=>{i!=null&&(e.push(n[c]===Fr?-1:1),a.push(i=B(i)?i:lt(i,null,r)),(Vt(i)||[]).forEach(l=>u[l]=1))}),a.length===0?null:E(o(a,e),Object.keys(u))}var Dt=(t,n)=>(t<n||t==null)&&n!=null?-1:(t>n||n==null)&&t!=null?1:(n=n instanceof Date?+n:n,(t=t instanceof Date?+t:t)!==t&&n===n?-1:n!==n&&t===t?1:0),zr=(t,n)=>t.length===1?Yr(t[0],n[0]):Ir(t,n,t.length),Yr=(t,n)=>function(r,e){return Dt(t(r),t(e))*n},Ir=(t,n,r)=>(n.push(0),function(e,a){let u,o=0,i=-1;for(;o===0&&++i<r;)u=t[i],o=Dt(u(e),u(a));return o*n[i]});function an(t){return B(t)?t:()=>t}function $r(t,n){let r;return e=>{r&&clearTimeout(r),r=setTimeout(()=>(n(e),r=null),t)}}function z(t){for(let n,r,e=1,a=arguments.length;e<a;++e)for(r in n=arguments[e],n)t[r]=n[r];return t}function Rr(t,n){let r=0,e,a,u,o;if(t&&(e=t.length))if(n==null){for(a=t[r];r<e&&(a==null||a!==a);a=t[++r]);for(u=o=a;r<e;++r)a=t[r],a!=null&&(a<u&&(u=a),a>o&&(o=a))}else{for(a=n(t[r]);r<e&&(a==null||a!==a);a=n(t[++r]));for(u=o=a;r<e;++r)a=n(t[r]),a!=null&&(a<u&&(u=a),a>o&&(o=a))}return[u,o]}function Br(t,n){let r=t.length,e=-1,a,u,o,i,c;if(n==null){for(;++e<r;)if(u=t[e],u!=null&&u>=u){a=o=u;break}if(e===r)return[-1,-1];for(i=c=e;++e<r;)u=t[e],u!=null&&(a>u&&(a=u,i=e),o<u&&(o=u,c=e))}else{for(;++e<r;)if(u=n(t[e],e,t),u!=null&&u>=u){a=o=u;break}if(e===r)return[-1,-1];for(i=c=e;++e<r;)u=n(t[e],e,t),u!=null&&(a>u&&(a=u,i=e),o<u&&(o=u,c=e))}return[i,c]}function N(t,n){return Object.hasOwn(t,n)}var gt={};function Lr(t){let n={},r;function e(u){return N(n,u)&&n[u]!==gt}let a={size:0,empty:0,object:n,has:e,get(u){return e(u)?n[u]:void 0},set(u,o){return e(u)||(++a.size,n[u]===gt&&--a.empty),n[u]=o,this},delete(u){return e(u)&&(--a.size,++a.empty,n[u]=gt),this},clear(){a.size=a.empty=0,a.object=n={}},test(u){return arguments.length?(r=u,a):r},clean(){let u={},o=0;for(let i in n){let c=n[i];c!==gt&&(!r||!r(c))&&(u[i]=c,++o)}a.size=o,a.empty=0,a.object=n=u}};return t&&Object.keys(t).forEach(u=>{a.set(u,t[u])}),a}function _r(t,n,r,e,a,u){if(!r&&r!==0)return u;let o=+r,i=t[0],c=P(t),l;c<i&&(l=i,i=c,c=l),l=Math.abs(n-i);let h=Math.abs(c-n);return l<h&&l<=o?e:h<=o?a:u}function Wr(t,n,r){let e=t.prototype=Object.create(n.prototype);return Object.defineProperty(e,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),z(e,r)}function Jr(t,n,r,e){let a=n[0],u=n[n.length-1],o;return a>u&&(o=a,a=u,u=o),r=r===void 0||r,e=e===void 0||e,(r?a<=t:a<t)&&(e?t<=u:t<u)}function qr(t){return typeof t=="boolean"}function un(t){return Object.prototype.toString.call(t)==="[object Date]"}function on(t){return t&&B(t[Symbol.iterator])}function sn(t){return typeof t=="number"}function Hr(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function pt(t){return typeof t=="string"}function Gr(t,n,r){t&&(t=n?R(t).map(i=>i.replace(/\\(.)/g,"$1")):R(t));let e=t&&t.length,a=r&&r.get||Qt,u=i=>a(n?[i]:wt(i)),o;if(!e)o=function(){return""};else if(e===1){let i=u(t[0]);o=function(c){return""+i(c)}}else{let i=t.map(u);o=function(c){let l=""+i[0](c),h=0;for(;++h<e;)l+="|"+i[h](c);return l}}return E(o,t,"key")}function Zr(t,n){let r=t[0],e=P(t),a=+n;return a?a===1?e:r+a*(e-r):r}var Vr=1e4;function Qr(t){t=+t||Vr;let n,r,e,a=()=>{n={},r={},e=0},u=(o,i)=>(++e>t&&(r=n,n={},e=1),n[o]=i);return a(),{clear:a,has:o=>N(n,o)||N(r,o),get:o=>N(n,o)?n[o]:N(r,o)?u(o,r[o]):void 0,set:(o,i)=>N(n,o)?n[o]=i:u(o,i)}}function Kr(t,n,r,e){let a=n.length,u=r.length;if(!u)return n;if(!a)return r;let o=e||new n.constructor(a+u),i=0,c=0,l=0;for(;i<a&&c<u;++l)o[l]=t(n[i],r[c])>0?r[c++]:n[i++];for(;i<a;++i,++l)o[l]=n[i];for(;c<u;++c,++l)o[l]=r[c];return o}function H(t,n){let r="";for(;--n>=0;)r+=t;return r}function Xr(t,n,r,e){let a=r||" ",u=t+"",o=n-u.length;return o<=0?u:e==="left"?H(a,o)+u:e==="center"?H(a,~~(o/2))+u+H(a,Math.ceil(o/2)):u+H(a,o)}function ln(t){return t&&P(t)-t[0]||0}function mt(t){return J(t)?`[${t.map(n=>n===null?"null":mt(n))}]`:$(t)||pt(t)?JSON.stringify(t).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):t}function cn(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}var te=t=>sn(t)||un(t)?t:Date.parse(t);function fn(t,n){return n||(n=te),t==null||t===""?null:n(t)}function hn(t){return t==null||t===""?null:t+""}function gn(t){let n={},r=t.length;for(let e=0;e<r;++e)n[t[e]]=!0;return n}function ne(t,n,r,e){let a=e??"\u2026",u=t+"",o=u.length,i=Math.max(0,n-a.length);return o<=n?u:r==="left"?a+u.slice(o-i):r==="center"?u.slice(0,Math.ceil(i/2))+a+u.slice(o-~~(i/2)):u.slice(0,i)+a}function re(t,n,r){if(t)if(n){let e=t.length;for(let a=0;a<e;++a){let u=n(t[a]);u&&r(u,a,t)}}else t.forEach(r)}var pn={},kt={},Ot=34,G=10,Ut=13;function mn(t){return Function("d","return {"+t.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""'}).join(",")+"}")}function ee(t,n){var r=mn(t);return function(e,a){return n(r(e),a,t)}}function dn(t){var n=Object.create(null),r=[];return t.forEach(function(e){for(var a in e)a in n||r.push(n[a]=a)}),r}function T(t,n){var r=t+"",e=r.length;return e<n?Array(n-e+1).join(0)+r:r}function ae(t){return t<0?"-"+T(-t,6):t>9999?"+"+T(t,6):T(t,4)}function ue(t){var n=t.getUTCHours(),r=t.getUTCMinutes(),e=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ae(t.getUTCFullYear(),4)+"-"+T(t.getUTCMonth()+1,2)+"-"+T(t.getUTCDate(),2)+(a?"T"+T(n,2)+":"+T(r,2)+":"+T(e,2)+"."+T(a,3)+"Z":e?"T"+T(n,2)+":"+T(r,2)+":"+T(e,2)+"Z":r||n?"T"+T(n,2)+":"+T(r,2)+"Z":"")}function oe(t){var n=RegExp('["'+t+`
\r]`),r=t.charCodeAt(0);function e(s,f){var g,p,m=a(s,function(d,C){if(g)return g(d,C-1);p=d,g=f?ee(d,f):mn(d)});return m.columns=p||[],m}function a(s,f){var g=[],p=s.length,m=0,d=0,C,x=p<=0,j=!1;s.charCodeAt(p-1)===G&&--p,s.charCodeAt(p-1)===Ut&&--p;function y(){if(x)return kt;if(j)return j=!1,pn;var ut,ot=m,_;if(s.charCodeAt(ot)===Ot){for(;m++<p&&s.charCodeAt(m)!==Ot||s.charCodeAt(++m)===Ot;);return(ut=m)>=p?x=!0:(_=s.charCodeAt(m++))===G?j=!0:_===Ut&&(j=!0,s.charCodeAt(m)===G&&++m),s.slice(ot+1,ut-1).replace(/""/g,'"')}for(;m<p;){if((_=s.charCodeAt(ut=m++))===G)j=!0;else if(_===Ut)j=!0,s.charCodeAt(m)===G&&++m;else if(_!==r)continue;return s.slice(ot,ut)}return x=!0,s.slice(ot,p)}for(;(C=y())!==kt;){for(var at=[];C!==pn&&C!==kt;)at.push(C),C=y();f&&(at=f(at,d++))==null||g.push(at)}return g}function u(s,f){return s.map(function(g){return f.map(function(p){return h(g[p])}).join(t)})}function o(s,f){return f??(f=dn(s)),[f.map(h).join(t)].concat(u(s,f)).join(`
`)}function i(s,f){return f??(f=dn(s)),u(s,f).join(`
`)}function c(s){return s.map(l).join(`
`)}function l(s){return s.map(h).join(t)}function h(s){return s==null?"":s instanceof Date?ue(s):n.test(s+="")?'"'+s.replace(/"/g,'""')+'"':s}return{parse:e,parseRows:a,format:o,formatBody:i,formatRows:c,formatRow:l,formatValue:h}}function ie(t){return t}function se(t){if(t==null)return ie;var n,r,e=t.scale[0],a=t.scale[1],u=t.translate[0],o=t.translate[1];return function(i,c){c||(n=r=0);var l=2,h=i.length,s=Array(h);for(s[0]=(n+=i[0])*e+u,s[1]=(r+=i[1])*a+o;l<h;)s[l]=i[l],++l;return s}}function le(t,n){for(var r,e=t.length,a=e-n;a<--e;)r=t[a],t[a++]=t[e],t[e]=r}function ce(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(r){return yn(t,r)})}:yn(t,n)}function yn(t,n){var r=n.id,e=n.bbox,a=n.properties==null?{}:n.properties,u=vn(t,n);return r==null&&e==null?{type:"Feature",properties:a,geometry:u}:e==null?{type:"Feature",id:r,properties:a,geometry:u}:{type:"Feature",id:r,bbox:e,properties:a,geometry:u}}function vn(t,n){var r=se(t.transform),e=t.arcs;function a(h,s){s.length&&s.pop();for(var f=e[h<0?~h:h],g=0,p=f.length;g<p;++g)s.push(r(f[g],g));h<0&&le(s,p)}function u(h){return r(h)}function o(h){for(var s=[],f=0,g=h.length;f<g;++f)a(h[f],s);return s.length<2&&s.push(s[0]),s}function i(h){for(var s=o(h);s.length<4;)s.push(s[0]);return s}function c(h){return h.map(i)}function l(h){var s=h.type,f;switch(s){case"GeometryCollection":return{type:s,geometries:h.geometries.map(l)};case"Point":f=u(h.coordinates);break;case"MultiPoint":f=h.coordinates.map(u);break;case"LineString":f=o(h.arcs);break;case"MultiLineString":f=h.arcs.map(o);break;case"Polygon":f=c(h.arcs);break;case"MultiPolygon":f=h.arcs.map(c);break;default:return null}return{type:s,coordinates:f}}return l(n)}function fe(t,n){var r={},e={},a={},u=[],o=-1;n.forEach(function(l,h){var s=t.arcs[l<0?~l:l],f;s.length<3&&!s[1][0]&&!s[1][1]&&(f=n[++o],n[o]=l,n[h]=f)}),n.forEach(function(l){var h=i(l),s=h[0],f=h[1],g,p;if(g=a[s])if(delete a[g.end],g.push(l),g.end=f,p=e[f]){delete e[p.start];var m=p===g?g:g.concat(p);e[m.start=g.start]=a[m.end=p.end]=m}else e[g.start]=a[g.end]=g;else if(g=e[f])if(delete e[g.start],g.unshift(l),g.start=s,p=a[s]){delete a[p.end];var d=p===g?g:p.concat(g);e[d.start=p.start]=a[d.end=g.end]=d}else e[g.start]=a[g.end]=g;else g=[l],e[g.start=s]=a[g.end=f]=g});function i(l){var h=t.arcs[l<0?~l:l],s=h[0],f;return t.transform?(f=[0,0],h.forEach(function(g){f[0]+=g[0],f[1]+=g[1]})):f=h[h.length-1],l<0?[f,s]:[s,f]}function c(l,h){for(var s in l){var f=l[s];delete h[f.start],delete f.start,delete f.end,f.forEach(function(g){r[g<0?~g:g]=1}),u.push(f)}}return c(a,e),c(e,a),n.forEach(function(l){r[l<0?~l:l]||u.push([l])}),u}function he(t){return vn(t,ge.apply(this,arguments))}function ge(t,n,r){var e,a,u;if(arguments.length>1)e=pe(t,n,r);else for(a=0,e=Array(u=t.arcs.length);a<u;++a)e[a]=a;return{type:"MultiLineString",arcs:fe(t,e)}}function pe(t,n,r){var e=[],a=[],u;function o(s){var f=s<0?~s:s;(a[f]||(a[f]=[])).push({i:s,g:u})}function i(s){s.forEach(o)}function c(s){s.forEach(i)}function l(s){s.forEach(c)}function h(s){switch(u=s,s.type){case"GeometryCollection":s.geometries.forEach(h);break;case"LineString":i(s.arcs);break;case"MultiLineString":case"Polygon":c(s.arcs);break;case"MultiPolygon":l(s.arcs);break}}return h(n),a.forEach(r==null?function(s){e.push(s[0].i)}:function(s){r(s[0].g,s[s.length-1].g)&&e.push(s[0].i)}),e}var b="year",D="quarter",w="month",M="week",k="date",me="day",F="dayofyear",O="hours",U="minutes",A="seconds",S="milliseconds",bn=[b,D,w,M,k,"day",F,O,U,A,S],xt=bn.reduce((t,n,r)=>(t[n]=1+r,t),{});function Mn(t){let n=R(t).slice(),r={};return n.length||v("Missing time unit."),n.forEach(e=>{N(xt,e)?r[e]=1:v(`Invalid time unit: ${e}.`)}),(r.week||r.day?1:0)+(r.quarter||r.month||r.date?1:0)+(r.dayofyear?1:0)>1&&v(`Incompatible time units: ${t}`),n.sort((e,a)=>xt[e]-xt[a]),n}var de={[b]:"%Y ",[D]:"Q%q ",[w]:"%b ",[k]:"%d ",[M]:"W%U ",day:"%a ",[F]:"%j ",[O]:"%H:00",[U]:"00:%M",[A]:":%S",[S]:".%L",[`${b}-${w}`]:"%Y-%m ",[`${b}-${w}-${k}`]:"%Y-%m-%d ",[`${O}-${U}`]:"%H:%M"};function ye(t,n){let r=z({},de,n),e=Mn(t),a=e.length,u="",o=0,i,c;for(o=0;o<a;)for(i=e.length;i>o;--i)if(c=e.slice(o,i).join("-"),r[c]!=null){u+=r[c],o=i;break}return u.trim()}var Y=new Date;function Nt(t){return Y.setFullYear(t),Y.setMonth(0),Y.setDate(1),Y.setHours(0,0,0,0),Y}function ve(t){return Cn(new Date(t))}function be(t){return At(new Date(t))}function Cn(t){return st.count(Nt(t.getFullYear())-1,t)}function At(t){return Zt.count(Nt(t.getFullYear())-1,t)}function Et(t){return Nt(t).getDay()}function Me(t,n,r,e,a,u,o){if(0<=t&&t<100){let i=new Date(-1,n,r,e,a,u,o);return i.setFullYear(t),i}return new Date(t,n,r,e,a,u,o)}function Ce(t){return Tn(new Date(t))}function Te(t){return St(new Date(t))}function Tn(t){let n=Date.UTC(t.getUTCFullYear(),0,1);return it.count(n-1,t)}function St(t){let n=Date.UTC(t.getUTCFullYear(),0,1);return qt.count(n-1,t)}function Ft(t){return Y.setTime(Date.UTC(t,0,1)),Y.getUTCDay()}function we(t,n,r,e,a,u,o){if(0<=t&&t<100){let i=new Date(Date.UTC(-1,n,r,e,a,u,o));return i.setUTCFullYear(r.y),i}return new Date(Date.UTC(t,n,r,e,a,u,o))}function wn(t,n,r,e,a){let u=n||1,o=P(t),i=(C,x,j)=>(j||(j=C),je(r[j],e[j],C===o&&u,x)),c=new Date,l=gn(t),h=l.year?i(b):an(2012),s=l.month?i(w):l.quarter?i(D):I,f=l.week&&l.day?i("day",1,M+"day"):l.week?i(M,1):l.day?i("day",1):l.date?i(k,1):l.dayofyear?i(F,1):Kt,g=l.hours?i(O):I,p=l.minutes?i(U):I,m=l.seconds?i(A):I,d=l.milliseconds?i(S):I;return function(C){c.setTime(+C);let x=h(c);return a(x,s(c),f(c,x),g(c),p(c),m(c),d(c))}}function je(t,n,r,e){let a=r<=1?t:e?(u,o)=>e+r*Math.floor((t(u,o)-e)/r):(u,o)=>r*Math.floor(t(u,o)/r);return n?(u,o)=>n(a(u,o),o):a}function L(t,n,r){return n+t*7-(r+6)%7}var De={[b]:t=>t.getFullYear(),[D]:t=>Math.floor(t.getMonth()/3),[w]:t=>t.getMonth(),[k]:t=>t.getDate(),[O]:t=>t.getHours(),[U]:t=>t.getMinutes(),[A]:t=>t.getSeconds(),[S]:t=>t.getMilliseconds(),[F]:t=>Cn(t),[M]:t=>At(t),[M+"day"]:(t,n)=>L(At(t),t.getDay(),Et(n)),day:(t,n)=>L(1,t.getDay(),Et(n))},ke={[D]:t=>3*t,[M]:(t,n)=>L(t,0,Et(n))};function Oe(t,n){return wn(t,n||1,De,ke,Me)}var Ue={[b]:t=>t.getUTCFullYear(),[D]:t=>Math.floor(t.getUTCMonth()/3),[w]:t=>t.getUTCMonth(),[k]:t=>t.getUTCDate(),[O]:t=>t.getUTCHours(),[U]:t=>t.getUTCMinutes(),[A]:t=>t.getUTCSeconds(),[S]:t=>t.getUTCMilliseconds(),[F]:t=>Tn(t),[M]:t=>St(t),day:(t,n)=>L(1,t.getUTCDay(),Ft(n)),[M+"day"]:(t,n)=>L(St(t),t.getUTCDay(),Ft(n))},xe={[D]:t=>3*t,[M]:(t,n)=>L(t,0,Ft(n))};function Ne(t,n){return wn(t,n||1,Ue,xe,we)}var Ae={[b]:nr,[D]:Ht.every(3),[w]:Ht,[M]:Zt,[k]:st,day:st,[F]:st,[O]:or,[U]:Vn,[A]:Jt,[S]:Wt},Ee={[b]:er,[D]:Gt.every(3),[w]:Gt,[M]:qt,[k]:it,day:it,[F]:it,[O]:Qn,[U]:ur,[A]:Jt,[S]:Wt};function dt(t){return Ae[t]}function yt(t){return Ee[t]}function jn(t,n,r){return t?t.offset(n,r):void 0}function Se(t,n,r){return jn(dt(t),n,r)}function Fe(t,n,r){return jn(yt(t),n,r)}function Dn(t,n,r,e){return t?t.range(n,r,e):void 0}function Pe(t,n,r,e){return Dn(dt(t),n,r,e)}function ze(t,n,r,e){return Dn(yt(t),n,r,e)}var Z=1e3,V=Z*60,Q=V*60,vt=Q*24,Ye=vt*7,kn=vt*30,Pt=vt*365,On=[b,w,k,O,U,A,S],K=On.slice(0,-1),X=K.slice(0,-1),tt=X.slice(0,-1),Ie=tt.slice(0,-1),$e=[b,M],Un=[b,w],xn=[b],nt=[[K,1,Z],[K,5,5*Z],[K,15,15*Z],[K,30,30*Z],[X,1,V],[X,5,5*V],[X,15,15*V],[X,30,30*V],[tt,1,Q],[tt,3,3*Q],[tt,6,6*Q],[tt,12,12*Q],[Ie,1,vt],[$e,1,Ye],[Un,1,kn],[Un,3,3*kn],[xn,1,Pt]];function Re(t){let n=t.extent,r=t.maxbins||40,e=Math.abs(ln(n))/r,a=Jn(i=>i[2]).right(nt,e),u,o;return a===nt.length?(u=xn,o=Tt(n[0]/Pt,n[1]/Pt,r)):a?(a=nt[e/nt[a-1][2]<nt[a][2]/e?a-1:a],u=a[0],o=a[1]):(u=On,o=Math.max(Tt(n[0],n[1],r),1)),{units:u,step:o}}function rt(t){let n={};return r=>n[r]||(n[r]=t(r))}function Be(t,n){return r=>{let e=t(r),a=e.indexOf(n);if(a<0)return e;let u=Le(e,a),o=u<e.length?e.slice(u):"";for(;--u>a;)if(e[u]!=="0"){++u;break}return e.slice(0,u)+o}}function Le(t,n){let r=t.lastIndexOf("e"),e;if(r>0)return r;for(r=t.length;--r>n;)if(e=t.charCodeAt(r),e>=48&&e<=57)return r+1}function Nn(t){let n=rt(t.format),r=t.formatPrefix;return{format:n,formatPrefix:r,formatFloat(e){let a=_t(e||",");if(a.precision==null){switch(a.precision=12,a.type){case"%":a.precision-=2;break;case"e":--a.precision;break}return Be(n(a),n(".1f")(1)[1])}else return n(a)},formatSpan(e,a,u,o){o=_t(o??",f");let i=Tt(e,a,u),c=Math.max(Math.abs(e),Math.abs(a)),l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=_n(i,c))||(o.precision=l),r(o,c);case"":case"e":case"g":case"p":case"r":isNaN(l=qn(i,c))||(o.precision=l-(o.type==="e"));break;case"f":case"%":isNaN(l=Wn(i))||(o.precision=l-(o.type==="%")*2);break}return n(o)}}}var zt;An();function An(){return zt=Nn({format:Zn,formatPrefix:Hn})}function En(t){return Nn(Gn(t))}function bt(t){return arguments.length?zt=En(t):zt}function Sn(t,n,r){r||(r={}),$(r)||v(`Invalid time multi-format specifier: ${r}`);let e=n(A),a=n(U),u=n(O),o=n(k),i=n(M),c=n(w),l=n(D),h=n(b),s=t(r.milliseconds||".%L"),f=t(r.seconds||":%S"),g=t(r.minutes||"%I:%M"),p=t(r.hours||"%I %p"),m=t(r.date||r.day||"%a %d"),d=t(r.week||"%b %d"),C=t(r.month||"%B"),x=t(r.quarter||"%B"),j=t(r.year||"%Y");return y=>(e(y)<y?s:a(y)<y?f:u(y)<y?g:o(y)<y?p:c(y)<y?i(y)<y?m:d:h(y)<y?l(y)<y?C:x:j)(y)}function Fn(t){let n=rt(t.format),r=rt(t.utcFormat);return{timeFormat:e=>pt(e)?n(e):Sn(n,dt,e),utcFormat:e=>pt(e)?r(e):Sn(r,yt,e),timeParse:rt(t.parse),utcParse:rt(t.utcParse)}}var Yt;Pn();function Pn(){return Yt=Fn({format:ar,parse:tr,utcFormat:rr,utcParse:Xn})}function zn(t){return Fn(Kn(t))}function et(t){return arguments.length?Yt=zn(t):Yt}var It=(t,n)=>z({},t,n);function _e(t,n){return It(t?En(t):bt(),n?zn(n):et())}function Yn(t,n){let r=arguments.length;return r&&r!==2&&v("defaultLocale expects either zero or two arguments."),r?It(bt(t),et(n)):It(bt(),et())}function We(){return An(),Pn(),Yn()}var Je=/^(data:|([A-Za-z]+:)?\/\/)/,qe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,He=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ge="file://";function Ze(t){return n=>({options:n||{},sanitize:Qe,load:Ve,fileAccess:!1,file:Ke(),http:ta})}async function Ve(t,n){let r=await this.sanitize(t,n),e=r.href;return r.localFile?this.file(e):this.http(e,n==null?void 0:n.http)}async function Qe(t,n){n=z({},this.options,n);let r=this.fileAccess,e={href:null},a,u,o,i=qe.test(t.replace(He,""));(t==null||typeof t!="string"||!i)&&v("Sanitize failure, invalid URI: "+mt(t));let c=Je.test(t);return(o=n.baseURL)&&!c&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),u=(a=t.startsWith(Ge))||n.mode==="file"||n.mode!=="http"&&!c&&r,a?t=t.slice(7):t.startsWith("//")&&(n.defaultProtocol==="file"?(t=t.slice(2),u=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(e,"localFile",{value:!!u}),e.href=t,n.target&&(e.target=n.target+""),n.rel&&(e.rel=n.rel+""),n.context==="image"&&n.crossOrigin&&(e.crossOrigin=n.crossOrigin+""),e}function Ke(t){return Xe}async function Xe(){v("No file system access.")}async function ta(t,n){let r=z({},this.options.http,n),e=n&&n.response,a=await fetch(t,r);return a.ok?B(a[e])?a[e]():a.text():v(a.status+""+a.statusText)}var na=t=>t!=null&&t===t,ra=t=>t==="true"||t==="false"||t===!0||t===!1,ea=t=>!Number.isNaN(Date.parse(t)),In=t=>!Number.isNaN(+t)&&!(t instanceof Date),aa=t=>In(t)&&Number.isInteger(+t),$t={boolean:cn,integer:q,number:q,date:fn,string:hn,unknown:W},Mt=[ra,aa,In,ea],ua=["boolean","integer","number","date"];function $n(t,n){if(!t||!t.length)return"unknown";let r=t.length,e=Mt.length,a=Mt.map((u,o)=>o+1);for(let u=0,o=0,i,c;u<r;++u)for(c=n?t[u][n]:t[u],i=0;i<e;++i)if(a[i]&&na(c)&&!Mt[i](c)&&(a[i]=0,++o,o===Mt.length))return"string";return ua[a.reduce((u,o)=>u===0?o:u,0)-1]}function Rn(t,n){return n.reduce((r,e)=>(r[e]=$n(t,e),r),{})}function Bn(t){let n=function(r,e){let a={delimiter:t};return Rt(r,e?z(e,a):a)};return n.responseType="text",n}function Rt(t,n){return n.header&&(t=n.header.map(mt).join(n.delimiter)+`
`+t),oe(n.delimiter).parse(t+"")}Rt.responseType="text";function oa(t){return typeof Buffer=="function"&&B(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Bt(t,n){let r=n&&n.property?lt(n.property):W;return $(t)&&!oa(t)?ia(r(t),n):r(JSON.parse(t))}Bt.responseType="json";function ia(t,n){return!J(t)&&on(t)&&(t=[...t]),n&&n.copy?JSON.parse(JSON.stringify(t)):t}var sa={interior:(t,n)=>t!==n,exterior:(t,n)=>t===n};function Ln(t,n){let r,e,a,u;return t=Bt(t,n),n&&n.feature?(r=ce,a=n.feature):n&&n.mesh?(r=he,a=n.mesh,u=sa[n.filter]):v("Missing TopoJSON feature or mesh parameter."),e=(e=t.objects[a])?r(t,e,u):v("Invalid TopoJSON object: "+a),e&&e.features||[e]}Ln.responseType="json";var Ct={dsv:Rt,csv:Bn(","),tsv:Bn("	"),json:Bt,topojson:Ln};function Lt(t,n){return arguments.length>1?(Ct[t]=n,this):N(Ct,t)?Ct[t]:null}function la(t){let n=Lt(t);return n&&n.responseType||"text"}function ca(t,n,r,e){n||(n={});let a=Lt(n.type||"json");return a||v("Unknown data format type: "+n.type),t=a(t,n),n.parse&&fa(t,n.parse,r,e),N(t,"columns")&&delete t.columns,t}function fa(t,n,r,e){if(!t.length)return;let a=et();r||(r=a.timeParse),e||(e=a.utcParse);let u=t.columns||Object.keys(t[0]),o,i,c,l,h,s;n==="auto"&&(n=Rn(t,u)),u=Object.keys(n);let f=u.map(g=>{let p=n[g],m,d;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),d=m[1],(d[0]==="'"&&d[d.length-1]==="'"||d[0]==='"'&&d[d.length-1]==='"')&&(d=d.slice(1,-1)),(m[0]==="utc"?e:r)(d);if(!$t[p])throw Error("Illegal format pattern: "+g+":"+p);return $t[p]});for(c=0,h=t.length,s=u.length;c<h;++c)for(o=t[c],l=0;l<s;++l)i=u[l],o[i]=f[l](o[i])}var ha=Ze();export{Sr as $,Or as $t,Se as A,Cr as At,be as B,ln as Bt,bn as C,Hr as Ct,ve as D,Mr as Dt,Re as E,Zr as Et,yt as F,Dr as Ft,vr as G,gn as Gt,br as H,cn as Ht,Fe as I,kr as It,E as J,fr as Jt,mr as K,hn as Kt,ze as L,P as Lt,ye as M,Xr as Mt,Mn as N,wr as Nt,Oe as O,Qr as Ot,Ne as P,jr as Pt,Dt as Q,I as Qt,Ce as R,Ar as Rt,A as S,$ as St,b as T,Gr as Tt,gr as U,fn as Ut,mt as V,wt as Vt,dr as W,q as Wt,ir as X,re as Xt,Vt as Y,Er as Yt,R as Z,jt as Zt,O as _,qr as _t,ha as a,Rr as at,w as b,on as bt,$t as c,Lr as ct,bt as d,N as dt,Ur as en,Pr as et,We as f,cr as ft,F as g,J as gt,me as h,Jr as ht,Rn as i,z as it,Pe as j,Kt as jt,dt as k,Kr as kt,Yn as l,lt,k as m,Wr as mt,Lt as n,Nr as nn,$r as nt,ca as o,Br as ot,et as p,W as pt,yr as q,ne as qt,$n as r,v as rt,la as s,hr as st,Ct as t,xr as tn,an as tt,_e as u,_r as ut,S as v,un as vt,M as w,pt as wt,D as x,sn as xt,U as y,B as yt,Te as z,H as zt};
