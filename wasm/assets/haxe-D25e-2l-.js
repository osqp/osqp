function l(e){return{type:e,style:"keyword"}}var N,$=l("keyword a"),E=l("keyword b"),g=l("keyword c"),R=l("operator"),D={type:"atom",style:"atom"},A={type:"attribute",style:"attribute"},s=l("typedef"),B={if:$,while:$,else:E,do:E,try:E,return:g,break:g,continue:g,new:g,throw:g,var:l("var"),inline:A,static:A,using:l("import"),public:A,private:A,cast:l("cast"),import:l("import"),macro:l("macro"),function:l("function"),catch:l("catch"),untyped:l("untyped"),callback:l("cb"),for:l("for"),switch:l("switch"),case:l("case"),default:l("default"),in:R,never:l("property_access"),trace:l("trace"),class:s,abstract:s,enum:s,interface:s,typedef:s,extends:s,implements:s,dynamic:s,true:D,false:D,null:D},O=/[+\-*&%=<>!?|]/;function F(e,n,r){return n.tokenize=r,r(e,n)}function j(e,n){for(var r,a=!1;(r=e.next())!=null;){if(r==n&&!a)return!0;a=!a&&r=="\\"}}function p(e,n,r){return s=e,N=r,n}function V(e,n){var r=e.next();if(r=='"'||r=="'")return F(e,n,(a=r,function(v,T){return j(v,a)&&(T.tokenize=V),p("string","string")}));if(/[\[\]{}\(\),;\:\.]/.test(r))return p(r);if(r=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),p("number","number");if(/\d/.test(r)||r=="-"&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),p("number","number");if(n.reAllowed&&r=="~"&&e.eat(/\//))return j(e,"/"),e.eatWhile(/[gimsu]/),p("regexp","string.special");if(r=="/")return e.eat("*")?F(e,n,U):e.eat("/")?(e.skipToEnd(),p("comment","comment")):(e.eatWhile(O),p("operator",null,e.current()));if(r=="#")return e.skipToEnd(),p("conditional","meta");if(r=="@")return e.eat(/:/),e.eatWhile(/[\w_]/),p("metadata","meta");if(O.test(r))return e.eatWhile(O),p("operator",null,e.current());if(/[A-Z]/.test(r))return e.eatWhile(/[\w_<>]/),p("type","type",i=e.current());e.eatWhile(/[\w_]/);var a,i=e.current(),f=B.propertyIsEnumerable(i)&&B[i];return f&&n.kwAllowed?p(f.type,f.style,i):p("variable","variable",i)}function U(e,n){for(var r,a=!1;r=e.next();){if(r=="/"&&a){n.tokenize=V;break}a=r=="*"}return p("comment","comment")}var q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function C(e,n,r,a,i,f){this.indented=e,this.column=n,this.type=r,this.prev=i,this.info=f,a!=null&&(this.align=a)}function X(e,n){for(var r=e.localVars;r;r=r.next)if(r.name==n)return!0}function Y(e,n){if(/[a-z]/.test(n.charAt(0)))return!1;for(var r=e.importedtypes.length,a=0;a<r;a++)if(e.importedtypes[a]==n)return!0}function G(e){for(var n=o.state,r=n.importedtypes;r;r=r.next)if(r.name==e)return;n.importedtypes={name:e,next:n.importedtypes}}var o={state:null,marked:null,cc:null};function y(){for(var e=arguments.length-1;e>=0;e--)o.cc.push(arguments[e])}function t(){return y.apply(null,arguments),!0}function H(e,n){for(var r=n;r;r=r.next)if(r.name==e)return!0;return!1}function S(e){var n=o.state;if(n.context){if(o.marked="def",H(e,n.localVars))return;n.localVars={name:e,next:n.localVars}}else if(n.globalVars){if(H(e,n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}var ee={name:"this",next:null};function Z(){o.state.context||(o.state.localVars=ee),o.state.context={prev:o.state.context,vars:o.state.localVars}}function W(){o.state.localVars=o.state.context.vars,o.state.context=o.state.context.prev}function c(e,n){var r=function(){var a=o.state;a.lexical=new C(a.indented,o.stream.column(),e,null,a.lexical,n)};return r.lex=!0,r}function u(){var e=o.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function d(e){return function n(r){return r==e?t():e==";"?y():t(n)}}function b(e){return e=="@"?t(K):e=="var"?t(c("vardef"),I,d(";"),u):e=="keyword a"?t(c("form"),m,b,u):e=="keyword b"?t(c("form"),b,u):e=="{"?t(c("}"),Z,_,u,W):e==";"?t():e=="attribute"?t(J):e=="function"?t(w):e=="for"?t(c("form"),d("("),c(")"),oe,d(")"),u,b,u):e=="variable"?t(c("stat"),te):e=="switch"?t(c("form"),m,c("}","switch"),d("{"),_,u,u):e=="case"?t(m,d(":")):e=="default"?t(d(":")):e=="catch"?t(c("form"),Z,d("("),Q,d(")"),b,u,W):e=="import"?t(L,d(";")):e=="typedef"?t(re):y(c("stat"),m,d(";"),u)}function m(e){return q.hasOwnProperty(e)||e=="type"?t(h):e=="function"?t(w):e=="keyword c"?t(P):e=="("?t(c(")"),P,d(")"),u,h):e=="operator"?t(m):e=="["?t(c("]"),k(P,"]"),u,h):e=="{"?t(c("}"),k(ie,"}"),u,h):t()}function P(e){return e.match(/[;\}\)\],]/)?y():y(m)}function h(e,n){return e=="operator"&&/\+\+|--/.test(n)?t(h):e=="operator"||e==":"?t(m):e!=";"?e=="("?t(c(")"),k(m,")"),u,h):e=="."?t(ae,h):e=="["?t(c("]"),m,d("]"),u,h):void 0:void 0}function J(e){return e=="attribute"?t(J):e=="function"?t(w):e=="var"?t(I):void 0}function K(e){return e==":"||e=="variable"?t(K):e=="("?t(c(")"),k(ne,")"),u,b):void 0}function ne(e){if(e=="variable")return t()}function L(e,n){return e=="variable"&&/[A-Z]/.test(n.charAt(0))?(G(n),t()):e=="variable"||e=="property"||e=="."||n=="*"?t(L):void 0}function re(e,n){return e=="variable"&&/[A-Z]/.test(n.charAt(0))?(G(n),t()):e=="type"&&/[A-Z]/.test(n.charAt(0))?t():void 0}function te(e){return e==":"?t(u,b):y(h,d(";"),u)}function ae(e){if(e=="variable")return o.marked="property",t()}function ie(e){if(e=="variable"&&(o.marked="property"),q.hasOwnProperty(e))return t(d(":"),m)}function k(e,n){function r(a){return a==","?t(e,r):a==n?t():t(d(n))}return function(a){return a==n?t():y(e,r)}}function _(e){return e=="}"?t():y(b,_)}function I(e,n){return e=="variable"?(S(n),t(z,M)):t()}function M(e,n){return n=="="?t(m,M):e==","?t(I):void 0}function oe(e,n){return e=="variable"?(S(n),t(ue,m)):y()}function ue(e,n){if(n=="in")return t()}function w(e,n){return e=="variable"||e=="type"?(S(n),t(w)):n=="new"?t(w):e=="("?t(c(")"),Z,k(Q,")"),u,z,b,W):void 0}function z(e){if(e==":")return t(le)}function le(e){return e=="type"||e=="variable"?t():e=="{"?t(c("}"),k(ce,"}"),u):void 0}function ce(e){if(e=="variable")return t(z)}function Q(e,n){if(e=="variable")return S(n),t(z)}W.lex=!0,u.lex=!0;const fe={name:"haxe",startState:function(e){return{tokenize:V,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new C(-e,0,"block",!1),importedtypes:["Int","Float","String","Void","Std","Bool","Dynamic","Array"],context:null,indented:0}},token:function(e,n){if(e.sol()&&(n.lexical.hasOwnProperty("align")||(n.lexical.align=!1),n.indented=e.indentation()),e.eatSpace())return null;var r=n.tokenize(e,n);return s=="comment"?r:(n.reAllowed=!(s!="operator"&&s!="keyword c"&&!s.match(/^[\[{}\(,;:]$/)),n.kwAllowed=s!=".",function(a,i,f,v,T){var x=a.cc;for(o.state=a,o.stream=T,o.marked=null,o.cc=x,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;)if((x.length?x.pop():b)(f,v)){for(;x.length&&x[x.length-1].lex;)x.pop()();return o.marked?o.marked:f=="variable"&&X(a,v)?"variableName.local":f=="variable"&&Y(a,v)?"variableName.special":i}}(n,r,s,N,e))},indent:function(e,n,r){if(e.tokenize!=V)return 0;var a=n&&n.charAt(0),i=e.lexical;i.type=="stat"&&a=="}"&&(i=i.prev);var f=i.type,v=a==f;return f=="vardef"?i.indented+4:f=="form"&&a=="{"?i.indented:f=="stat"||f=="form"?i.indented+r.unit:i.info!="switch"||v?i.align?i.column+(v?0:1):i.indented+(v?0:r.unit):i.indented+(/^(?:case|default)\b/.test(n)?r.unit:2*r.unit)},languageData:{indentOnInput:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}},se={name:"hxml",startState:function(){return{define:!1,inString:!1}},token:function(e,n){var r=e.peek(),a=e.sol();if(r=="#")return e.skipToEnd(),"comment";if(a&&r=="-"){var i="variable-2";return e.eat(/-/),e.peek()=="-"&&(e.eat(/-/),i="keyword a"),e.peek()=="D"&&(e.eat(/[D]/),i="keyword c",n.define=!0),e.eatWhile(/[A-Z]/i),i}return r=e.peek(),n.inString==0&&r=="'"&&(n.inString=!0,e.next()),n.inString==1?(e.skipTo("'")||e.skipToEnd(),e.peek()=="'"&&(e.next(),n.inString=!1),"string"):(e.next(),null)},languageData:{commentTokens:{line:"#"}}};export{fe as haxe,se as hxml};
