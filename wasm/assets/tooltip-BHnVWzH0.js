import{s as L}from"./chunk-DZLz74EQ.js";import{t as ee}from"./react-BcIddLXZ.js";import{t as te}from"./compiler-runtime-Cr9loedd.js";import{i as re,o as K}from"./useEventListener-D1FLsfmf.js";import{t as ne}from"./jsx-runtime-mwDPpfh_.js";import{t as oe}from"./cn-ZXtYmczU.js";import{C as ie,c as ae,d as le,g as se,l as ce,p as ue,s as de,u as pe,v as S,x as w,y as fe}from"./Combination-BjaZc6gK.js";import{a as he,c as X,i as xe,o as ge,s as me,t as ve}from"./dist-o-4-WxUj.js";var s=L(ee(),1),p=L(ne(),1),[_,Ve]=ie("Tooltip",[X]),R=X(),Y="TooltipProvider",ye=700,O="tooltip.open",[be,M]=_(Y),I=r=>{let{__scopeTooltip:e,delayDuration:t=ye,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:i}=r,l=s.useRef(!0),u=s.useRef(!1),a=s.useRef(0);return s.useEffect(()=>{let f=a.current;return()=>window.clearTimeout(f)},[]),(0,p.jsx)(be,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(a.current),l.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:s.useCallback(f=>{u.current=f},[]),disableHoverableContent:o,children:i})};I.displayName=Y;var E="Tooltip",[we,j]=_(E),z=r=>{let{__scopeTooltip:e,children:t,open:n,defaultOpen:o,onOpenChange:i,disableHoverableContent:l,delayDuration:u}=r,a=M(E,r.__scopeTooltip),f=R(e),[c,x]=s.useState(null),h=le(),d=s.useRef(0),g=l??a.disableHoverableContent,v=u??a.delayDuration,m=s.useRef(!1),[b,y]=fe({prop:n,defaultProp:o??!1,onChange:F=>{F?(a.onOpen(),document.dispatchEvent(new CustomEvent(O))):a.onClose(),i==null||i(F)},caller:E}),T=s.useMemo(()=>b?m.current?"delayed-open":"instant-open":"closed",[b]),D=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,m.current=!1,y(!0)},[y]),P=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,y(!1)},[y]),B=s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{m.current=!0,y(!0),d.current=0},v)},[v,y]);return s.useEffect(()=>()=>{d.current&&(d.current=(window.clearTimeout(d.current),0))},[]),(0,p.jsx)(me,{...f,children:(0,p.jsx)(we,{scope:e,contentId:h,open:b,stateAttribute:T,trigger:c,onTriggerChange:x,onTriggerEnter:s.useCallback(()=>{a.isOpenDelayedRef.current?B():D()},[a.isOpenDelayedRef,B,D]),onTriggerLeave:s.useCallback(()=>{g?P():(window.clearTimeout(d.current),d.current=0)},[P,g]),onOpen:D,onClose:P,disableHoverableContent:g,children:t})})};z.displayName=E;var N="TooltipTrigger",q=s.forwardRef((r,e)=>{let{__scopeTooltip:t,...n}=r,o=j(N,t),i=M(N,t),l=R(t),u=K(e,s.useRef(null),o.onTriggerChange),a=s.useRef(!1),f=s.useRef(!1),c=s.useCallback(()=>a.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",c),[c]),(0,p.jsx)(xe,{asChild:!0,...l,children:(0,p.jsx)(se.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:u,onPointerMove:w(r.onPointerMove,x=>{x.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),f.current=!0)}),onPointerLeave:w(r.onPointerLeave,()=>{o.onTriggerLeave(),f.current=!1}),onPointerDown:w(r.onPointerDown,()=>{o.open&&o.onClose(),a.current=!0,document.addEventListener("pointerup",c,{once:!0})}),onFocus:w(r.onFocus,()=>{a.current||o.onOpen()}),onBlur:w(r.onBlur,o.onClose),onClick:w(r.onClick,o.onClose)})})});q.displayName=N;var H="TooltipPortal",[Ce,Te]=_(H,{forceMount:void 0}),G=r=>{let{__scopeTooltip:e,forceMount:t,children:n,container:o}=r,i=j(H,e);return(0,p.jsx)(Ce,{scope:e,forceMount:t,children:(0,p.jsx)(S,{present:t||i.open,children:(0,p.jsx)(pe,{asChild:!0,container:o,children:n})})})};G.displayName=H;var C="TooltipContent",J=s.forwardRef((r,e)=>{let t=Te(C,r.__scopeTooltip),{forceMount:n=t.forceMount,side:o="top",...i}=r,l=j(C,r.__scopeTooltip);return(0,p.jsx)(S,{present:n||l.open,children:l.disableHoverableContent?(0,p.jsx)(Q,{side:o,...i,ref:e}):(0,p.jsx)(Ee,{side:o,...i,ref:e})})}),Ee=s.forwardRef((r,e)=>{let t=j(C,r.__scopeTooltip),n=M(C,r.__scopeTooltip),o=s.useRef(null),i=K(e,o),[l,u]=s.useState(null),{trigger:a,onClose:f}=t,c=o.current,{onPointerInTransitChange:x}=n,h=s.useCallback(()=>{u(null),x(!1)},[x]),d=s.useCallback((g,v)=>{let m=g.currentTarget,b={x:g.clientX,y:g.clientY},y=Pe(b,De(b,m.getBoundingClientRect())),T=Le(v.getBoundingClientRect());u(Me([...y,...T])),x(!0)},[x]);return s.useEffect(()=>()=>h(),[h]),s.useEffect(()=>{if(a&&c){let g=m=>d(m,c),v=m=>d(m,a);return a.addEventListener("pointerleave",g),c.addEventListener("pointerleave",v),()=>{a.removeEventListener("pointerleave",g),c.removeEventListener("pointerleave",v)}}},[a,c,d,h]),s.useEffect(()=>{if(l){let g=v=>{let m=v.target,b={x:v.clientX,y:v.clientY},y=(a==null?void 0:a.contains(m))||(c==null?void 0:c.contains(m)),T=!Oe(b,l);y?h():T&&(h(),f())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[a,c,l,f,h]),(0,p.jsx)(Q,{...r,ref:i})}),[je,_e]=_(E,{isInside:!1}),Re=re("TooltipContent"),Q=s.forwardRef((r,e)=>{let{__scopeTooltip:t,children:n,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:l,...u}=r,a=j(C,t),f=R(t),{onClose:c}=a;return s.useEffect(()=>(document.addEventListener(O,c),()=>document.removeEventListener(O,c)),[c]),s.useEffect(()=>{if(a.trigger){let x=h=>{var d;(d=h.target)!=null&&d.contains(a.trigger)&&c()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[a.trigger,c]),(0,p.jsx)(ue,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:c,children:(0,p.jsxs)(ge,{"data-state":a.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,p.jsx)(Re,{children:n}),(0,p.jsx)(je,{scope:t,isInside:!0,children:(0,p.jsx)(ve,{id:a.contentId,role:"tooltip",children:o||n})})]})})});J.displayName=C;var U="TooltipArrow",ke=s.forwardRef((r,e)=>{let{__scopeTooltip:t,...n}=r,o=R(t);return _e(U,t).isInside?null:(0,p.jsx)(he,{...o,...n,ref:e})});ke.displayName=U;function De(r,e){let t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),o=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,o,i)){case i:return"left";case o:return"right";case t:return"top";case n:return"bottom";default:throw Error("unreachable")}}function Pe(r,e,t=5){let n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function Le(r){let{top:e,right:t,bottom:n,left:o}=r;return[{x:o,y:e},{x:t,y:e},{x:t,y:n},{x:o,y:n}]}function Oe(r,e){let{x:t,y:n}=r,o=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){let u=e[i],a=e[l],f=u.x,c=u.y,x=a.x,h=a.y;c>n!=h>n&&t<(x-f)*(n-c)/(h-c)+f&&(o=!o)}return o}function Me(r){let e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),Ie(e)}function Ie(r){if(r.length<=1)return r.slice();let e=[];for(let n=0;n<r.length;n++){let o=r[n];for(;e.length>=2;){let i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(o.y-l.y)>=(i.y-l.y)*(o.x-l.x))e.pop();else break}e.push(o)}e.pop();let t=[];for(let n=r.length-1;n>=0;n--){let o=r[n];for(;t.length>=2;){let i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(o.y-l.y)>=(i.y-l.y)*(o.x-l.x))t.pop();else break}t.push(o)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Ne=I,He=z,Ae=q,Be=G,V=J,A=L(te(),1),Fe=r=>{let e=(0,A.c)(6),t,n;e[0]===r?(t=e[1],n=e[2]):({delayDuration:n,...t}=r,e[0]=r,e[1]=t,e[2]=n);let o=n===void 0?400:n,i;return e[3]!==o||e[4]!==t?(i=(0,p.jsx)(Ne,{delayDuration:o,...t}),e[3]=o,e[4]=t,e[5]=i):i=e[5],i},W=de(Be),Z=He,Ke=ae(V),$=Ae,k=s.forwardRef((r,e)=>{let t=(0,A.c)(11),n,o,i;t[0]===r?(n=t[1],o=t[2],i=t[3]):({className:n,sideOffset:i,...o}=r,t[0]=r,t[1]=n,t[2]=o,t[3]=i);let l=i===void 0?4:i,u;t[4]===n?u=t[5]:(u=oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-xs data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),t[4]=n,t[5]=u);let a;return t[6]!==o||t[7]!==e||t[8]!==l||t[9]!==u?(a=(0,p.jsx)(ce,{children:(0,p.jsx)(Ke,{ref:e,sideOffset:l,className:u,...o})}),t[6]=o,t[7]=e,t[8]=l,t[9]=u,t[10]=a):a=t[10],a});k.displayName=V.displayName;var Se=r=>{let e=(0,A.c)(22),t,n,o,i,l,u,a,f;e[0]===r?(t=e[1],n=e[2],o=e[3],i=e[4],l=e[5],u=e[6],a=e[7],f=e[8]):({content:o,children:n,usePortal:u,asChild:a,tabIndex:f,side:l,align:t,...i}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=o,e[4]=i,e[5]=l,e[6]=u,e[7]=a,e[8]=f);let c=u===void 0?!0:u,x=a===void 0?!0:a;if(o==null||o==="")return n;let h;e[9]!==x||e[10]!==n||e[11]!==f?(h=(0,p.jsx)($,{asChild:x,tabIndex:f,children:n}),e[9]=x,e[10]=n,e[11]=f,e[12]=h):h=e[12];let d;e[13]!==t||e[14]!==o||e[15]!==l||e[16]!==c?(d=c?(0,p.jsx)(W,{children:(0,p.jsx)(k,{side:l,align:t,children:o})}):(0,p.jsx)(k,{side:l,align:t,children:o}),e[13]=t,e[14]=o,e[15]=l,e[16]=c,e[17]=d):d=e[17];let g;return e[18]!==i||e[19]!==h||e[20]!==d?(g=(0,p.jsxs)(Z,{disableHoverableContent:!0,...i,children:[h,d]}),e[18]=i,e[19]=h,e[20]=d,e[21]=g):g=e[21],g};export{Z as a,Fe as i,k as n,$ as o,W as r,I as s,Se as t};
