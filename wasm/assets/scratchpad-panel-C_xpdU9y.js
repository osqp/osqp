import{s as W}from"./chunk-DZLz74EQ.js";import{c as St,d as ct,l as Ct,s as zt}from"./jotai-BTnrNcC1.js";import{t as Ot}from"./react-BcIddLXZ.js";import{Lr as At,N as It,Rr as f,kr as Lt,vt as Rt,w as Et,__tla as Mt}from"./cells-A69p56PE.js";import"./react-dom-D6bRRS5R.js";import"./zod-U2NFpcFA.js";import{t as nt}from"./compiler-runtime-Cr9loedd.js";import"./_Uint8Array-D5Z9rM2X.js";import"./isSymbol-xTSywenE.js";import"./_arrayMap-DQI2GUNb.js";import"./toString-CBnct2wx.js";import"./toNumber-CTOPJrpu.js";import"./toInteger-Bor4StOs.js";import"./isArrayLikeObject-DKyJYtr8.js";import"./_getTag-CVRrQL_Q.js";import"./_baseIsEqual-CVFfFJm2.js";import"./merge-Dvc5opZF.js";import"./_baseSlice-BWZ0PeaJ.js";import"./upperFirst-CBQfDRod.js";import"./_hasUnicode-3DIK_jNi.js";import"./capitalize-CBqvgOfA.js";import"./_arrayReduce-DV4IVFuG.js";import"./startCase-RfubwhHM.js";import"./_baseProperty-c4IQJQis.js";import"./now-BXqTLlmI.js";import"./debounce-BUM2losY.js";import"./tooltip-BFMRXuzR.js";import"./range-ZclXTdAh.js";import"./client-CtbBEHVn.js";import{d as dt}from"./hotkeys-ClCtr3_I.js";import"./invariant-D5a0EE05.js";import{v as Pt}from"./utils-DEDX0RLo.js";import"./constants-CEISdYm1.js";import"./config-C6qInAhC.js";import"./api-YJHlT7KM.js";import"./globals-Dp5TPAWC.js";import"./ErrorBoundary-_uEOjNWh.js";import"./useEventListener-D1FLsfmf.js";import{t as Ht}from"./jsx-runtime-mwDPpfh_.js";import"./clsx-BlAkgCmw.js";import{t as qt}from"./cn-ZXtYmczU.js";import{t as X}from"./button-ZC2axIBq.js";import"./dist-MHIqsPCF.js";import"./dist-CbvGwhr0.js";import{t as Dt}from"./Output-DWmT-7NV.js";import"./once-C5bmD4W5.js";import"./capabilities-srilPYuF.js";import"./cjs-Ck8KMDI1.js";import"./createReducer-CeLhipaI.js";import{r as Vt}from"./requests-BACZP_uj.js";import"./preload-helper-BnutJmlU.js";import"./dist-8_YHxBVW.js";import"./dist-C14Sk-Bd.js";import"./dist-DJV2CjUA.js";import"./dist-CPUmJw_F.js";import"./dist-DcDuMWp5.js";import"./dist-vBG1bGij.js";import"./stex-xveX5l_T.js";import"./Deferred-NfAvvkGM.js";import"./uuid-D0hUC3Qw.js";import"./key-Cx1qY8eM.js";import"./use-toast-midBZAtS.js";import"./main-ChjX94eX.js";import"./marked.esm-BV7g2d65.js";import"./connection-Bs4SQ_vu.js";import"./dist-Oad1venD.js";import"./useLifecycle-DogGOXPh.js";import{n as Ft}from"./useTheme-Biy2QI0v.js";import{t as ht}from"./createLucideIcon-CNVopWor.js";import{__tla as Gt}from"./layout-sf56kneH.js";import"./add-cell-with-ai-Bf3hYYIu.js";import{t as Ut}from"./between-horizontal-start-CC0exyFi.js";import"./ai-model-dropdown-CvhbTHha.js";import"./type-o43RKOcp.js";import"./table-C2gUjtJV.js";import"./check-CuBLr6Cm.js";import"./select-5fcaZwou.js";import"./download-ByFIcaoi.js";import"./chevron-right-BV0VfNbL.js";import"./maps-B1z3jt-a.js";import"./circle-check-BjYuTjAK.js";import"./toDate-C3oOx2yr.js";import"./dropdown-menu-uN_XMhZm.js";import"./eye-off-_Bp7Ir5E.js";import"./copy-Dy_tLkL8.js";import"./ellipsis-BgenFu2j.js";import"./types-Bh2kSb2q.js";import"./file-video-camera-DJUITpag.js";import{t as Bt,__tla as Jt}from"./cell-editor-4oTwitxm.js";import"./file-text-CFgIi1A4.js";import"./file-Cz8xVTWu.js";import"./image-DW_EcY4T.js";import{t as Kt}from"./spinner-CuquyDWA.js";import"./readonly-python-code-B4MS39iL.js";import"./MarimoErrorOutput-BATnwNYX.js";import{r as Qt}from"./name-cell-input-DND1MD7b.js";import"./plus-CRGccegF.js";import"./save-M3l4CifW.js";import"./input-BNb8K99m.js";import{t as Wt}from"./ConsoleOutput-BJP_UIwR.js";import"./state-JZFfOGr9.js";import"./trash-CRcefzxk.js";import"./badge-Jfhpc30N.js";import"./Combination-BjaZc6gK.js";import"./dist-o-4-WxUj.js";import{t as Y}from"./tooltip-BHnVWzH0.js";import"./menu-items-DwOFR2Zi.js";import"./useNonce-VIoWEX5z.js";import"./en-US-D2gH55FJ.js";import"./isValid-BJSfXqfd.js";import"./mode-Bq6LjPC-.js";import"./alert-dialog-8EwWlboa.js";import"./dialog-BfhgTWm1.js";import"./usePress-BO20vkQb.js";import"./SSRProvider-B8x7qo1c.js";import"./useDateFormatter-CPDTrKqK.js";import"./context-CcLKJeA2.js";import"./useNumberFormatter-F8R3LBxf.js";import"./shim-Cc3VMan6.js";import"./useHotkey-NDxGNWnW.js";import"./numbers-CTSqyVyD.js";import{n as Z}from"./useEvent-CRDKqG3C.js";import"./useDebounce-DzG_89QJ.js";import"./ImperativeModal-C4fZHLKz.js";import"./strings-DHsDEFo-.js";import"./error-banner-DoSAS3iD.js";import"./vega-loader.browser-D2m26-DP.js";import"./precisionRound-Qxa8hC2h.js";import"./defaultLocale-YmL2k7Vp.js";import"./defaultLocale-zQltfbSS.js";import"./copy-LsxoSTiV.js";import"./copy-icon-CE7wmMnS.js";import"./RenderHTML-DTLkV9Uh.js";import"./purify.es-CPMOFAIu.js";import"./useRunCells-BLpH_l8E.js";import"./multi-map-D9JaQ_m6.js";import"./emotion-is-prop-valid.esm-OoyWz_0l.js";import"./extends-dwNt6GDg.js";import"./prop-types-Dr_68tMt.js";import"./objectWithoutPropertiesLoose-COpOcp6W.js";import"./alert-BqjCH_7t.js";import"./useAsyncData-CngUoIwV.js";import"./kbd-DbVT085u.js";import{a as Xt}from"./renderShortcut-DJmsjON-.js";import"./label-Dcu3RhQ4.js";import{t as Yt,__tla as Zt}from"./LazyAnyLanguageCodeMirror-BovGLUi6.js";import"./popover-F0Sfc1dn.js";import"./cell-link-D75IV6D1.js";import"./dist-GE2AwHvG.js";import"./dist-CMHCymvx.js";import"./dist-ta4iJSan.js";import"./dist-BcppZLnk.js";import"./dist-DRTi9ht4.js";import"./dist-BjGT2Oog.js";import"./dist-CXL8T4lt.js";import"./dist-B0B_Xnwd.js";import"./dist-BcgNLefj.js";import"./dist-DM2w8f7r.js";import"./dist-nhBdVy6b.js";import"./dist-D-JTXier.js";import"./apl-BGS-6pM9.js";import"./asciiarmor-CbQH35y7.js";import"./asn1-P7HrFGaM.js";import"./brainfuck-CSxeyQc4.js";import"./cobol-CY4gVoPW.js";import"./clike-Bg9duJDo.js";import"./clojure-B94DOmFw.js";import"./css-CmDcdojQ.js";import"./cmake-DQEKyMNG.js";import"./coffeescript-BwWb96Ts.js";import"./commonlisp-Cq_n1sF6.js";import"./cypher-ByytCYVx.js";import"./python-Bwt6zAaD.js";import"./crystal-BLTq7Sqq.js";import"./d-xLFRg71F.js";import"./diff-VF6GbDch.js";import"./dtd-D8qb8bJW.js";import"./dylan-CIkom9X4.js";import"./ecl-8wcmTiom.js";import"./eiffel-D2ZBcT03.js";import"./elm-Cpg3TnMc.js";import"./erlang-B4A2pXCG.js";import"./simple-mode-BrL6eoj-.js";import"./factor-DhbRkYZ5.js";import"./forth-C5F1F4pC.js";import"./fortran-D7Gl3Tli.js";import"./mllike-ClozcVVR.js";import"./gas-BS2f8qHc.js";import"./gherkin-CVZcskwU.js";import"./groovy-BhQsBMwW.js";import"./haskell-BPbxlKgK.js";import"./haxe-TKSAmiMf.js";import"./idl-DFgQu5Ek.js";import"./javascript-dAA8UGkz.js";import"./jinja2-BIbcpWyF.js";import"./julia-CfdFJG3K.js";import"./livescript-FcXY3DYa.js";import"./lua-Co6rjiMf.js";import"./mirc-DIfBuSAc.js";import"./mathematica-yb42KhnJ.js";import"./modelica-DfSVZeoi.js";import"./mumps-Zs7zFruB.js";import"./mbox-Kdy3h0JS.js";import"./nsis-znELVT3h.js";import"./ntriples-BZ-Gx5MV.js";import"./octave-DbhnFGQl.js";import"./oz-C8cfEyhB.js";import"./pascal-DjQLfZxE.js";import"./perl-BbHwsgL1.js";import"./pig-siFNrhhJ.js";import"./powershell-DtGrdgtc.js";import"./properties-ThqBcpfC.js";import"./protobuf-RiYv9VfD.js";import"./pug-DUVdXXqU.js";import"./puppet-U5CQLRYv.js";import"./q-DIhdXtBp.js";import"./r-CWawXx6U.js";import"./rpm-CNr8ALvx.js";import"./ruby-DskfS84U.js";import"./sas-C2b2tSOH.js";import"./scheme-Cmmcrp64.js";import"./shell-Dyv1aCg9.js";import"./sieve-B_dGzCIS.js";import"./smalltalk-intFzbz6.js";import"./sparql-BX1c9HJU.js";import"./stylus-X6xt1FMB.js";import"./swift-BYNJXGdg.js";import"./verilog-C9TzcLDl.js";import"./tcl-BaybuQuE.js";import"./textile-77KFAyfi.js";import"./toml-D6E8t1IG.js";import"./troff-BfktZMhT.js";import"./ttcn-DOlRqUFL.js";import"./ttcn-cfg-CstA0KVC.js";import"./turtle-Cx-tHjh2.js";import"./webidl-DmZw40AA.js";import"./vb-DerFRxqu.js";import"./vbscript-BPEY3B7J.js";import"./velocity-B-lFP8Gk.js";import"./vhdl-v8a_uH2H.js";import"./xquery-BrIWpdRx.js";import"./yacas-ofPECLUx.js";import"./z80-DrGVKC-O.js";import"./mscgen-BCcB4vmY.js";import"./dist-j2I9I0a7.js";import"./esm-DtCFmQ1n.js";import"./esm-B3nKz9z-.js";import"./links-CMl0qG9J.js";import"./useIframeCapabilities-DXQ78nsN.js";import{__tla as $t}from"./lazy-oPCv0nK8.js";import"./tabs-l9npw3ob.js";import"./command-Dlk4i3l7.js";import"./table-DU76OrPF.js";import"./formats-BN93kMCb.js";import"./blob-ISoY06EG.js";import"./useDeleteCell-CEsjHDdl.js";import"./add-missing-import-Bc1Nj8aC.js";import"./icons-DaFojEUL.js";import{o as Tt}from"./focus-BaSDCTOl.js";import"./useAddCell-CREgcbTt.js";import"./switch-4s4187gV.js";import"./floating-outline-1_-JOoBX.js";import"./dist-CZtlXGHc.js";import"./TinyCode-GLDQZf34.js";import"./useSplitCell-xUizPIKw.js";import"./Inputs-237ZzRAb.js";import"./constants-ClC7lqCE.js";import{__tla as tr}from"./loro_wasm_bg-CfNzVF4q.js";import"./ws-DBqs0vJU.js";import"./useInterval-D5tVoshg.js";import{t as rr}from"./kiosk-mode-Cw6z28XS.js";let ft,or=Promise.all([(()=>{try{return Mt}catch{}})(),(()=>{try{return Gt}catch{}})(),(()=>{try{return Jt}catch{}})(),(()=>{try{return Zt}catch{}})(),(()=>{try{return $t}catch{}})(),(()=>{try{return tr}catch{}})()]).then(async()=>{var ut=ht("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),xt=ht("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),_t=W(nt(),1),$=W(Ot(),1),vt=15;const T=Lt("marimo:scratchpadHistory:v1",[],Rt),gt=ct(!1),jt=ct(null,(t,m,e)=>{if(e=e.trim(),!e)return;let a=t(T);m(T,[e,...a.filter(u=>u!==e)].slice(0,vt))});var r=W(Ht(),1),yt={hide_code:!1,disabled:!1};const bt=()=>{var st;let t=(0,_t.c)(84),m=It(),[e]=Pt(),{theme:a}=Ft(),u=(0,$.useRef)(null),tt=Tt(),{createNewCell:rt,updateCellCode:x}=Et(),{sendRunScratchpad:_}=Vt(),p=m.cellRuntime[f],ot=p==null?void 0:p.output,v=p==null?void 0:p.status,it=p==null?void 0:p.consoleOutputs,i=((st=m.cellData.__scratch__)==null?void 0:st.code)??"",mt=Ct(jt),[o,l]=zt(gt),g=St(T),P;t[0]!==mt||t[1]!==i||t[2]!==_?(P=()=>{_({code:i}),mt(i)},t[0]=mt,t[1]=i,t[2]=_,t[3]=P):P=t[3];let j=Z(P),H;t[4]!==i||t[5]!==rt||t[6]!==tt?(H=()=>{i.trim()&&rt({code:i,before:!1,cellId:tt??"__end__"})},t[4]=i,t[5]=rt,t[6]=tt,t[7]=H):H=t[7];let R=Z(H),q;t[8]!==_||t[9]!==x?(q=()=>{x({cellId:f,code:"",formattingChange:!1}),_({code:""});let d=u.current;d&&d.dispatch({changes:{from:0,to:d.state.doc.length,insert:""}})},t[8]=_,t[9]=x,t[10]=q):q=t[10];let E=Z(q),D;t[11]!==l||t[12]!==x?(D=d=>{l(!1),x({cellId:f,code:d,formattingChange:!1});let h=u.current;h&&h.dispatch({changes:{from:0,to:h.state.doc.length,insert:d}})},t[11]=l,t[12]=x,t[13]=D):D=t[13];let M=Z(D),[et,wt]=(0,$.useState)(),y,b,w,k,s,c,n;if(t[14]!==i||t[15]!==it||t[16]!==E||t[17]!==R||t[18]!==j||t[19]!==M||t[20]!==g||t[21]!==o||t[22]!==et||t[23]!==ot||t[24]!==l||t[25]!==v||t[26]!==a||t[27]!==e){let d=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-auto shrink-0 max-h-[40%]",children:(0,r.jsx)(Bt,{theme:a,showPlaceholder:!1,id:f,code:i,config:yt,status:"idle",serializedEditorState:null,runCell:j,userConfig:e,editorViewRef:u,setEditorView:Q=>{u.current=Q},hidden:!1,showHiddenCode:dt.NOOP,languageAdapter:et,setLanguageAdapter:wt})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto shrink-0",children:(0,r.jsx)(Dt,{allowExpand:!1,output:ot,className:"output-area",cellId:f,stale:!1,loading:!1})}),(0,r.jsx)("div",{className:"overflow-auto shrink-0 max-h-[35%]",children:(0,r.jsx)(Wt,{consoleOutputs:it,className:"overflow-auto",stale:!1,cellName:"_",onSubmitDebugger:dt.NOOP,cellId:f,debuggerActive:!1})})]}),h;t[35]!==M||t[36]!==g||t[37]!==o||t[38]!==a?(h=()=>o?(0,r.jsx)("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:(0,r.jsx)("div",{className:"overflow-auto flex flex-col gap-3",children:g.map((Q,Nt)=>(0,r.jsx)("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>M(Q),children:(0,r.jsx)($.Suspense,{children:(0,r.jsx)(Yt,{language:"python",theme:a,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:Q.trim(),editable:!1,readOnly:!0})})},Nt))})}):null,t[35]=M,t[36]=g,t[37]=o,t[38]=a,t[39]=h):h=t[39];let kt=h;k="flex flex-col h-full overflow-hidden divide-y",t[40]===Symbol.for("react.memo_cache_sentinel")?(s=At.create(f),c=(0,r.jsx)("p",{className:"mx-2 my-2 text-muted-foreground text-sm",children:"Use this scratchpad cell to experiment with code without restrictions on variable names. Scratchpad code is ephemeral: variables defined in the scratchpad aren't saved to notebook memory, and the code is not saved in the notebook file."}),t[40]=s,t[41]=c):(s=t[40],c=t[41]);let F;t[42]===Symbol.for("react.memo_cache_sentinel")?(F=Xt("cell.run"),t[42]=F):F=t[42];let G;t[43]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)(Qt,{color:"var(--grass-11)",size:16}),t[43]=G):G=t[43];let S;t[44]!==j||t[45]!==o?(S=(0,r.jsx)(Y,{content:F,children:(0,r.jsx)(X,{"data-testid":"scratchpad-run-button",onClick:j,disabled:o,variant:"text",size:"xs",children:G})}),t[44]=j,t[45]=o,t[46]=S):S=t[46];let U;t[47]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)(ut,{size:16}),t[47]=U):U=t[47];let C;t[48]!==E||t[49]!==o?(C=(0,r.jsx)(Y,{content:"Clear code and outputs",children:(0,r.jsx)(X,{disabled:o,size:"xs",variant:"text",onClick:E,children:U})}),t[48]=E,t[49]=o,t[50]=C):C=t[50];let B;t[51]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)(Ut,{size:16}),t[51]=B):B=t[51];let z;t[52]!==R||t[53]!==o?(z=(0,r.jsx)(rr,{children:(0,r.jsx)(Y,{content:"Insert code",children:(0,r.jsx)(X,{disabled:o,size:"xs",variant:"text",onClick:R,children:B})})}),t[52]=R,t[53]=o,t[54]=z):z=t[54];let O;t[55]===v?O=t[56]:(O=(v==="running"||v==="queued")&&(0,r.jsx)(Kt,{className:"inline",size:"small"}),t[55]=v,t[56]=O);let J;t[57]===Symbol.for("react.memo_cache_sentinel")?(J=(0,r.jsx)("div",{className:"flex-1"}),t[57]=J):J=t[57];let pt=o&&"bg-(--sky-3) rounded-none",A;t[58]===pt?A=t[59]:(A=qt(pt),t[58]=pt,t[59]=A);let I;t[60]!==o||t[61]!==l?(I=()=>l(!o),t[60]=o,t[61]=l,t[62]=I):I=t[62];let at=g.length===0,K;t[63]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)(xt,{size:16}),t[63]=K):K=t[63];let L;t[64]!==A||t[65]!==I||t[66]!==at?(L=(0,r.jsx)(Y,{content:"Toggle history",children:(0,r.jsx)(X,{size:"xs",variant:"text",className:A,onClick:I,disabled:at,children:K})}),t[64]=A,t[65]=I,t[66]=at,t[67]=L):L=t[67],t[68]!==S||t[69]!==C||t[70]!==z||t[71]!==O||t[72]!==L?(n=(0,r.jsxs)("div",{className:"flex items-center shrink-0",children:[S,C,z,O,J,L]}),t[68]=S,t[69]=C,t[70]=z,t[71]=O,t[72]=L,t[73]=n):n=t[73],b="flex-1 divide-y relative overflow-hidden flex flex-col",w=d(),y=kt(),t[14]=i,t[15]=it,t[16]=E,t[17]=R,t[18]=j,t[19]=M,t[20]=g,t[21]=o,t[22]=et,t[23]=ot,t[24]=l,t[25]=v,t[26]=a,t[27]=e,t[28]=y,t[29]=b,t[30]=w,t[31]=k,t[32]=s,t[33]=c,t[34]=n}else y=t[28],b=t[29],w=t[30],k=t[31],s=t[32],c=t[33],n=t[34];let N;t[74]!==y||t[75]!==b||t[76]!==w?(N=(0,r.jsxs)("div",{className:b,children:[w,y]}),t[74]=y,t[75]=b,t[76]=w,t[77]=N):N=t[77];let V;return t[78]!==N||t[79]!==k||t[80]!==s||t[81]!==c||t[82]!==n?(V=(0,r.jsxs)("div",{className:k,id:s,children:[c,n,N]}),t[78]=N,t[79]=k,t[80]=s,t[81]=c,t[82]=n,t[83]=V):V=t[83],V};let lt;lt=W(nt(),1),ft=()=>{let t=(0,lt.c)(1),m;return t[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(bt,{}),t[0]=m):m=t[0],m}});export{or as __tla,ft as default};
