import{javascript as s}from"./javascript-D48wDJXV.js";var o={"{":"}","(":")","[":"]"};function h(n){if(typeof n!="object")return n;let e={};for(let r in n){let t=n[r];e[r]=t instanceof Array?t.slice():t}return e}class u{constructor(e){this.indentUnit=e,this.javaScriptLine=!1,this.javaScriptLineExcludesColon=!1,this.javaScriptArguments=!1,this.javaScriptArgumentsDepth=0,this.isInterpolating=!1,this.interpolationNesting=0,this.jsState=s.startState(e),this.restOfLine="",this.isIncludeFiltered=!1,this.isEach=!1,this.lastTag="",this.isAttrs=!1,this.attrsNest=[],this.inAttributeName=!0,this.attributeIsType=!1,this.attrValue="",this.indentOf=1/0,this.indentToken=""}copy(){var e=new u(this.indentUnit);return e.javaScriptLine=this.javaScriptLine,e.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon,e.javaScriptArguments=this.javaScriptArguments,e.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth,e.isInterpolating=this.isInterpolating,e.interpolationNesting=this.interpolationNesting,e.jsState=(s.copyState||h)(this.jsState),e.restOfLine=this.restOfLine,e.isIncludeFiltered=this.isIncludeFiltered,e.isEach=this.isEach,e.lastTag=this.lastTag,e.isAttrs=this.isAttrs,e.attrsNest=this.attrsNest.slice(),e.inAttributeName=this.inAttributeName,e.attributeIsType=this.attributeIsType,e.attrValue=this.attrValue,e.indentOf=this.indentOf,e.indentToken=this.indentToken,e}}function f(n,e){if(n.match("#{"))return e.isInterpolating=!0,e.interpolationNesting=0,"punctuation"}function p(n,e){if(n.match(/^:([\w\-]+)/))return c(n,e),"atom"}function l(n,e){if(e.isAttrs){if(o[n.peek()]&&e.attrsNest.push(o[n.peek()]),e.attrsNest[e.attrsNest.length-1]===n.peek())e.attrsNest.pop();else if(n.eat(")"))return e.isAttrs=!1,"punctuation";if(e.inAttributeName&&n.match(/^[^=,\)!]+/))return n.peek()!=="="&&n.peek()!=="!"||(e.inAttributeName=!1,e.jsState=s.startState(2),e.lastTag==="script"&&n.current().trim().toLowerCase()==="type"?e.attributeIsType=!0:e.attributeIsType=!1),"attribute";var r=s.token(n,e.jsState);if(e.attrsNest.length===0&&(r==="string"||r==="variable"||r==="keyword"))try{return Function("","var x "+e.attrValue.replace(/,\s*$/,"").replace(/^!/,"")),e.inAttributeName=!0,e.attrValue="",n.backUp(n.current().length),l(n,e)}catch{}return e.attrValue+=n.current(),r||!0}}function c(n,e){e.indentOf=n.indentation(),e.indentToken="string"}const m={startState:function(n){return new u(n)},copyState:function(n){return n.copy()},token:function(n,e){var r=function(t,i){if(t.sol()&&(i.restOfLine=""),i.restOfLine){t.skipToEnd();var a=i.restOfLine;return i.restOfLine="",a}}(n,e)||function(t,i){if(i.isInterpolating){if(t.peek()==="}"){if(i.interpolationNesting--,i.interpolationNesting<0)return t.next(),i.isInterpolating=!1,"punctuation"}else t.peek()==="{"&&i.interpolationNesting++;return s.token(t,i.jsState)||!0}}(n,e)||function(t,i){if(i.isIncludeFiltered){var a=p(t,i);return i.isIncludeFiltered=!1,i.restOfLine="string",a}}(n,e)||function(t,i){if(i.isEach){if(t.match(/^ in\b/))return i.javaScriptLine=!0,i.isEach=!1,"keyword";if(t.sol()||t.eol())i.isEach=!1;else if(t.next()){for(;!t.match(/^ in\b/,!1)&&t.next(););return"variable"}}}(n,e)||l(n,e)||function(t,i){if(t.sol()&&(i.javaScriptLine=!1,i.javaScriptLineExcludesColon=!1),i.javaScriptLine){if(i.javaScriptLineExcludesColon&&t.peek()===":")return i.javaScriptLine=!1,void(i.javaScriptLineExcludesColon=!1);var a=s.token(t,i.jsState);return t.eol()&&(i.javaScriptLine=!1),a||!0}}(n,e)||function(t,i){if(i.javaScriptArguments)return i.javaScriptArgumentsDepth===0&&t.peek()!=="("?void(i.javaScriptArguments=!1):(t.peek()==="("?i.javaScriptArgumentsDepth++:t.peek()===")"&&i.javaScriptArgumentsDepth--,i.javaScriptArgumentsDepth===0?void(i.javaScriptArguments=!1):s.token(t,i.jsState)||!0)}(n,e)||function(t,i){if(i.mixinCallAfter)return i.mixinCallAfter=!1,t.match(/^\( *[-\w]+ *=/,!1)||(i.javaScriptArguments=!0,i.javaScriptArgumentsDepth=0),!0}(n,e)||function(t){if(t.match(/^yield\b/))return"keyword"}(n)||function(t){if(t.match(/^(?:doctype) *([^\n]+)?/))return"meta"}(n)||f(n,e)||function(t,i){if(t.match(/^case\b/))return i.javaScriptLine=!0,"keyword"}(n,e)||function(t,i){if(t.match(/^when\b/))return i.javaScriptLine=!0,i.javaScriptLineExcludesColon=!0,"keyword"}(n,e)||function(t){if(t.match(/^default\b/))return"keyword"}(n)||function(t,i){if(t.match(/^extends?\b/))return i.restOfLine="string","keyword"}(n,e)||function(t,i){if(t.match(/^append\b/))return i.restOfLine="variable","keyword"}(n,e)||function(t,i){if(t.match(/^prepend\b/))return i.restOfLine="variable","keyword"}(n,e)||function(t,i){if(t.match(/^block\b *(?:(prepend|append)\b)?/))return i.restOfLine="variable","keyword"}(n,e)||function(t,i){if(t.match(/^include\b/))return i.restOfLine="string","keyword"}(n,e)||function(t,i){if(t.match(/^include:([a-zA-Z0-9\-]+)/,!1)&&t.match("include"))return i.isIncludeFiltered=!0,"keyword"}(n,e)||function(t,i){if(t.match(/^mixin\b/))return i.javaScriptLine=!0,"keyword"}(n,e)||function(t,i){return t.match(/^\+([-\w]+)/)?(t.match(/^\( *[-\w]+ *=/,!1)||(i.javaScriptArguments=!0,i.javaScriptArgumentsDepth=0),"variable"):t.match("+#{",!1)?(t.next(),i.mixinCallAfter=!0,f(t,i)):void 0}(n,e)||function(t,i){if(t.match(/^(if|unless|else if|else)\b/))return i.javaScriptLine=!0,"keyword"}(n,e)||function(t,i){if(t.match(/^(- *)?(each|for)\b/))return i.isEach=!0,"keyword"}(n,e)||function(t,i){if(t.match(/^while\b/))return i.javaScriptLine=!0,"keyword"}(n,e)||function(t,i){var a;if(a=t.match(/^(\w(?:[-:\w]*\w)?)\/?/))return i.lastTag=a[1].toLowerCase(),"tag"}(n,e)||p(n,e)||function(t,i){if(t.match(/^(!?=|-)/))return i.javaScriptLine=!0,"punctuation"}(n,e)||function(t){if(t.match(/^#([\w-]+)/))return"builtin"}(n)||function(t){if(t.match(/^\.([\w-]+)/))return"className"}(n)||function(t,i){if(t.peek()=="(")return t.next(),i.isAttrs=!0,i.attrsNest=[],i.inAttributeName=!0,i.attrValue="",i.attributeIsType=!1,"punctuation"}(n,e)||function(t,i){if(t.match(/^&attributes\b/))return i.javaScriptArguments=!0,i.javaScriptArgumentsDepth=0,"keyword"}(n,e)||function(t){if(t.sol()&&t.eatSpace())return"indent"}(n)||function(t,i){return t.match(/^(?:\| ?| )([^\n]+)/)?"string":t.match(/^(<[^\n]*)/,!1)?(c(t,i),t.skipToEnd(),i.indentToken):void 0}(n,e)||function(t,i){if(t.match(/^ *\/\/(-)?([^\n]*)/))return i.indentOf=t.indentation(),i.indentToken="comment","comment"}(n,e)||function(t){if(t.match(/^: */))return"colon"}(n)||function(t,i){if(t.eat("."))return c(t,i),"dot"}(n,e)||function(t){return t.next(),null}(n);return r===!0?null:r}};export{m as pug};
