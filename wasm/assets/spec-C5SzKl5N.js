import{i as R}from"./useLifecycle-DogGOXPh.js";import{t as p}from"./createLucideIcon-CNVopWor.js";import{r as z}from"./type-o43RKOcp.js";import{t as Y}from"./chart-no-axes-column-DYZiSI6e.js";import{r as Z,t as ee}from"./table-C2gUjtJV.js";import{t as ne}from"./square-function-sjebOKTF.js";var ae=p("align-center-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"M8 10H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h4",key:"14d6g8"}],["path",{d:"M16 10h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-4",key:"1e2lrw"}],["path",{d:"M8 20H7a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h1",key:"1fkdwx"}],["path",{d:"M16 14h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1",key:"1euafb"}]]),te=p("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]),re=p("arrow-up-to-line",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]),ie=p("baseline",[["path",{d:"M4 20h16",key:"14thso"}],["path",{d:"m6 16 6-12 6 12",key:"1b4byz"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),le=p("chart-area",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]),P=p("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),oe=p("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),se=p("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),ce=p("chart-scatter",[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]]),ue=p("ruler-dimension-line",[["path",{d:"M12 15v-3.014",key:"aw6ppf"}],["path",{d:"M16 15v-3.014",key:"9e0vc7"}],["path",{d:"M20 6H4",key:"1lfz86"}],["path",{d:"M20 8V4",key:"1l2g47"}],["path",{d:"M4 8V4",key:"sppxzt"}],["path",{d:"M8 15v-3.014",key:"when08"}],["rect",{x:"3",y:"12",width:"18",height:"7",rx:"1",key:"1ucwdz"}]]),de=p("sigma",[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]]);function v(e){return e&&e.replaceAll(".","\\.").replaceAll("[","\\[").replaceAll("]","\\]").replaceAll(":","\\:")}const fe="__count__",j="default",ye="yearmonthdate",me=6,ge="",pe={line:oe,bar:se,pie:Z,scatter:ce,heatmap:ee,area:le},U="mean",he={none:ne,count:z,sum:de,mean:ie,median:ae,min:te,max:re,distinct:z,valid:z,stdev:Y,stdevp:Y,variance:P,variancep:P,bin:ue},be={none:"No aggregation",count:"Count of records",sum:"Sum of values",mean:"Mean of values",median:"Median of values",min:"Minimum value",max:"Maximum value",distinct:"Count of distinct records",valid:"Count non-null records",stdev:"Standard deviation",stdevp:"Standard deviation of population",variance:"Variance",variancep:"Variance of population",bin:"Group values into bins"},ke=[j,"accent","category10","category20","category20b","category20c","dark2","paired","pastel1","pastel2","set1","set2","set3","tableau10","tableau20","blues","greens","greys","oranges","purples","reds","bluegreen","bluepurple","goldgreen","goldorange","goldred","greenblue","orangered","purplebluegreen","purplered","redpurple","yellowgreenblue","yelloworangered","blueorange","brownbluegreen","purplegreen","pinkyellowgreen","purpleorange","redblue","redgrey","redyellowblue","redyellowgreen","spectral","rainbow","sinebow"],ve={number:"Continuous numerical scale",string:"Discrete categorical scale (inputs treated as strings)",temporal:"Continuous temporal scale"},xe={year:["Year","2025"],quarter:["Quarter","Q1 2025"],month:["Month","Jan 2025"],week:["Week","Jan 01, 2025"],day:["Day","Jan 01, 2025"],hours:["Hour","Jan 01, 2025 12:00"],minutes:["Minute","Jan 01, 2025 12:34"],seconds:["Second","Jan 01, 2025 12:34:56"],milliseconds:["Millisecond","Jan 01, 2025 12:34:56.789"],date:["Date","Jan 01, 2025"],dayofyear:["Day of Year","Day 1 of 2025"],yearmonth:["Year Month","Jan 2025"],yearmonthdate:["Year Month Date","Jan 01, 2025"],monthdate:["Month Date","Jan 01"]},we=["number","string","temporal"],O=["year","quarter","month","date","week","day","dayofyear","hours","minutes","seconds","milliseconds"],X=["yearmonth","yearmonthdate","monthdate"],L=[...O,...X];[...L];const Me=["ascending","descending"],V="none",Ce="bin",Ae=[V,"bin","count","sum","mean","median","min","max","distinct","valid","stdev","stdevp","variance","variancep"],N=[V,"count","distinct","valid"],m={LINE:"line",BAR:"bar",PIE:"pie",SCATTER:"scatter",HEATMAP:"heatmap",AREA:"area"},Ee=Object.values(m),Te=["X","Y","Color",V];function q(e){switch(e){case"number":case"integer":return"quantitative";case"string":case"boolean":case"unknown":return"nominal";case"date":case"datetime":case"time":case"temporal":return"temporal";default:return R(e),"nominal"}}function _e(e){switch(e){case"number":case"integer":return"number";case"string":case"boolean":case"unknown":return"string";case"date":case"datetime":case"time":return"temporal";default:return R(e),"string"}}function Q(e){switch(e){case m.PIE:return"arc";case m.SCATTER:return"point";case m.HEATMAP:return"rect";default:return e}}function H(e,n,a,i){if(e===m.HEATMAP)return a!=null&&a.maxbins?{maxbins:a==null?void 0:a.maxbins}:void 0;if(n!=="number")return;if(!(a!=null&&a.binned))return i;let t={};return a.step!==void 0&&(t.step=a.step),a.maxbins!==void 0&&(t.maxbins=a.maxbins),Object.keys(t).length===0?!0:t}function G(e){var i,t;let n=(i=e.color)==null?void 0:i.range;if(n!=null&&n.length)return{range:n};let a=(t=e.color)==null?void 0:t.scheme;if(a&&a!=="default")return{scheme:a}}function De(e,n){var o,c,u,f,h,s,g,k,b;if(e===m.PIE)return;let a;if(y((c=(o=n.general)==null?void 0:o.colorByColumn)==null?void 0:c.field))a=(u=n.general)==null?void 0:u.colorByColumn;else if(y((f=n.color)==null?void 0:f.field))switch((h=n.color)==null?void 0:h.field){case"X":a=(s=n.general)==null?void 0:s.xColumn;break;case"Y":a=(g=n.general)==null?void 0:g.yColumn;break;case"Color":a=(k=n.general)==null?void 0:k.colorByColumn;break;default:return}else return;if(!a||!y(a.field)||a.field==="none")return;if(a.field==="__count__")return{aggregate:"count",type:"quantitative"};let i=(b=n.color)==null?void 0:b.bin,t=a.selectedDataType||"string",r=a==null?void 0:a.aggregate;return{field:v(a.field),type:q(t),scale:G(n),aggregate:W(r,t),bin:H(e,t,i)}}function Be(e,n){var a,i,t,r,o;if(!((a=n.general)!=null&&a.stacking||!y((t=(i=n.general)==null?void 0:i.colorByColumn)==null?void 0:t.field)||e!==m.BAR))return{field:v((o=(r=n.general)==null?void 0:r.colorByColumn)==null?void 0:o.field)}}function W(e,n,a){if(n!=="temporal"&&!(e==="none"||e==="bin"))return e?n==="string"?N.includes(e)?e:void 0:e:a||void 0}function Ve(e){switch(e){case"integer":return",.0f";case"number":return",.2f";default:return}}function $(e){var u,f,h,s,g,k,b,w,M,C,_,D,B,A,E,T;let{formValues:n,xEncoding:a,yEncoding:i,colorByEncoding:t}=e;if(!n.tooltips)return;function r(l,x,d){if("aggregate"in l&&l.aggregate==="count"&&!y(l.field))return{aggregate:"count"};if(l&&"field"in l&&y(l.field))return l.timeUnit&&!d&&(d=l.field),{field:l.field,aggregate:l.aggregate,timeUnit:l.timeUnit,format:Ve(x),title:d,bin:l.bin}}if(n.tooltips.auto){let l=[],x=r(a,((f=(u=n.general)==null?void 0:u.xColumn)==null?void 0:f.type)||"string",(h=n.xAxis)==null?void 0:h.label);x&&l.push(x);let d=r(i,((g=(s=n.general)==null?void 0:s.yColumn)==null?void 0:g.type)||"string",(k=n.yAxis)==null?void 0:k.label);d&&l.push(d);let I=r(t||{},((w=(b=n.general)==null?void 0:b.colorByColumn)==null?void 0:w.type)||"string");return I&&l.push(I),l}let o=n.tooltips.fields??[],c=[];for(let l of o){if("field"in a&&y(a.field)&&a.field===l.field){let d=r(a,((C=(M=n.general)==null?void 0:M.xColumn)==null?void 0:C.type)||"string",(_=n.xAxis)==null?void 0:_.label);d&&c.push(d);continue}if("field"in i&&y(i.field)&&i.field===l.field){let d=r(i,((B=(D=n.general)==null?void 0:D.yColumn)==null?void 0:B.type)||"string",(A=n.yAxis)==null?void 0:A.label);d&&c.push(d);continue}if(t&&"field"in t&&y(t.field)&&t.field===l.field){let d=r(t,((T=(E=n.general)==null?void 0:E.colorByColumn)==null?void 0:T.type)||"string");d&&c.push(d);continue}let x={field:v(l.field)};c.push(x)}return c}function qe(e,n,a,i,t){var A,E,T,l;let{xColumn:r,yColumn:o,colorByColumn:c,horizontal:u,stacking:f,title:h,facet:s}=n.general??{};if(e===m.PIE)return Je(n,a,i,t);if(!y(r==null?void 0:r.field))return"X-axis column is required";if(!y(o==null?void 0:o.field))return"Y-axis column is required";let g=S(r,(A=n.xAxis)==null?void 0:A.bin,J((E=n.xAxis)==null?void 0:E.label),c!=null&&c.field&&u?f:void 0,e),k=U;(o==null?void 0:o.selectedDataType)==="string"&&(k="count");let b=S(o,(T=n.yAxis)==null?void 0:T.bin,J((l=n.yAxis)==null?void 0:l.label),c!=null&&c.field&&!u?f:void 0,e,k),w=s!=null&&s.row.field?F(s.row,e):void 0,M=s!=null&&s.column.field?F(s.column,e):void 0,C=De(e,n),_=K(e,n,a,i,t,h),D={x:u?b:g,y:u?g:b,xOffset:Be(e,n),color:C,tooltip:$({formValues:n,xEncoding:g,yEncoding:b,colorByEncoding:C}),...w&&{row:w},...M&&{column:M}},B=Se(s==null?void 0:s.column,s==null?void 0:s.row);return{..._,mark:{type:Q(e)},encoding:D,...B}}function He(e,n){return{...e,data:{values:n}}}function S(e,n,a,i,t,r){let o=e.selectedDataType||"string";return e.field==="__count__"?{aggregate:"count",type:"quantitative",bin:H(t,o,n),title:a==="__count__"?void 0:a,stack:i}:{field:v(e.field),type:q(e.selectedDataType||"unknown"),bin:H(t,o,n),title:a,stack:i,aggregate:W(e.aggregate,o,r),sort:e.sort,timeUnit:ze(e)}}function F(e,n){let a=H(n,e.selectedDataType||"string",{maxbins:e.maxbins,binned:e.binned},{maxbins:6});return{field:v(e.field),sort:e.sort,timeUnit:Pe(e),type:q(e.selectedDataType||"unknown"),bin:a}}function Je(e,n,a,i){var f,h,s,g;let{yColumn:t,colorByColumn:r,title:o}=e.general??{};if(!y(r==null?void 0:r.field))return"Color by column is required";if(!y(t==null?void 0:t.field))return"Size by column is required";let c=S(t,(f=e.xAxis)==null?void 0:f.bin,J((h=e.xAxis)==null?void 0:h.label),void 0,m.PIE),u={field:v(r.field),type:q(r.selectedDataType||"unknown"),scale:G(e),title:J((s=e.yAxis)==null?void 0:s.label)};return{...K(m.PIE,e,n,a,i,o),mark:{type:Q(m.PIE),innerRadius:(g=e.style)==null?void 0:g.innerRadius},encoding:{theta:c,color:u,tooltip:$({formValues:e,xEncoding:c,yEncoding:c,colorByEncoding:u})}}}function K(e,n,a,i,t,r){var c,u,f;let o=((c=n.style)==null?void 0:c.gridLines)??!1;return e===m.SCATTER&&(o=!0),{$schema:"https://vega.github.io/schema/vega-lite/v6.json",background:a==="dark"?"dark":"white",title:r,data:{values:[]},height:((u=n.yAxis)==null?void 0:u.height)??t,width:((f=n.xAxis)==null?void 0:f.width)??i,config:{axis:{grid:o}}}}function y(e){return e!==void 0&&e.trim()!==""}function J(e){let n=e==null?void 0:e.trim();return n===""?void 0:n}function ze(e){if(e.selectedDataType==="temporal")return e.timeUnit??"yearmonthdate"}function Pe(e){if(e.selectedDataType==="temporal")return e.timeUnit??"yearmonthdate"}function Se(e,n){let a={};return(e==null?void 0:e.linkXAxis)===!1&&(a.x="independent"),(n==null?void 0:n.linkYAxis)===!1&&(a.y="independent"),Object.keys(a).length>0?{resolve:{axis:a}}:void 0}export{P as A,j as C,ve as D,ge as E,xe as O,U as S,ye as T,be as _,Ae as a,ke as b,Te as c,V as d,we as f,L as g,N as h,_e as i,v as k,X as l,Me as m,qe as n,Ce as o,O as p,y as r,Ee as s,He as t,m as u,he as v,me as w,fe as x,pe as y};
