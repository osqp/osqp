const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C6CvZyWd.js","./VegaLite-Bo_A9ZZm.js","./index-D4bXoNM3.js","./index-CrH6PPjG.css","./compile-CQlZ79Z5.js","./time-1P0zCPa4.js","./timer-BwIYMJWC.js","./linear-BsI0Wmp7.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./step-BwsUM5iJ.js","./arc-ZB5pDULS.js","./index-BEQfoZiP.js","./index-DZJOZ8C0.js"])))=>i.map(i=>d[i]);
import{c as K,a as N,V as O,al as Q,am as W,U as k,j as s,b as X,an as Z,ao as tt,ap as U,aq as et,ar as rt,as as st,at as A,au as it,av as ot,aw as at,ax as lt,__tla as nt}from"./index-D4bXoNM3.js";import{c as mt}from"./compile-CQlZ79Z5.js";import{r as pt,b as ct,__tla as dt}from"./storage-DrvlAZZd.js";import{P as ut,C as ht,f as Y,E as xt,a as gt,__tla as ft}from"./edit-page-DhSV7e13.js";import{A as vt}from"./links-D_cg4TpC.js";import{C as jt}from"./circle-play-BURxVoHD.js";import"./time-1P0zCPa4.js";import"./timer-BwIYMJWC.js";import"./linear-BsI0Wmp7.js";import"./init-DLRA0X12.js";import"./range-CtcPcB_L.js";import"./zoom-COrs4lFh.js";import"./ordinal-DDUp3AbE.js";import"./colors-bszWmPJw.js";import"./step-BwsUM5iJ.js";import"./arc-ZB5pDULS.js";import"./index-BEQfoZiP.js";import"./index-CvLIL6JV.js";import"./index-B9dXZoY1.js";import"./index-BvRQ66y_.js";import"./index-3z3sI3MY.js";import"./index-CbNkOFUU.js";import"./index-6WfEFtf2.js";import"./index-QoqjKBP_.js";import"./index-nyTtvXGx.js";import"./index-D-8oCPO1.js";import"./index-CAtmZMbK.js";import"./index-BCdqiRjH.js";import"./index-CqRTe3S2.js";import"./index-DMtmziVF.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asterisk-B46aRdXb.js";import"./brainfuck-CtZaYBKt.js";import"./clike-BgBwzOhw.js";import"./cmake-DXn5xaP-.js";import"./cobol-stawOqaz.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./crystal-CRzZ78HM.js";import"./cypher-gJDei3ni.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dockerfile-knGOOxt4.js";import"./simple-mode-C3vEBAcb.js";import"./dtd-DI9Herc-.js";import"./dylan-DkEP81N9.js";import"./ebnf-B-Df8AvO.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-DompmV0j.js";import"./erlang-BuqgqA5h.js";import"./factor-CFXhaUWb.js";import"./fcl-CVaBTCzQ.js";import"./forth-POgR1ypr.js";import"./fortran-DL7KluxX.js";import"./gas-bV0CklSb.js";import"./gherkin-B6X1vGSW.js";import"./groovy-DnIzCrpZ.js";import"./haskell-CLQs6EAM.js";import"./haxe-D25e-2l-.js";import"./http-BKJkqRj4.js";import"./idl-pcmmZuaN.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-HO6ttBFx.js";import"./lua-8DXOpKDz.js";import"./mathematica-IIbmv7SK.js";import"./mbox-z_N2Mo3d.js";import"./mirc-DkvFAiy5.js";import"./modelica-DSrSSXCg.js";import"./mscgen-B2igx18G.js";import"./mumps-zvxmGV4l.js";import"./nginx-B4hAVlXN.js";import"./nsis-BvKfQ9lQ.js";import"./ntriples-BSwWqoLa.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CafrKXZF.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./solr-78MBEUkU.js";import"./sparql-BRLJFz69.js";import"./spreadsheet-CGlWr0eM.js";import"./stylus-Bdo_Aemu.js";import"./swift-B_XXVlXX.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./tiddlywiki-BgR6AEZu.js";import"./tiki-CI-ztowC.js";import"./toml-wcPdHu67.js";import"./troff-Ce85hlLp.js";import"./ttcn-BxnYHtq8.js";import"./turtle-BkSuIpt-.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./verilog-B4LBqg_1.js";import"./vhdl-CWWH2SUo.js";import"./webidl-CGwyPRYs.js";import"./xquery-CVDBqZPY.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";import"./trash-D5wptdZI.js";import"./_createAggregator--z161kAx.js";import"./_baseEach-CIMlsWNn.js";import{__tla as yt}from"./loro_wasm_bg-C3hKWL9L.js";import"./transform-B8bpuzxV.js";import"./sortBy-utaS96Bi.js";import"./_baseMap-1GEe_WcR.js";import"./index-DZJOZ8C0.js";let G,w,It=Promise.all([(()=>{try{return nt}catch{}})(),(()=>{try{return dt}catch{}})(),(()=>{try{return ft}catch{}})(),(()=>{try{return yt}catch{}})()]).then(async()=>{const J=K("circle-ellipsis",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]),M="hoveredCellId",P="cellHover",C="cell",R="startTimestamp",L="endTimestamp",z="status";let E,B,$,q,H,V,D,F;E=Q(new Map),G=()=>{const e=N.c(28),{runIds:t,runMap:r}=O(pt),l=O(E),{clearRuns:o}=ct(),{theme:a}=W(),[i,u]=k.useState("above");let m;e[0]!==i?(m=()=>{u(i==="above"?"sideBySide":"above")},e[0]=i,e[1]=m):m=e[1];const x=m;if(t.length===0){let h;return e[2]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(ut,{title:"No traces",description:s.jsx("span",{children:"Cells that have ran will appear here."}),icon:s.jsx(vt,{})}),e[2]=h):h=e[2],h}let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("label",{htmlFor:"chartPosition",className:"text-xs",children:"Inline chart"}),e[3]=d):d=e[3];const p=i==="sideBySide";let g,c,y,f,v,I;if(e[4]!==p||e[5]!==x?(g=s.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d,s.jsx("input",{type:"checkbox",name:"chartPosition","data-testid":"chartPosition",onClick:x,defaultChecked:p,className:"h-3 cursor-pointer"})]}),e[4]=p,e[5]=x,e[6]=g):g=e[6],e[7]!==o?(c=s.jsx(ht,{dataTestId:"clear-traces-button",onClick:o}),e[7]=o,e[8]=c):c=e[8],e[9]!==g||e[10]!==c?(y=s.jsxs("div",{className:"flex flex-row justify-end gap-3",children:[g,c]}),e[9]=g,e[10]=c,e[11]=y):y=e[11],e[12]!==i||e[13]!==l||e[14]!==t||e[15]!==r||e[16]!==a){let h;e[18]!==i||e[19]!==l||e[20]!==r||e[21]!==a?(h=(_,n)=>{const j=r.get(_);if(j)return s.jsx(q,{run:j,isExpanded:l.get(j.runId),isMostRecentRun:n===0,chartPosition:i,theme:a},j.runId)},e[18]=i,e[19]=l,e[20]=r,e[21]=a,e[22]=h):h=e[22],f=t.map(h),e[12]=i,e[13]=l,e[14]=t,e[15]=r,e[16]=a,e[17]=f}else f=e[17];return e[23]!==f?(v=s.jsx("div",{className:"flex flex-col gap-3",children:f}),e[23]=f,e[24]=v):v=e[24],e[25]!==y||e[26]!==v?(I=s.jsxs("div",{className:"py-1 px-2 overflow-y-scroll",children:[y,v]}),e[25]=y,e[26]=v,e[27]=I):I=e[27],I},B=X.lazy(()=>Z(()=>import("./index-C6CvZyWd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url).then(e=>({default:e.Vega}))),$=e=>{const t=N.c(10),{ref:r,width:l}=lt(),o=l===void 0?300:l,a=e.theme==="dark"?"dark":void 0,i=o-50;let u,m;return t[0]!==e.height||t[1]!==e.signalListeners||t[2]!==e.vegaSpec||t[3]!==a||t[4]!==i?(u=s.jsx(k.Suspense,{children:s.jsx(B,{spec:e.vegaSpec,theme:a,width:i,height:e.height,signalListeners:e.signalListeners,actions:!1})}),t[0]=e.height,t[1]=e.signalListeners,t[2]=e.vegaSpec,t[3]=a,t[4]=i,t[5]=u):u=t[5],t[6]!==e.className||t[7]!==r||t[8]!==u?(m=s.jsx("div",{className:e.className,ref:r,children:u}),t[6]=e.className,t[7]=r,t[8]=u,t[9]=m):m=t[9],m},q=({run:e,isMostRecentRun:t,chartPosition:r,isExpanded:l,theme:o})=>{const a=tt(E),i=(l=l??t)?it:ot,u=s.jsx(i,{height:16,className:"inline"}),m=s.jsxs("span",{className:"text-sm cursor-pointer",onClick:()=>{a(x=>{const d=new Map(x);return d.set(e.runId,!l),d})},children:["Run - ",U(e.runStartTime),u]});return l?s.jsx(H,{run:e,chartPosition:r,theme:o,title:m},e.runId):s.jsx("div",{className:"flex flex-col",children:s.jsx("pre",{className:"font-mono font-semibold",children:m})},e.runId)},H=e=>{const t=N.c(32),{run:r,chartPosition:l,theme:o,title:a}=e,[i,u]=k.useState();let m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m={[P]:(_,n)=>{var b;const j=n,S=(b=j.cell)==null?void 0:b[0];u(S??null)}},t[0]=m):m=t[0];const x=m,d=et();let p,g;if(t[1]!==d||t[2]!==l||t[3]!==r.cellRuns||t[4]!==r.runId||t[5]!==o){const _=[...r.cellRuns.values()].map(n=>{const j=n.elapsedTime??0;return{cell:n.cellId,cellNum:d.inOrderIds.indexOf(n.cellId),startTimestamp:w(n.startTime),endTimestamp:w(n.startTime+j),elapsedTime:Y(1e3*j),status:n.status}});p=`hiddenInputElement-${r.runId}`,g=mt(function(n,j,S,b){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:b==="dark"?"black":void 0,mark:{type:"bar",cornerRadius:2},params:[{name:M,bind:{element:`#${j}`}},{name:P,select:{type:"point",on:"mouseover",fields:[C],clear:"mouseout"}}],height:{step:S==="sideBySide"?26:21},encoding:{y:{field:"cellNum",scale:{paddingInner:.2},sort:{field:"sortPriority"},title:"cell",axis:S==="sideBySide"?null:void 0},x:{field:R,type:"temporal",axis:{orient:"top",title:null}},x2:{field:L,type:"temporal"},tooltip:[{field:R,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"Start"},{field:L,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"End"}],size:{value:{expr:`${M} == toString(datum.${C}) ? 19.5 : 18`}},color:{field:z,scale:{domain:["success","error"],range:["#37BE5F","red"]},legend:null}},data:{values:n},transform:[{calculate:`datum.${z} === 'queued' ? 9999999999999 : datum.${R}`,as:"sortPriority"}],config:{view:{stroke:"transparent"}}}}(_,p,l,o)),t[1]=d,t[2]=l,t[3]=r.cellRuns,t[4]=r.runId,t[5]=o,t[6]=p,t[7]=g}else p=t[6],g=t[7];const c=g.spec;let y;t[8]!==p||t[9]!==i||t[10]!==r?(y=s.jsx(V,{run:r,hoveredCellId:i,hiddenInputElementId:p}),t[8]=p,t[9]=i,t[10]=r,t[11]=y):y=t[11];const f=y;if(l==="above"){let _,n,j;return t[12]!==o||t[13]!==c?(_=s.jsx($,{vegaSpec:c,height:120,signalListeners:x,theme:o}),t[12]=o,t[13]=c,t[14]=_):_=t[14],t[15]!==_||t[16]!==a||t[17]!==f?(n=s.jsxs("pre",{className:"font-mono font-semibold",children:[a,_,f]}),t[15]=_,t[16]=a,t[17]=f,t[18]=n):n=t[18],t[19]!==r.runId||t[20]!==n?(j=s.jsx("div",{className:"flex flex-col",children:n},r.runId),t[19]=r.runId,t[20]=n,t[21]=j):j=t[21],j}let v,I,h;return t[22]!==a||t[23]!==f?(v=s.jsxs("pre",{className:"font-mono font-semibold",children:[a,f]}),t[22]=a,t[23]=f,t[24]=v):v=t[24],t[25]!==o||t[26]!==c?(I=s.jsx($,{className:"-mt-0.5 flex-1",vegaSpec:c,height:100,signalListeners:x,theme:o}),t[25]=o,t[26]=c,t[27]=I):I=t[27],t[28]!==r.runId||t[29]!==v||t[30]!==I?(h=s.jsxs("div",{className:"flex flex-row",children:[v,I]},r.runId),t[28]=r.runId,t[29]=v,t[30]=I,t[31]=h):h=t[31],h},V=e=>{const t=N.c(12),{run:r,hoveredCellId:l,hiddenInputElementId:o}=e,a=k.useRef(null);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=c=>{a.current&&(a.current.value=String(c),a.current.dispatchEvent(new Event("input",{bubbles:!0})))},t[0]=i):i=t[0];const u=i,m=l||"";let x,d,p,g;return t[1]!==o||t[2]!==m?(x=s.jsx("input",{type:"text",id:o,defaultValue:m,hidden:!0,ref:a}),t[1]=o,t[2]=m,t[3]=x):x=t[3],t[4]!==r.cellRuns?(d=[...r.cellRuns.values()],t[4]=r.cellRuns,t[5]=d):d=t[5],t[6]!==l||t[7]!==d?(p=d.map(c=>s.jsx(F,{cellRun:c,hovered:c.cellId===l,dispatchHoverEvent:u},c.cellId)),t[6]=l,t[7]=d,t[8]=p):p=t[8],t[9]!==x||t[10]!==p?(g=s.jsxs("div",{className:"text-xs mt-0.5 ml-3 flex flex-col gap-0.5",children:[x,p]}),t[9]=x,t[10]=p,t[11]=g):g=t[11],g},D={success:s.jsx(gt,{color:"green",size:14}),running:s.jsx(jt,{color:"var(--blue-10)",size:14}),error:s.jsx(at,{color:"red",size:14}),queued:s.jsx(J,{color:"grey",size:14})},F=e=>{const t=N.c(39),{cellRun:r,hovered:l,dispatchHoverEvent:o}=e;let a;t[0]!==r.elapsedTime?(a=r.elapsedTime?Y(1e3*r.elapsedTime):"-",t[0]=r.elapsedTime,t[1]=a):a=t[1];const i=a;let u;t[2]!==r.elapsedTime||t[3]!==i?(u=r.elapsedTime?s.jsxs("span",{children:["This cell took ",s.jsx(xt,{elapsedTime:i})," to run"]}):s.jsx("span",{children:"This cell has not been run"}),t[2]=r.elapsedTime,t[3]=i,t[4]=u):u=t[4];const m=u;let x;t[5]!==r.cellId||t[6]!==o?(x=()=>{o(r.cellId)},t[5]=r.cellId,t[6]=o,t[7]=x):x=t[7];const d=x;let p;t[8]!==o?(p=()=>{o(null)},t[8]=o,t[9]=p):p=t[9];const g=p,c=l&&"bg-(--gray-3) opacity-100";let y,f,v,I,h,_,n;t[10]!==c?(y=rt("flex flex-row gap-2 py-1 px-1 opacity-70 hover:bg-(--gray-3) hover:opacity-100",c),t[10]=c,t[11]=y):y=t[11],t[12]!==r.startTime?(f=U(r.startTime),t[12]=r.startTime,t[13]=f):f=t[13],t[14]!==f?(v=s.jsxs("span",{className:"text-(--gray-10) dark:text-(--gray-11)",children:["[",f,"]"]}),t[14]=f,t[15]=v):v=t[15],t[16]!==r.cellId?(I=s.jsxs("span",{className:"text-(--gray-10) w-16",children:["(",s.jsx(st,{cellId:r.cellId}),")"]}),t[16]=r.cellId,t[17]=I):I=t[17],t[18]!==r.code?(h=s.jsx("span",{className:"w-40 truncate -ml-1",children:r.code}),t[18]=r.code,t[19]=h):h=t[19],t[20]!==i?(_=s.jsx("span",{className:"text-(--gray-10) dark:text-(--gray-11)",children:i}),t[20]=i,t[21]=_):_=t[21],t[22]!==m||t[23]!==_?(n=s.jsx(A,{content:m,children:_}),t[22]=m,t[23]=_,t[24]=n):n=t[24];const j=D[r.status];let S,b,T;return t[25]!==r.status||t[26]!==j?(S=s.jsx(A,{content:r.status,children:j}),t[25]=r.status,t[26]=j,t[27]=S):S=t[27],t[28]!==n||t[29]!==S?(b=s.jsxs("div",{className:"flex flex-row gap-1 w-16 justify-end -ml-2",children:[n,S]}),t[28]=n,t[29]=S,t[30]=b):b=t[30],t[31]!==d||t[32]!==g||t[33]!==h||t[34]!==b||t[35]!==y||t[36]!==v||t[37]!==I?(T=s.jsxs("div",{className:y,onMouseEnter:d,onMouseLeave:g,children:[v,I,h,b]}),t[31]=d,t[32]=g,t[33]=h,t[34]=b,t[35]=y,t[36]=v,t[37]=I,t[38]=T):T=t[38],T},w=function(e){try{const t=new Date(1e3*e),r=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),u=String(t.getSeconds()).padStart(2,"0");return`${r}-${l}-${o} ${a}:${i}:${u}.${String(t.getMilliseconds()).padStart(3,"0")}`}catch{return""}}});export{G as Tracing,It as __tla,w as formatChartTime};
