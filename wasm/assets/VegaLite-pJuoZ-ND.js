var Or;import{y as Ar,cD as Nr,cE as ve,cF as Je,cG as St,cH as Ir,cI as Sr,R as Y,cJ as Rt}from"./index-aRpq2G87.js";import{a as Rr,b as $r,d as Lr,c as Tr,e as Dr,f as kr,g as Cr,h as Fr,i as Pr,j as _r,k as Mr,l as jr,m as zr,n as Ur,o as Gr,p as Br,q as Vr,r as Wr,s as Xr,t as Hr,u as Jr,v as qr,w as Yr,x as Qr,y as Kr,z as Zr,A as ei,B as ti,C as ri,D as ii,E as ni,F as oi,G as si,H as ai,I as li,J as ci,K as hi,L as pi,N as ui,O as fi,P as di,Q as gi,R as mi,S as vi,T as Ei}from"./compile-CaQ04CEA.js";import{e as bi}from"./index-DgUdtdK9.js";const $t={};function qe(e,t){e===void 0&&(e=$t),t===void 0&&(t=$t);const r=Object.keys(e),i=Object.keys(t);return e===t||r.length===i.length&&r.every(n=>e[n]===t[n])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Te,yi=(Te=function(e,t){return Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Te(e,t)},function(e,t){function r(){this.constructor=e}Te(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),wi=Object.prototype.hasOwnProperty;function Ye(e,t){return wi.call(e,t)}function Qe(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);var i=[];for(var n in e)Ye(e,n)&&i.push(n);return i}function P(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Ke(e){for(var t,r=0,i=e.length;r<i;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0}function Q(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Lt(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Ze(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)if(Ze(e[t]))return!0}else if(typeof e=="object"){for(var i=Qe(e),n=i.length,a=0;a<n;a++)if(Ze(e[i[a]]))return!0}}return!1}function Tt(e,t){var r=[e];for(var i in t){var n=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];n!==void 0&&r.push(i+": "+n)}return r.join(`
`)}var Dt=function(e){function t(r,i,n,a,o){var p=this.constructor,s=e.call(this,Tt(r,{name:i,index:n,operation:a,tree:o}))||this;return s.name=i,s.index=n,s.operation=a,s.tree=o,Object.setPrototypeOf(s,p.prototype),s.message=Tt(r,{name:i,index:n,operation:a,tree:o}),s}return yi(t,e),t}(Error),L=Dt,Oi=P,pe={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var i=e[t];return delete e[t],{newDocument:r,removed:i}},replace:function(e,t,r){var i=e[t];return e[t]=this.value,{newDocument:r,removed:i}},move:function(e,t,r){var i=De(r,this.path);i&&(i=P(i));var n=K(r,{op:"remove",path:this.from}).removed;return K(r,{op:"add",path:this.path,value:n}),{newDocument:r,removed:i}},copy:function(e,t,r){var i=De(r,this.from);return K(r,{op:"add",path:this.path,value:P(i)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:Ee(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},xi={add:function(e,t,r){return Ke(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var i=e[t];return e[t]=this.value,{newDocument:r,removed:i}},move:pe.move,copy:pe.copy,test:pe.test,_get:pe._get};function De(e,t){if(t=="")return e;var r={op:"_get",path:t};return K(e,r),r.value}function K(e,t,r,i,n,a){if(r===void 0&&(r=!1),i===void 0&&(i=!0),n===void 0&&(n=!0),a===void 0&&(a=0),r&&(typeof r=="function"?r(t,0,e,t.path):Ce(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=De(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Ee(e,t.value),o.test===!1)throw new L("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(r)throw new L("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}i||(e=P(e));var p=(t.path||"").split("/"),s=e,l=1,O=p.length,f=void 0,c=void 0,b=void 0;for(b=typeof r=="function"?r:Ce;;){if((c=p[l])&&c.indexOf("~")!=-1&&(c=Lt(c)),n&&(c=="__proto__"||c=="prototype"&&l>0&&p[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&f===void 0&&(s[c]===void 0?f=p.slice(0,l).join("/"):l==O-1&&(f=t.path),f!==void 0&&b(t,0,e,f)),l++,Array.isArray(s)){if(c==="-")c=s.length;else{if(r&&!Ke(c))throw new L("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);Ke(c)&&(c=~~c)}if(l>=O){if(r&&t.op==="add"&&c>s.length)throw new L("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);if((o=xi[t.op].call(t,s,c,e)).test===!1)throw new L("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(l>=O){if((o=pe[t.op].call(t,s,c,e)).test===!1)throw new L("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(s=s[c],r&&l<O&&(!s||typeof s!="object"))throw new L("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}function ke(e,t,r,i,n){if(i===void 0&&(i=!0),n===void 0&&(n=!0),r&&!Array.isArray(t))throw new L("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=P(e));for(var a=new Array(t.length),o=0,p=t.length;o<p;o++)a[o]=K(e,t[o],r,!0,n,o),e=a[o].newDocument;return a.newDocument=e,a}function Ce(e,t,r,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new L("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!pe[e.op])throw new L("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if(typeof e.path!="string")throw new L("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new L('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new L("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new L("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Ze(e.value))throw new L("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r){if(e.op=="add"){var n=e.path.split("/").length,a=i.split("/").length;if(n!==a+1&&n!==a)throw new L("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new L("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if(e.op==="move"||e.op==="copy"){var o=kt([{op:"_get",path:e.from,value:void 0}],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new L("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}function kt(e,t,r){try{if(!Array.isArray(e))throw new L("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)ke(P(t),P(e),r||!0);else{r=r||Ce;for(var i=0;i<e.length;i++)r(e[i],i,t,void 0)}}catch(n){if(n instanceof L)return n;throw n}}function Ee(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r,i,n,a=Array.isArray(e),o=Array.isArray(t);if(a&&o){if((i=e.length)!=t.length)return!1;for(r=i;r--!=0;)if(!Ee(e[r],t[r]))return!1;return!0}if(a!=o)return!1;var p=Object.keys(e);if((i=p.length)!==Object.keys(t).length)return!1;for(r=i;r--!=0;)if(!t.hasOwnProperty(p[r]))return!1;for(r=i;r--!=0;)if(!Ee(e[n=p[r]],t[n]))return!1;return!0}return e!=e&&t!=t}const Ai=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:L,_areEquals:Ee,applyOperation:K,applyPatch:ke,applyReducer:function(e,t,r){var i=K(e,t);if(i.test===!1)throw new L("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return i.newDocument},deepClone:Oi,getValueByPointer:De,validate:kt,validator:Ce},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var et=new WeakMap,Ni=function(e){this.observers=new Map,this.obj=e},Ii=function(e,t){this.callback=e,this.observer=t};function tt(e,t){t===void 0&&(t=!1);var r=et.get(e.object);rt(r.value,e.object,e.patches,"",t),e.patches.length&&ke(r.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function rt(e,t,r,i,n){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=Qe(t),o=Qe(e),p=!1,s=o.length-1;s>=0;s--){var l=e[f=o[s]];if(!Ye(t,f)||t[f]===void 0&&l!==void 0&&Array.isArray(t)===!1)Array.isArray(e)===Array.isArray(t)?(n&&r.push({op:"test",path:i+"/"+Q(f),value:P(l)}),r.push({op:"remove",path:i+"/"+Q(f)}),p=!0):(n&&r.push({op:"test",path:i,value:e}),r.push({op:"replace",path:i,value:t}));else{var O=t[f];typeof l=="object"&&l!=null&&typeof O=="object"&&O!=null&&Array.isArray(l)===Array.isArray(O)?rt(l,O,r,i+"/"+Q(f),n):l!==O&&(n&&r.push({op:"test",path:i+"/"+Q(f),value:P(l)}),r.push({op:"replace",path:i+"/"+Q(f),value:P(O)}))}}if(p||a.length!=o.length)for(s=0;s<a.length;s++){var f;Ye(e,f=a[s])||t[f]===void 0||r.push({op:"add",path:i+"/"+Q(f),value:P(t[f])})}}}const Si=Object.freeze(Object.defineProperty({__proto__:null,compare:function(e,t,r){r===void 0&&(r=!1);var i=[];return rt(e,t,i,"",r),i},generate:tt,observe:function(e,t){var r,i=function(p){return et.get(p)}(e);if(i){var n=function(p,s){return p.observers.get(s)}(i,t);r=n&&n.observer}else i=new Ni(e),et.set(e,i);if(r)return r;if(r={},i.value=P(e),t){r.callback=t,r.next=null;var a=function(){tt(r)},o=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return r.patches=[],r.object=e,r.unobserve=function(){tt(r),clearTimeout(r.next),function(p,s){p.observers.delete(s.callback)}(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},i.observers.set(t,new Ii(t,r)),r},unobserve:function(e,t){t.unobserve()}},Symbol.toStringTag,{value:"Module"}));var it,Ct;Object.assign({},Ai,Si,{JsonPatchError:Dt,deepClone:P,escapePathComponent:Q,unescapePathComponent:Lt});var Ri=function(){if(Ct)return it;Ct=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return it=function(t,r){var i,n,a;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),n=i===""?1/0:r.maxLength===void 0?80:r.maxLength,a=r.replacer,function o(p,s,l){var O,f,c,b,k,I,T,S,_,B,$,C;if(p&&typeof p.toJSON=="function"&&(p=p.toJSON()),($=JSON.stringify(p,a))===void 0)return $;if(T=n-s.length-l,$.length<=T&&(_=$.replace(e,function(M,j){return j||M+" "})).length<=T)return _;if(a!=null&&(p=JSON.parse($),a=void 0),typeof p=="object"&&p!==null){if(S=s+i,c=[],f=0,Array.isArray(p))for(B="[",O="]",T=p.length;f<T;f++)c.push(o(p[f],S,f===T-1?0:1)||"null");else for(B="{",O="}",T=(I=Object.keys(p)).length;f<T;f++)b=I[f],k=JSON.stringify(b)+": ",(C=o(p[b],S,k.length+(f===T-1?0:1)))!==void 0&&c.push(k+C);if(c.length>0)return[B,i+c.join(`,
`+S),O].join(`
`+s)}return $}(t,"",0)},it}();const nt=Ar(Ri);var $i={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Li={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Ti={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Di=Array.prototype.slice,Z=(e,t,r)=>{const i=r?r(t[0]):t[0];return i[e].apply(i,Di.call(t,1))};var ki={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,r)=>Math.max(t,Math.min(r,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,r,i,n,a,o)=>new Date(e,t||0,r??1,i||0,n||0,a||0,o||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Z("join",arguments)},indexof:function(){return Z("indexOf",arguments)},lastindexof:function(){return Z("lastIndexOf",arguments)},slice:function(){return Z("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Z("substring",arguments,String)},split:function(){return Z("split",arguments,String)},replace:function(){return Z("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Ci=["view","item","group","xy","x","y"],ot=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&ot.add(setImmediate);const Fi={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const r=t.name;return e.memberDepth>0?r:r==="datum"?e.datum:r==="event"?e.event:r==="item"?e.item:$i[r]||e.params["$"+r]},MemberExpression:(e,t)=>{const r=!t.computed,i=e(t.object);r&&(e.memberDepth+=1);const n=e(t.property);if(r&&(e.memberDepth-=1),!ot.has(i[n]))return i[n];console.error(`Prevented interpretation of member "${n}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const r=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(r[0])?e(r[1]):e(r[2]):(e.fn[i]||ki[i]).apply(e.fn,r.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Li[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Ti[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((r,i)=>{e.memberDepth+=1;const n=e(i.key);return e.memberDepth-=1,ot.has(e(i.value))?console.error(`Prevented interpretation of property "${n}" which could lead to insecure code execution`):r[n]=e(i.value),r},{})};function be(e,t,r,i,n,a){const o=p=>Fi[p.type](o,p);return o.memberDepth=0,o.fn=Object.create(t),o.params=r,o.datum=i,o.event=n,o.item=a,Ci.forEach(p=>o.fn[p]=function(){return n.vega[p](...arguments)}),o(e)}var Pi={operator(e,t){const r=t.ast,i=e.functions;return n=>be(r,i,n)},parameter(e,t){const r=t.ast,i=e.functions;return(n,a)=>be(r,i,a,n)},event(e,t){const r=t.ast,i=e.functions;return n=>be(r,i,void 0,void 0,n)},handler(e,t){const r=t.ast,i=e.functions;return(n,a)=>{const o=a.item&&a.item.datum;return be(r,i,n,o,a)}},encode(e,t){const{marktype:r,channels:i}=t,n=e.functions,a=r==="group"||r==="image"||r==="rect";return(o,p)=>{const s=o.datum;let l,O=0;for(const f in i)l=be(i[f].ast,n,p,s,void 0,o),o[f]!==l&&(o[f]=l,O=1);return r!=="rule"&&function(f,c,b){let k;c.x2&&(c.x?(b&&f.x>f.x2&&(k=f.x,f.x=f.x2,f.x2=k),f.width=f.x2-f.x):f.x=f.x2-(f.width||0)),c.xc&&(f.x=f.xc-(f.width||0)/2),c.y2&&(c.y?(b&&f.y>f.y2&&(k=f.y,f.y=f.y2,f.y2=k),f.height=f.y2-f.y):f.y=f.y2-(f.height||0)),c.yc&&(f.y=f.yc-(f.height||0)/2)}(o,i,a),O}}};const _i="5.23.0",Mi=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Rr,accessPathWithDatum:$r,accessWithDatumToUnescapedPath:Lr,compile:Tr,contains:Dr,deepEqual:kr,deleteNestedProperty:Cr,duplicate:Fr,entries:Pr,every:_r,fieldIntersection:Mr,flatAccessWithDatum:jr,getFirstDefined:zr,hasIntersection:Ur,hasProperty:Gr,hash:Br,internalField:Vr,isBoolean:Wr,isEmpty:Xr,isEqual:Hr,isInternalField:Jr,isNullOrFalse:qr,isNumeric:Yr,keys:Qr,logicalExpr:Kr,mergeDeep:Zr,never:ei,normalize:ti,normalizeAngle:ri,omit:ii,pick:ni,prefixGenerator:oi,removePathFromField:si,replaceAll:ai,replacePathInField:li,resetIdCounter:ci,setEqual:hi,some:pi,stringify:ui,titleCase:fi,unique:di,uniqueId:gi,vals:mi,varName:vi,version:_i},Symbol.toStringTag,{value:"Module"}));function Ft(e){const[t,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:r}}var ji="2.14.0";const ue="#fff",Pt="#888",zi={background:"#333",view:{stroke:Pt},title:{color:ue,subtitleColor:ue},style:{"guide-label":{fill:ue},"guide-title":{fill:ue}},axis:{domainColor:ue,gridColor:Pt,tickColor:ue}},ee="#4572a7",Ui={background:"#fff",arc:{fill:ee},area:{fill:ee},line:{stroke:ee,strokeWidth:2},path:{stroke:ee},rect:{fill:ee},shape:{stroke:ee},symbol:{fill:ee,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},te="#30a2da",st="#cbcbcb",_t="#f0f0f0",Mt="#333",Gi={arc:{fill:te},area:{fill:te},axis:{domainColor:st,grid:!0,gridColor:st,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:st,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:_t,group:{fill:_t},legend:{labelColor:Mt,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Mt,titleFontSize:14,titlePadding:10},line:{stroke:te,strokeWidth:2},path:{stroke:te,strokeWidth:.5},rect:{fill:te},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:te},bar:{binSpacing:2,fill:te,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},re="#000",Bi={group:{fill:"#e5e5e5"},arc:{fill:re},area:{fill:re},line:{stroke:re},path:{stroke:re},rect:{fill:re},shape:{stroke:re},symbol:{fill:re,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jt="Benton Gothic, sans-serif",ie="#82c6df",at="Benton Gothic Bold, sans-serif",zt="normal",ye={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Vi={background:"#ffffff",title:{anchor:"start",color:"#000000",font:at,fontSize:22,fontWeight:"normal"},arc:{fill:ie},area:{fill:ie},line:{stroke:ie,strokeWidth:2},path:{stroke:ie},rect:{fill:ie},shape:{stroke:ie},symbol:{fill:ie,size:30},axis:{labelFont:jt,labelFontSize:11.5,labelFontWeight:"normal",titleFont:at,titleFontSize:13,titleFontWeight:zt},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:jt,labelFontSize:11.5,symbolType:"square",titleFont:at,titleFontSize:13,titleFontWeight:zt},range:{category:ye["category-6"],diverging:ye["fireandice-6"],heatmap:ye["fire-7"],ordinal:ye["fire-7"],ramp:ye["fire-7"]}},ne="#ab5787",Fe="#979797",Wi={background:"#f9f9f9",arc:{fill:ne},area:{fill:ne},line:{stroke:ne},path:{stroke:ne},rect:{fill:ne},shape:{stroke:ne},symbol:{fill:ne,size:30},axis:{domainColor:Fe,domainWidth:.5,gridWidth:.2,labelColor:Fe,tickColor:Fe,tickWidth:.2,titleColor:Fe},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},oe="#3e5c69",Xi={background:"#fff",arc:{fill:oe},area:{fill:oe},line:{stroke:oe},path:{stroke:oe},rect:{fill:oe},shape:{stroke:oe},symbol:{fill:oe},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},U="#1696d2",Ut="#000000",Pe="Lato",lt="Lato",we={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Hi={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Pe},axisX:{domain:!0,domainColor:Ut,domainWidth:1,grid:!1,labelFontSize:12,labelFont:lt,labelAngle:0,tickColor:Ut,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Pe},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:lt,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Pe,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:lt,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Pe,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:we["six-groups-cat-1"],diverging:we["diverging-colors"],heatmap:we["diverging-colors"],ordinal:we["six-groups-seq"],ramp:we["shades-blue"]},area:{fill:U},rect:{fill:U},line:{color:U,stroke:U,strokeWidth:5},trail:{color:U,stroke:U,strokeWidth:0,size:1},path:{stroke:U,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:U,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:U,stroke:null}},arc:{fill:U},shape:{stroke:U},symbol:{fill:U,size:30}},se="#3366CC",Gt="#ccc",_e="Arial, sans-serif",Ji={arc:{fill:se},area:{fill:se},path:{stroke:se},rect:{fill:se},shape:{stroke:se},symbol:{stroke:se},circle:{fill:se},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:_e,fontSize:12},"guide-title":{font:_e,fontSize:12},"group-title":{font:_e,fontSize:12}},title:{font:_e,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Gt,tickColor:Gt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ct=e=>e*(1/3+1),Bt=ct(9),Vt=ct(10),Wt=ct(12),Oe="Segoe UI",Xt="wf_standard-font, helvetica, arial, sans-serif",Ht="#252423",xe="#605E5C",Jt="transparent",G="#118DFF",qt="#DEEFFF",Yt=[qt,G],qi={view:{stroke:Jt},background:Jt,font:Oe,header:{titleFont:Xt,titleFontSize:Wt,titleColor:Ht,labelFont:Oe,labelFontSize:Vt,labelColor:xe},axis:{ticks:!1,grid:!1,domain:!1,labelColor:xe,labelFontSize:Bt,titleFont:Xt,titleColor:Ht,titleFontSize:Wt,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:G},line:{stroke:G,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Oe,fontSize:Bt,fill:xe},arc:{fill:G},area:{fill:G,line:!0,opacity:.6},path:{stroke:G},rect:{fill:G},point:{fill:G,filled:!0,size:75},shape:{stroke:G},symbol:{fill:G,strokeWidth:1.5,size:50},legend:{titleFont:Oe,titleFontWeight:"bold",titleColor:xe,labelFont:Oe,labelFontSize:Vt,labelColor:xe,symbolType:"circle",symbolSize:75},range:{category:[G,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:Yt,heatmap:Yt,ordinal:[qt,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",G]}},ht='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Yi=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Qi=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Me({type:e,background:t}){const r=e==="dark"?"#161616":"#ffffff",i=e==="dark"?"#f4f4f4":"#161616",n=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:n},area:{fill:n},path:{stroke:n},rect:{fill:n},shape:{stroke:n},symbol:{stroke:n},circle:{fill:n},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:ht,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:ht,fill:i,fontWeight:400},"guide-title":{font:ht,fill:i,fontWeight:400}},range:{category:e==="dark"?Yi:Qi,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Ki=Me({type:"light",background:"#ffffff"}),Zi=Me({type:"light",background:"#f4f4f4"}),en=Me({type:"dark",background:"#262626"}),tn=Me({type:"dark",background:"#161616"}),rn=ji,nn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Zi,carbong100:tn,carbong90:en,carbonwhite:Ki,dark:zi,excel:Ui,fivethirtyeight:Gi,ggplot2:Bi,googlecharts:Ji,latimes:Vi,powerbi:qi,quartz:Wi,urbaninstitute:Hi,version:rn,vox:Xi},Symbol.toStringTag,{value:"Module"}));function Qt(e,t){return JSON.stringify(e,function(r){const i=[];return function(n,a){if(typeof a!="object"||a===null)return a;const o=i.indexOf(this)+1;return i.length=o,i.length>r?"[Object]":i.indexOf(a)>=0?"[Circular]":(i.push(a),a)}}(t))}var on=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Kt="vg-tooltip-element",sn={offsetX:10,offsetY:10,id:Kt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(e,t,r){if(Nr(e))return`[${e.map(i=>t(ve(i)?i:Qt(i,r))).join(", ")}]`;if(Je(e)){let i="";const{title:n,image:a,...o}=e;n&&(i+=`<h2>${t(n)}</h2>`),a&&(i+=`<img src="${t(a)}">`);const p=Object.keys(o);if(p.length>0){i+="<table>";for(const s of p){let l=o[s];l!==void 0&&(Je(l)&&(l=Qt(l,r)),i+=`<tr><td class="key">${t(s)}</td><td class="value">${t(l)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}};class an{constructor(t){this.options={...sn,...t};const r=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function(a){if(!/^[A-Za-z]+[-:.\w]*$/.test(a))throw new Error("Invalid HTML ID");return on.toString().replace(Kt,a)}(r);const n=document.head;n.childNodes.length>0?n.insertBefore(i,n.childNodes[0]):n.appendChild(i)}}tooltipHandler(t,r,i,n){if(this.el=document.getElementById(this.options.id),!this.el&&(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),n==null||n==="")return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(n,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=function(p,s,l,O){let f=p.clientX+l;f+s.width>window.innerWidth&&(f=+p.clientX-l-s.width);let c=p.clientY+O;return c+s.height>window.innerHeight&&(c=+p.clientY-O-s.height),{x:f,y:c}}(r,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${a}px`}}var Zt,er,pt={};function je(e){return(je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ln(e){var t=function(r,i){if(je(r)!=="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,i);if(je(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}(e,"string");return je(t)==="symbol"?t:String(t)}function cn(e,t,r){return(t=ln(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pn=A;function A(e){var t=this;if(t instanceof A||(t=new A),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(n){t.push(n)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function un(e,t,r){var i=t===e.head?new ae(r,null,t,e):new ae(r,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function fn(e,t){e.tail=new ae(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function dn(e,t){e.head=new ae(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ae(e,t,r,i){if(!(this instanceof ae))return new ae(e,t,r,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}A.Node=ae,A.create=A,A.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},A.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},A.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},A.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)fn(this,arguments[e]);return this.length},A.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)dn(this,arguments[e]);return this.length},A.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},A.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},A.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;r!==null;i++)e.call(t,r.value,i,this),r=r.next},A.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;r!==null;i--)e.call(t,r.value,i,this),r=r.prev},A.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value},A.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value},A.prototype.map=function(e,t){t=t||this;for(var r=new A,i=this.head;i!==null;)r.push(e.call(t,i.value,this)),i=i.next;return r},A.prototype.mapReverse=function(e,t){t=t||this;for(var r=new A,i=this.tail;i!==null;)r.push(e.call(t,i.value,this)),i=i.prev;return r},A.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,r=this.head.value}for(var n=0;i!==null;n++)r=e(r,i.value,n),i=i.next;return r},A.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,r=this.tail.value}for(var n=this.length-1;i!==null;n--)r=e(r,i.value,n),i=i.prev;return r},A.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e},A.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e},A.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new A;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,n=this.head;n!==null&&i<e;i++)n=n.next;for(;n!==null&&i<t;i++,n=n.next)r.push(n.value);return r},A.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new A;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,n=this.tail;n!==null&&i>t;i--)n=n.prev;for(;n!==null&&i>e;i--,n=n.prev)r.push(n.value);return r},A.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,n=this.head;n!==null&&i<e;i++)n=n.next;var a=[];for(i=0;n&&i<t;i++)a.push(n.value),n=this.removeNode(n);for(n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev),i=0;i<r.length;i++)n=un(this,n,r[i]);return a},A.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=t,this.tail=e,this};try{(er?Zt:(er=1,Zt=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}))(A)}catch{}const gn=pn,le=Symbol("max"),H=Symbol("length"),fe=Symbol("lengthCalculator"),Ae=Symbol("allowStale"),ce=Symbol("maxAge"),J=Symbol("dispose"),tr=Symbol("noDisposeOnSet"),D=Symbol("lruList"),V=Symbol("cache"),rr=Symbol("updateAgeOnGet"),ut=()=>1,ft=(e,t,r)=>{const i=e[V].get(t);if(i){const n=i.value;if(ze(e,n)){if(de(e,i),!e[Ae])return}else r&&(e[rr]&&(i.value.now=Date.now()),e[D].unshiftNode(i));return n.value}},ze=(e,t)=>{if(!t||!t.maxAge&&!e[ce])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[ce]&&r>e[ce]},Ne=e=>{if(e[H]>e[le])for(let t=e[D].tail;e[H]>e[le]&&t!==null;){const r=t.prev;de(e,t),t=r}},de=(e,t)=>{if(t){const r=t.value;e[J]&&e[J](r.key,r.value),e[H]-=r.length,e[V].delete(r.key),e[D].removeNode(t)}};class mn{constructor(t,r,i,n,a){this.key=t,this.value=r,this.length=i,this.now=n,this.maxAge=a||0}}const ir=(e,t,r,i)=>{let n=r.value;ze(e,n)&&(de(e,r),e[Ae]||(n=void 0)),n&&t.call(i,n.value,n.key,e)};var vn=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[le]=e.max||1/0;const t=e.length||ut;if(this[fe]=typeof t!="function"?ut:t,this[Ae]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ce]=e.maxAge||0,this[J]=e.dispose,this[tr]=e.noDisposeOnSet||!1,this[rr]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[le]=e||1/0,Ne(this)}get max(){return this[le]}set allowStale(e){this[Ae]=!!e}get allowStale(){return this[Ae]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ce]=e,Ne(this)}get maxAge(){return this[ce]}set lengthCalculator(e){typeof e!="function"&&(e=ut),e!==this[fe]&&(this[fe]=e,this[H]=0,this[D].forEach(t=>{t.length=this[fe](t.value,t.key),this[H]+=t.length})),Ne(this)}get lengthCalculator(){return this[fe]}get length(){return this[H]}get itemCount(){return this[D].length}rforEach(e,t){t=t||this;for(let r=this[D].tail;r!==null;){const i=r.prev;ir(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[D].head;r!==null;){const i=r.next;ir(this,e,r,t),r=i}}keys(){return this[D].toArray().map(e=>e.key)}values(){return this[D].toArray().map(e=>e.value)}reset(){this[J]&&this[D]&&this[D].length&&this[D].forEach(e=>this[J](e.key,e.value)),this[V]=new Map,this[D]=new gn,this[H]=0}dump(){return this[D].map(e=>!ze(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[D]}set(e,t,r){if((r=r||this[ce])&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,n=this[fe](t,e);if(this[V].has(e)){if(n>this[le])return de(this,this[V].get(e)),!1;const o=this[V].get(e).value;return this[J]&&(this[tr]||this[J](e,o.value)),o.now=i,o.maxAge=r,o.value=t,this[H]+=n-o.length,o.length=n,this.get(e),Ne(this),!0}const a=new mn(e,t,n,i,r);return a.length>this[le]?(this[J]&&this[J](e,t),!1):(this[H]+=a.length,this[D].unshift(a),this[V].set(e,this[D].head),Ne(this),!0)}has(e){if(!this[V].has(e))return!1;const t=this[V].get(e).value;return!ze(this,t)}get(e){return ft(this,e,!0)}peek(e){return ft(this,e,!1)}pop(){const e=this[D].tail;return e?(de(this,e),e.value):null}del(e){de(this,this[V].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const i=e[r],n=i.e||0;if(n===0)this.set(i.k,i.v);else{const a=n-t;a>0&&this.set(i.k,i.v,a)}}}prune(){this[V].forEach((e,t)=>ft(this,t,!1))}};const En=Object.freeze({loose:!0}),bn=Object.freeze({});var dt=e=>e?typeof e!="object"?En:e:bn,gt={exports:{}},mt={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Ue=typeof process=="object"&&pt&&pt.NODE_DEBUG&&/\bsemver\b/i.test(pt.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=mt,a=Ue,o=(t=e.exports={}).re=[],p=t.safeRe=[],s=t.src=[],l=t.t={};let O=0;const f="[a-zA-Z0-9-]",c=[["\\s",1],["\\d",n],[f,i]],b=(k,I,T)=>{const S=(B=>{for(const[$,C]of c)B=B.split(`${$}*`).join(`${$}{0,${C}}`).split(`${$}+`).join(`${$}{1,${C}}`);return B})(I),_=O++;a(k,_,I),l[k]=_,s[_]=I,o[_]=new RegExp(I,T?"g":void 0),p[_]=new RegExp(S,T?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),b("MAINVERSION",`(${s[l.NUMERICIDENTIFIER]})\\.(${s[l.NUMERICIDENTIFIER]})\\.(${s[l.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${s[l.NUMERICIDENTIFIERLOOSE]})\\.(${s[l.NUMERICIDENTIFIERLOOSE]})\\.(${s[l.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${s[l.NUMERICIDENTIFIER]}|${s[l.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${s[l.NUMERICIDENTIFIERLOOSE]}|${s[l.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${s[l.PRERELEASEIDENTIFIER]}(?:\\.${s[l.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${s[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[l.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${f}+`),b("BUILD",`(?:\\+(${s[l.BUILDIDENTIFIER]}(?:\\.${s[l.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${s[l.MAINVERSION]}${s[l.PRERELEASE]}?${s[l.BUILD]}?`),b("FULL",`^${s[l.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${s[l.MAINVERSIONLOOSE]}${s[l.PRERELEASELOOSE]}?${s[l.BUILD]}?`),b("LOOSE",`^${s[l.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${s[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${s[l.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${s[l.XRANGEIDENTIFIER]})(?:\\.(${s[l.XRANGEIDENTIFIER]})(?:\\.(${s[l.XRANGEIDENTIFIER]})(?:${s[l.PRERELEASE]})?${s[l.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${s[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[l.XRANGEIDENTIFIERLOOSE]})(?:${s[l.PRERELEASELOOSE]})?${s[l.BUILD]}?)?)?`),b("XRANGE",`^${s[l.GTLT]}\\s*${s[l.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${s[l.GTLT]}\\s*${s[l.XRANGEPLAINLOOSE]}$`),b("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),b("COERCERTL",s[l.COERCE],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${s[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${s[l.LONETILDE]}${s[l.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${s[l.LONETILDE]}${s[l.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${s[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${s[l.LONECARET]}${s[l.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${s[l.LONECARET]}${s[l.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${s[l.GTLT]}\\s*(${s[l.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${s[l.GTLT]}\\s*(${s[l.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${s[l.GTLT]}\\s*(${s[l.LOOSEPLAIN]}|${s[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${s[l.XRANGEPLAIN]})\\s+-\\s+(${s[l.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${s[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[l.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(gt,gt.exports);var vt=gt.exports;const nr=/^[0-9]+$/;var yn={compareIdentifiers:(e,t)=>{const r=nr.test(e),i=nr.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1}};const Ge=Ue,{MAX_LENGTH:or,MAX_SAFE_INTEGER:Be}=mt,{safeRe:sr,t:ar}=vt,wn=dt,{compareIdentifiers:ge}=yn;var Et=class X{constructor(t,r){if(r=wn(r),t instanceof X){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>or)throw new TypeError(`version is longer than ${or} characters`);Ge("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const i=t.trim().match(r.loose?sr[ar.LOOSE]:sr[ar.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Be||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Be||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Be||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const a=+n;if(a>=0&&a<Be)return a}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ge("SemVer.compare",this.version,this.options,t),!(t instanceof X)){if(typeof t=="string"&&t===this.version)return 0;t=new X(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof X||(t=new X(t,this.options)),ge(this.major,t.major)||ge(this.minor,t.minor)||ge(this.patch,t.patch)}comparePre(t){if(t instanceof X||(t=new X(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const i=this.prerelease[r],n=t.prerelease[r];if(Ge("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i!==n)return ge(i,n)}while(++r)}compareBuild(t){t instanceof X||(t=new X(t,this.options));let r=0;do{const i=this.build[r],n=t.build[r];if(Ge("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i!==n)return ge(i,n)}while(++r)}inc(t,r,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(i)?1:0;if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let a=[r,n];i===!1&&(a=[r]),ge(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const lr=Et;var me=(e,t,r)=>new lr(e,r).compare(new lr(t,r));const On=me,xn=me,An=me,Nn=me,In=me,Sn=me,Rn=(e,t,r)=>On(e,t,r)===0,$n=(e,t,r)=>xn(e,t,r)!==0,Ln=(e,t,r)=>An(e,t,r)>0,Tn=(e,t,r)=>Nn(e,t,r)>=0,Dn=(e,t,r)=>In(e,t,r)<0,kn=(e,t,r)=>Sn(e,t,r)<=0;var bt,cr,yt,hr,Cn=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Rn(e,r,i);case"!=":return $n(e,r,i);case">":return Ln(e,r,i);case">=":return Tn(e,r,i);case"<":return Dn(e,r,i);case"<=":return kn(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}};function pr(){if(hr)return yt;hr=1;class e{constructor(d,y){if(y=r(y),d instanceof e)return d.loose===!!y.loose&&d.includePrerelease===!!y.includePrerelease?d:new e(d.raw,y);if(d instanceof i)return this.raw=d.value,this.set=[[d]],this.format(),this;if(this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease,this.raw=d.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(u=>this.parseRange(u.trim())).filter(u=>u.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const u=this.set[0];if(this.set=this.set.filter(g=>!b(g[0])),this.set.length===0)this.set=[u];else if(this.set.length>1){for(const g of this.set)if(g.length===1&&k(g[0])){this.set=[g];break}}}this.format()}format(){return this.range=this.set.map(d=>d.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(d){const y=((this.options.includePrerelease&&f)|(this.options.loose&&c))+":"+d,u=t.get(y);if(u)return u;const g=this.options.loose,h=g?o[p.HYPHENRANGELOOSE]:o[p.HYPHENRANGE];d=d.replace(h,Xe(this.options.includePrerelease)),n("hyphen replace",d),d=d.replace(o[p.COMPARATORTRIM],s),n("comparator trim",d),d=d.replace(o[p.TILDETRIM],l),n("tilde trim",d),d=d.replace(o[p.CARETTRIM],O),n("caret trim",d);let m=d.split(" ").map(E=>T(E,this.options)).join(" ").split(/\s+/).map(E=>$e(E,this.options));g&&(m=m.filter(E=>(n("loose invalid filter",E,this.options),!!E.match(o[p.COMPARATORLOOSE])))),n("range list",m);const w=new Map,x=m.map(E=>new i(E,this.options));for(const E of x){if(b(E))return[E];w.set(E.value,E)}w.size>1&&w.has("")&&w.delete("");const R=[...w.values()];return t.set(y,R),R}intersects(d,y){if(!(d instanceof e))throw new TypeError("a Range is required");return this.set.some(u=>I(u,y)&&d.set.some(g=>I(g,y)&&u.every(h=>g.every(m=>h.intersects(m,y)))))}test(d){if(!d)return!1;if(typeof d=="string")try{d=new a(d,this.options)}catch{return!1}for(let y=0;y<this.set.length;y++)if(z(this.set[y],d,this.options))return!0;return!1}}yt=e;const t=new vn({max:1e3}),r=dt,i=function(){if(cr)return bt;cr=1;const v=Symbol("SemVer ANY");class d{static get ANY(){return v}constructor(E,N){if(N=y(N),E instanceof d){if(E.loose===!!N.loose)return E;E=E.value}E=E.trim().split(/\s+/).join(" "),m("comparator",E,N),this.options=N,this.loose=!!N.loose,this.parse(E),this.semver===v?this.value="":this.value=this.operator+this.semver.version,m("comp",this)}parse(E){const N=this.options.loose?u[g.COMPARATORLOOSE]:u[g.COMPARATOR],F=E.match(N);if(!F)throw new TypeError(`Invalid comparator: ${E}`);this.operator=F[1]!==void 0?F[1]:"",this.operator==="="&&(this.operator=""),F[2]?this.semver=new w(F[2],this.options.loose):this.semver=v}toString(){return this.value}test(E){if(m("Comparator.test",E,this.options.loose),this.semver===v||E===v)return!0;if(typeof E=="string")try{E=new w(E,this.options)}catch{return!1}return h(E,this.operator,this.semver,this.options)}intersects(E,N){if(!(E instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""||new x(E.value,N).test(this.value):E.operator===""?E.value===""||new x(this.value,N).test(E.semver):!((N=y(N)).includePrerelease&&(this.value==="<0.0.0-0"||E.value==="<0.0.0-0")||!N.includePrerelease&&(this.value.startsWith("<0.0.0")||E.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!E.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!E.operator.startsWith("<"))&&(this.semver.version!==E.semver.version||!this.operator.includes("=")||!E.operator.includes("="))&&!(h(this.semver,"<",E.semver,N)&&this.operator.startsWith(">")&&E.operator.startsWith("<"))&&!(h(this.semver,">",E.semver,N)&&this.operator.startsWith("<")&&E.operator.startsWith(">")))}}bt=d;const y=dt,{safeRe:u,t:g}=vt,h=Cn,m=Ue,w=Et,x=pr();return bt}(),n=Ue,a=Et,{safeRe:o,t:p,comparatorTrimReplace:s,tildeTrimReplace:l,caretTrimReplace:O}=vt,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:c}=mt,b=v=>v.value==="<0.0.0-0",k=v=>v.value==="",I=(v,d)=>{let y=!0;const u=v.slice();let g=u.pop();for(;y&&u.length;)y=u.every(h=>g.intersects(h,d)),g=u.pop();return y},T=(v,d)=>(n("comp",v,d),v=$(v,d),n("caret",v),v=_(v,d),n("tildes",v),v=M(v,d),n("xrange",v),v=he(v,d),n("stars",v),v),S=v=>!v||v.toLowerCase()==="x"||v==="*",_=(v,d)=>v.trim().split(/\s+/).map(y=>B(y,d)).join(" "),B=(v,d)=>{const y=d.loose?o[p.TILDELOOSE]:o[p.TILDE];return v.replace(y,(u,g,h,m,w)=>{let x;return n("tilde",v,u,g,h,m,w),S(g)?x="":S(h)?x=`>=${g}.0.0 <${+g+1}.0.0-0`:S(m)?x=`>=${g}.${h}.0 <${g}.${+h+1}.0-0`:w?(n("replaceTilde pr",w),x=`>=${g}.${h}.${m}-${w} <${g}.${+h+1}.0-0`):x=`>=${g}.${h}.${m} <${g}.${+h+1}.0-0`,n("tilde return",x),x})},$=(v,d)=>v.trim().split(/\s+/).map(y=>C(y,d)).join(" "),C=(v,d)=>{n("caret",v,d);const y=d.loose?o[p.CARETLOOSE]:o[p.CARET],u=d.includePrerelease?"-0":"";return v.replace(y,(g,h,m,w,x)=>{let R;return n("caret",v,g,h,m,w,x),S(h)?R="":S(m)?R=`>=${h}.0.0${u} <${+h+1}.0.0-0`:S(w)?R=h==="0"?`>=${h}.${m}.0${u} <${h}.${+m+1}.0-0`:`>=${h}.${m}.0${u} <${+h+1}.0.0-0`:x?(n("replaceCaret pr",x),R=h==="0"?m==="0"?`>=${h}.${m}.${w}-${x} <${h}.${m}.${+w+1}-0`:`>=${h}.${m}.${w}-${x} <${h}.${+m+1}.0-0`:`>=${h}.${m}.${w}-${x} <${+h+1}.0.0-0`):(n("no pr"),R=h==="0"?m==="0"?`>=${h}.${m}.${w}${u} <${h}.${m}.${+w+1}-0`:`>=${h}.${m}.${w}${u} <${h}.${+m+1}.0-0`:`>=${h}.${m}.${w} <${+h+1}.0.0-0`),n("caret return",R),R})},M=(v,d)=>(n("replaceXRanges",v,d),v.split(/\s+/).map(y=>j(y,d)).join(" ")),j=(v,d)=>{v=v.trim();const y=d.loose?o[p.XRANGELOOSE]:o[p.XRANGE];return v.replace(y,(u,g,h,m,w,x)=>{n("xRange",v,u,g,h,m,w,x);const R=S(h),E=R||S(m),N=E||S(w),F=N;return g==="="&&F&&(g=""),x=d.includePrerelease?"-0":"",R?u=g===">"||g==="<"?"<0.0.0-0":"*":g&&F?(E&&(m=0),w=0,g===">"?(g=">=",E?(h=+h+1,m=0,w=0):(m=+m+1,w=0)):g==="<="&&(g="<",E?h=+h+1:m=+m+1),g==="<"&&(x="-0"),u=`${g+h}.${m}.${w}${x}`):E?u=`>=${h}.0.0${x} <${+h+1}.0.0-0`:N&&(u=`>=${h}.${m}.0${x} <${h}.${+m+1}.0-0`),n("xRange return",u),u})},he=(v,d)=>(n("replaceStars",v,d),v.trim().replace(o[p.STAR],"")),$e=(v,d)=>(n("replaceGTE0",v,d),v.trim().replace(o[d.includePrerelease?p.GTE0PRE:p.GTE0],"")),Xe=v=>(d,y,u,g,h,m,w,x,R,E,N,F,Le)=>`${y=S(u)?"":S(g)?`>=${u}.0.0${v?"-0":""}`:S(h)?`>=${u}.${g}.0${v?"-0":""}`:m?`>=${y}`:`>=${y}${v?"-0":""}`} ${x=S(R)?"":S(E)?`<${+R+1}.0.0-0`:S(N)?`<${R}.${+E+1}.0-0`:F?`<=${R}.${E}.${N}-${F}`:v?`<${R}.${E}.${+N+1}-0`:`<=${x}`}`.trim(),z=(v,d,y)=>{for(let u=0;u<v.length;u++)if(!v[u].test(d))return!1;if(d.prerelease.length&&!y.includePrerelease){for(let u=0;u<v.length;u++)if(n(v[u].semver),v[u].semver!==i.ANY&&v[u].semver.prerelease.length>0){const g=v[u].semver;if(g.major===d.major&&g.minor===d.minor&&g.patch===d.patch)return!0}return!1}return!0};return yt}const Fn=pr();var ur=hn((e,t,r)=>{try{t=new Fn(t,r)}catch{return!1}return t.test(e)}),Pn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function fr(e,...t){for(const r of t)_n(e,r);return e}function _n(e,t){for(const r of Object.keys(t))Sr(e,r,t[r],!0)}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dr(Object(r),!0).forEach(function(i){cn(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}const W=Ei;let Ie=Mi;const Ve=typeof window<"u"?window:void 0;Ie===void 0&&((Or=Ve==null?void 0:Ve.vl)!=null&&Or.compile)&&(Ie=Ve.vl);const Mn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},jn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Se={vega:"Vega","vega-lite":"Vega-Lite"},We={vega:W.version,"vega-lite":Ie?Ie.version:"not available"},zn={vega:e=>e,"vega-lite":(e,t)=>Ie.compile(e,{config:t}).spec},Un=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Gn="chart-wrapper";function gr(e,t,r,i){const n=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${r}</body></html>`,o=window.open("");o.document.write(n+e+a),o.document.title=`${Se[i]} JSON Source`}function mr(e){return(t=e)&&"load"in t?e:W.loader(e);var t}async function Bn(e,t,r={}){let i,n;ve(t)?(n=mr(r.loader),i=JSON.parse(await n.load(t))):i=t;const a=function(O){var c;const f=((c=O.usermeta)==null?void 0:c.embedOptions)??{};return ve(f.defaultStyle)&&(f.defaultStyle=!1),f}(i),o=a.loader;n&&!o||(n=mr(r.loader??o));const p=await vr(a,n),s=await vr(r,n),l=q(q({},fr(s,p)),{},{config:St(s.config??{},p.config??{})});return await async function(O,f,c={},b){const k=c.theme?St(nn[c.theme],c.config??{}):c.config,I=Ir(c.actions)?c.actions:fr({},Mn,c.actions??{}),T=q(q({},jn),c.i18n),S=c.renderer??"canvas",_=c.logLevel??W.Warn,B=c.downloadFileName??"visualization",$=typeof O=="string"?document.querySelector(O):O;if(!$)throw new Error(`${O} does not exist`);if(c.defaultStyle!==!1){const u="vega-embed-style",{root:g,rootContainer:h}=function(m){const w=m.getRootNode?m.getRootNode():document;return w instanceof ShadowRoot?{root:w,rootContainer:w}:{root:document,rootContainer:document.head??document.body}}($);if(!g.getElementById(u)){const m=document.createElement("style");m.id=u,m.innerHTML=c.defaultStyle===void 0||c.defaultStyle===!0?Pn.toString():c.defaultStyle,h.appendChild(m)}}const C=function(u,g){if(u.$schema){const h=Ft(u.$schema);g&&g!==h.library&&console.warn(`The given visualization spec is written in ${Se[h.library]}, but mode argument sets ${Se[g]??g}.`);const m=h.library;return ur(We[m],`^${h.version.slice(1)}`)||console.warn(`The input spec uses ${Se[m]} ${h.version}, but the current version of ${Se[m]} is v${We[m]}.`),m}return"mark"in u||"encoding"in u||"layer"in u||"hconcat"in u||"vconcat"in u||"facet"in u||"repeat"in u?"vega-lite":"marks"in u||"signals"in u||"scales"in u||"axes"in u?"vega":g??"vega"}(f,c.mode);let M=zn[C](f,k);if(C==="vega-lite"&&M.$schema){const u=Ft(M.$schema);ur(We.vega,`^${u.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${u.version}, but current version is v${We.vega}.`)}$.classList.add("vega-embed"),I&&$.classList.add("has-actions"),$.innerHTML="";let j=$;if(I){const u=document.createElement("div");u.classList.add(Gn),$.appendChild(u),j=u}const he=c.patch;if(he&&(M=he instanceof Function?he(M):ke(M,he,!0,!1).newDocument),c.formatLocale&&W.formatLocale(c.formatLocale),c.timeFormatLocale&&W.timeFormatLocale(c.timeFormatLocale),c.expressionFunctions)for(const u in c.expressionFunctions){const g=c.expressionFunctions[u];"fn"in g?W.expressionFunction(u,g.fn,g.visitor):g instanceof Function&&W.expressionFunction(u,g)}const{ast:$e}=c,Xe=W.parse(M,C==="vega-lite"?{}:k,{ast:$e}),z=new(c.viewClass||W.View)(Xe,q({loader:b,logLevel:_,renderer:S},$e?{expr:W.expressionInterpreter??c.expr??Pi}:{}));if(z.addSignalListener("autosize",(u,g)=>{const{type:h}=g;h=="fit-x"?(j.classList.add("fit-x"),j.classList.remove("fit-y")):h=="fit-y"?(j.classList.remove("fit-x"),j.classList.add("fit-y")):h=="fit"?j.classList.add("fit-x","fit-y"):j.classList.remove("fit-x","fit-y")}),c.tooltip!==!1){const u=typeof c.tooltip=="function"?c.tooltip:new an(c.tooltip===!0?{}:c.tooltip).call;z.tooltip(u)}let v,{hover:d}=c;if(d===void 0&&(d=C==="vega"),d){const{hoverSet:u,updateSet:g}=typeof d=="boolean"?{}:d;z.hover(u,g)}if(c&&(c.width!=null&&z.width(c.width),c.height!=null&&z.height(c.height),c.padding!=null&&z.padding(c.padding)),await z.initialize(j,c.bind).runAsync(),I!==!1){let u=$;if(c.defaultStyle!==!1||c.forceActionsMenu){const h=document.createElement("details");h.title=T.CLICK_TO_VIEW_ACTIONS,$.append(h),u=h;const m=document.createElement("summary");m.innerHTML=Un,h.append(m),v=w=>{h.contains(w.target)||h.removeAttribute("open")},document.addEventListener("click",v)}const g=document.createElement("div");if(u.append(g),g.classList.add("vega-actions"),I===!0||I.export!==!1){for(const h of["svg","png"])if(I===!0||I.export===!0||I.export[h]){const m=T[`${h.toUpperCase()}_ACTION`],w=document.createElement("a"),x=Je(c.scaleFactor)?c.scaleFactor[h]:c.scaleFactor;w.text=m,w.href="#",w.target="_blank",w.download=`${B}.${h}`,w.addEventListener("mousedown",async function(R){R.preventDefault();const E=await z.toImageURL(h,x);this.href=E}),g.append(w)}}if(I===!0||I.source!==!1){const h=document.createElement("a");h.text=T.SOURCE_ACTION,h.href="#",h.addEventListener("click",function(m){gr(nt(f),c.sourceHeader??"",c.sourceFooter??"",C),m.preventDefault()}),g.append(h)}if(C==="vega-lite"&&(I===!0||I.compiled!==!1)){const h=document.createElement("a");h.text=T.COMPILED_ACTION,h.href="#",h.addEventListener("click",function(m){gr(nt(M),c.sourceHeader??"",c.sourceFooter??"","vega"),m.preventDefault()}),g.append(h)}if(I===!0||I.editor!==!1){const h=c.editorUrl??"https://vega.github.io/editor/",m=document.createElement("a");m.text=T.EDITOR_ACTION,m.href="#",m.addEventListener("click",function(w){(function(x,R,E){const N=x.open(R),{origin:F}=new URL(R);let Le=40;x.addEventListener("message",function He(xr){xr.source===N&&(Le=0,x.removeEventListener("message",He,!1))},!1),setTimeout(function He(){Le<=0||(N.postMessage(E,F),setTimeout(He,250),Le-=1)},250)})(window,h,{config:k,mode:C,renderer:S,spec:nt(f)}),w.preventDefault()}),g.append(m)}}function y(){v&&document.removeEventListener("click",v),z.finalize()}return{view:z,spec:f,vgSpec:M,finalize:y,embedOptions:c}}(e,i,l,n)}async function vr(e,t){const r=ve(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ve(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return q(q(q({},e),i?{patch:i}:{}),r?{config:r}:{})}function Vn(e,t){Object.keys(t).forEach(r=>{(function(i,n,a){var o;a&&((o=a)&&{}.toString.call(o)==="[object Function]"?a(i.data(n)):i.change(n,W.changeset().remove(()=>!0).insert(a)))})(e,r,t[r])})}function Er(e){const t=new Set;return e.forEach(r=>{Object.keys(r).forEach(i=>{t.add(i)})}),t}const br=()=>{};function wt(e,t){const r=Object.keys(t);return r.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(n){console.warn("Cannot add invalid signal listener.",n)}}),r.length>0}function yr(e,t){const r=Object.keys(t);return r.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(n){console.warn("Cannot remove invalid signal listener.",n)}}),r.length>0}function Ot(e){const{spec:t,width:r,height:i}=e;return r!==void 0&&i!==void 0?{...t,width:r,height:i}:r!==void 0?{...t,width:r}:i!==void 0?{...t,height:i}:t}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class wr extends Y.PureComponent{constructor(){super(...arguments),Re(this,"containerRef",Y.createRef()),Re(this,"resultPromise",void 0),Re(this,"handleError",t=>{const{onError:r=br}=this.props;r(t,this.containerRef.current),console.warn(t)}),Re(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(r=>(r&&t(r.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const r=Er([this.props,t]);if(r.delete("className"),r.delete("signalListeners"),r.delete("spec"),r.delete("style"),r.delete("width"),r.delete("height"),Array.from(r).some(i=>this.props[i]!==t[i]))this.clearView(),this.createView();else{const i=function(o,p){if(o===p)return!1;const s={width:!1,height:!1,isExpensive:!1},l=Er([o,p]);return!l.has("width")||"width"in o&&"width"in p&&o.width===p.width||("width"in o&&typeof o.width=="number"?s.width=o.width:s.isExpensive=!0),!l.has("height")||"height"in o&&"height"in p&&o.height===p.height||("height"in o&&typeof o.height=="number"?s.height=o.height:s.isExpensive=!0),l.delete("width"),l.delete("height"),[...l].some(O=>!(O in o)||!(O in p)||!bi(o[O],p[O]))&&(s.isExpensive=!0),!(s.width===!1&&s.height===!1&&!s.isExpensive)&&s}(Ot(this.props),Ot(t)),{signalListeners:n}=this.props,{signalListeners:a}=t;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const o=!qe(n,a);this.modifyView(p=>{i.width!==!1&&p.width(i.width),i.height!==!1&&p.height(i.height),o&&(a&&yr(p,a),n&&wt(p,n)),p.run()})}else qe(n,a)||this.modifyView(o=>{a&&yr(o,a),n&&wt(o,n),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:r,signalListeners:i={},width:n,height:a,...o}=this.props;if(this.containerRef.current){const p=Ot(this.props);this.resultPromise=Bn(this.containerRef.current,p,o).then(s=>{if(s){const{view:l}=s;wt(l,i)&&l.run()}return s}).catch(this.handleError),r&&this.modifyView(r)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:r}=this.props;return Y.createElement("div",{ref:this.containerRef,className:t,style:r})}}function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xt.apply(this,arguments)}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Re(wr,"propTypes",{className:Rt.string,onError:Rt.func});class Nt extends Y.PureComponent{constructor(){super(...arguments),At(this,"vegaEmbed",Y.createRef()),At(this,"handleNewView",t=>{this.update();const{onNewView:r=br}=this.props;r(t)})}componentDidMount(){this.update()}componentDidUpdate(t){qe(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(r=>{Vn(r,t),r.resize().run()})}render(){const{data:t,...r}=this.props;return Y.createElement(wr,xt({ref:this.vegaEmbed},r,{onNewView:this.handleNewView}))}}function It(){return It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},It.apply(this,arguments)}function Wn(e){return Y.createElement(Nt,It({},e,{mode:"vega-lite"}))}At(Nt,"defaultProps",{data:{}});export{Nt as V,Wn as a};
