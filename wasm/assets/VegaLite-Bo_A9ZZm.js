var Ir;import{cC as xr,cD as Ar,cE as oe,cF as $e,cG as ot,cH as Lr,cI as Rr,b as V,cJ as st}from"./index-D4bXoNM3.js";import{a as $r,b as Tr,d as Sr,c as Cr,e as Fr,f as Dr,g as Pr,h as kr,i as _r,j as Mr,k as jr,l as zr,m as Ur,n as Gr,o as Br,p as Vr,q as Wr,r as Xr,s as Hr,t as Yr,u as qr,v as Jr,w as Qr,x as Kr,y as Zr,z as en,A as tn,B as rn,C as nn,D as on,E as sn,F as an,G as ln,H as cn,I as dn,J as fn,K as pn,L as hn,N as un,O as mn,P as gn,Q as En,R as vn,S as bn,T as yn}from"./compile-CQlZ79Z5.js";import{e as wn}from"./index-DZJOZ8C0.js";const at={};function Te(e,t){e===void 0&&(e=at),t===void 0&&(t=at);const r=Object.keys(e),n=Object.keys(t);return e===t||r.length===n.length&&r.every(a=>e[a]===t[a])}const On=/("(?:[^\\"]|\\.)*")|[:,]/g;function Se(e,t={}){const r=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),n=r===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:a}=t;return function l(s,f,o){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const i=JSON.stringify(s,a);if(i===void 0)return i;const u=n-f.length-o;if(i.length<=u){const c=i.replace(On,(d,b)=>b||`${d} `);if(c.length<=u)return c}if(a!=null&&(s=JSON.parse(i),a=void 0),typeof s=="object"&&s!==null){const c=f+r,d=[];let b,S,x=0;if(Array.isArray(s)){b="[",S="]";const{length:T}=s;for(;x<T;x++)d.push(l(s[x],c,x===T-1?0:1)||"null")}else{b="{",S="}";const T=Object.keys(s),{length:G}=T;for(;x<G;x++){const N=T[x],_=`${JSON.stringify(N)}: `,L=l(s[N],c,_.length+(x===G-1?0:1));L!==void 0&&d.push(_+L)}}if(d.length>0)return[b,r+d.join(`,
${c}`),S].join(`
${f}`)}return i}(e,"",0)}var In={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Nn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},xn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const An=Array.prototype.slice,W=(e,t,r)=>{const n=r?r(t[0]):t[0];return n[e].apply(n,An.call(t,1))};var Ln={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,r)=>Math.max(t,Math.min(r,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,r,n,a,l,s)=>new Date(e,t||0,r??1,n||0,a||0,l||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return W("join",arguments)},indexof:function(){return W("indexOf",arguments)},lastindexof:function(){return W("lastIndexOf",arguments)},slice:function(){return W("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(xr),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return W("substring",arguments,String)},split:function(){return W("split",arguments,String)},replace:function(){return W("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Rn=["view","item","group","xy","x","y"],Ce=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Ce.add(setImmediate);const $n={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const r=t.name;return e.memberDepth>0?r:r==="datum"?e.datum:r==="event"?e.event:r==="item"?e.item:In[r]||e.params["$"+r]},MemberExpression:(e,t)=>{const r=!t.computed,n=e(t.object);r&&(e.memberDepth+=1);const a=e(t.property);if(r&&(e.memberDepth-=1),!Ce.has(n[a]))return n[a];console.error(`Prevented interpretation of member "${a}" which could lead to insecure code execution`)},CallExpression:(e,t)=>{const r=t.arguments;let n=t.callee.name;return n.startsWith("_")&&(n=n.slice(1)),n==="if"?e(r[0])?e(r[1]):e(r[2]):(e.fn[n]||Ln[n]).apply(e.fn,r.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Nn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>xn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((r,n)=>{e.memberDepth+=1;const a=e(n.key);return e.memberDepth-=1,Ce.has(e(n.value))?console.error(`Prevented interpretation of property "${a}" which could lead to insecure code execution`):r[a]=e(n.value),r},{})};function se(e,t,r,n,a,l){const s=f=>$n[f.type](s,f);return s.memberDepth=0,s.fn=Object.create(t),s.params=r,s.datum=n,s.event=a,s.item=l,Rn.forEach(f=>s.fn[f]=function(){return a.vega[f](...arguments)}),s(e)}var Tn={operator(e,t){const r=t.ast,n=e.functions;return a=>se(r,n,a)},parameter(e,t){const r=t.ast,n=e.functions;return(a,l)=>se(r,n,l,a)},event(e,t){const r=t.ast,n=e.functions;return a=>se(r,n,void 0,void 0,a)},handler(e,t){const r=t.ast,n=e.functions;return(a,l)=>{const s=l.item&&l.item.datum;return se(r,n,a,s,l)}},encode(e,t){const{marktype:r,channels:n}=t,a=e.functions,l=r==="group"||r==="image"||r==="rect";return(s,f)=>{const o=s.datum;let i,u=0;for(const c in n)i=se(n[c].ast,a,f,o,void 0,s),s[c]!==i&&(s[c]=i,u=1);return r!=="rule"&&function(c,d,b){let S;d.x2&&(d.x?(b&&c.x>c.x2&&(S=c.x,c.x=c.x2,c.x2=S),c.width=c.x2-c.x):c.x=c.x2-(c.width||0)),d.xc&&(c.x=c.xc-(c.width||0)/2),d.y2&&(d.y?(b&&c.y>c.y2&&(S=c.y,c.y=c.y2,c.y2=S),c.height=c.y2-c.y):c.y=c.y2-(c.height||0)),d.yc&&(c.y=c.yc-(c.height||0)/2)}(s,n,l),u}}};const Sn="5.23.0",Cn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:$r,accessPathWithDatum:Tr,accessWithDatumToUnescapedPath:Sr,compile:Cr,contains:Fr,deepEqual:Dr,deleteNestedProperty:Pr,duplicate:kr,entries:_r,every:Mr,fieldIntersection:jr,flatAccessWithDatum:zr,getFirstDefined:Ur,hasIntersection:Gr,hasProperty:Br,hash:Vr,internalField:Wr,isBoolean:Xr,isEmpty:Hr,isEqual:Yr,isInternalField:qr,isNullOrFalse:Jr,isNumeric:Qr,keys:Kr,logicalExpr:Zr,mergeDeep:en,never:tn,normalize:rn,normalizeAngle:nn,omit:on,pick:sn,prefixGenerator:an,removePathFromField:ln,replaceAll:cn,replacePathInField:dn,resetIdCounter:fn,setEqual:pn,some:hn,stringify:un,titleCase:mn,unique:gn,uniqueId:En,vals:vn,varName:bn,version:Sn},Symbol.toStringTag,{value:"Module"}));function lt(e){const[t,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:r}}var Fn="2.15.0";const re="#fff",ct="#888",Dn={background:"#333",view:{stroke:ct},title:{color:re,subtitleColor:re},style:{"guide-label":{fill:re},"guide-title":{fill:re}},axis:{domainColor:re,gridColor:ct,tickColor:re}},X="#4572a7",Pn={background:"#fff",arc:{fill:X},area:{fill:X},line:{stroke:X,strokeWidth:2},path:{stroke:X},rect:{fill:X},shape:{stroke:X},symbol:{fill:X,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},H="#30a2da",Fe="#cbcbcb",dt="#f0f0f0",ft="#333",kn={arc:{fill:H},area:{fill:H},axis:{domainColor:Fe,grid:!0,gridColor:Fe,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:Fe,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:dt,group:{fill:dt},legend:{labelColor:ft,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:ft,titleFontSize:14,titlePadding:10},line:{stroke:H,strokeWidth:2},path:{stroke:H,strokeWidth:.5},rect:{fill:H},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:H},bar:{binSpacing:2,fill:H,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Y="#000",_n={group:{fill:"#e5e5e5"},arc:{fill:Y},area:{fill:Y},line:{stroke:Y},path:{stroke:Y},rect:{fill:Y},shape:{stroke:Y},symbol:{fill:Y,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},pt="Benton Gothic, sans-serif",q="#82c6df",De="Benton Gothic Bold, sans-serif",ht="normal",ae={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Mn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:De,fontSize:22,fontWeight:"normal"},arc:{fill:q},area:{fill:q},line:{stroke:q,strokeWidth:2},path:{stroke:q},rect:{fill:q},shape:{stroke:q},symbol:{fill:q,size:30},axis:{labelFont:pt,labelFontSize:11.5,labelFontWeight:"normal",titleFont:De,titleFontSize:13,titleFontWeight:ht},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:pt,labelFontSize:11.5,symbolType:"square",titleFont:De,titleFontSize:13,titleFontWeight:ht},range:{category:ae["category-6"],diverging:ae["fireandice-6"],heatmap:ae["fire-7"],ordinal:ae["fire-7"],ramp:ae["fire-7"]}},J="#ab5787",ge="#979797",jn={background:"#f9f9f9",arc:{fill:J},area:{fill:J},line:{stroke:J},path:{stroke:J},rect:{fill:J},shape:{stroke:J},symbol:{fill:J,size:30},axis:{domainColor:ge,domainWidth:.5,gridWidth:.2,labelColor:ge,tickColor:ge,tickWidth:.2,titleColor:ge},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Q="#3e5c69",zn={background:"#fff",arc:{fill:Q},area:{fill:Q},line:{stroke:Q},path:{stroke:Q},rect:{fill:Q},shape:{stroke:Q},symbol:{fill:Q},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},z="#1696d2",ut="#000000",Ee="Lato",Pe="Lato",le={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Un={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Ee},axisX:{domain:!0,domainColor:ut,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Pe,labelAngle:0,tickColor:ut,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Ee},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Pe,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Ee,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Pe,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Ee,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:le["six-groups-cat-1"],diverging:le["diverging-colors"],heatmap:le["diverging-colors"],ordinal:le["six-groups-seq"],ramp:le["shades-blue"]},area:{fill:z},rect:{fill:z},line:{color:z,stroke:z,strokeWidth:5},trail:{color:z,stroke:z,strokeWidth:0,size:1},path:{stroke:z,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:z,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:z,stroke:null}},arc:{fill:z},shape:{stroke:z},symbol:{fill:z,size:30}},K="#3366CC",mt="#ccc",ve="Arial, sans-serif",Gn={arc:{fill:K},area:{fill:K},path:{stroke:K},rect:{fill:K},shape:{stroke:K},symbol:{stroke:K},circle:{fill:K},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ve,fontSize:12},"guide-title":{font:ve,fontSize:12},"group-title":{font:ve,fontSize:12}},title:{font:ve,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:mt,tickColor:mt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ke=e=>e*(1/3+1),gt=ke(9),Et=ke(10),vt=ke(12),ce="Segoe UI",bt="wf_standard-font, helvetica, arial, sans-serif",yt="#252423",de="#605E5C",wt="transparent",U="#118DFF",Ot="#DEEFFF",It=[Ot,U],Bn={view:{stroke:wt},background:wt,font:ce,header:{titleFont:bt,titleFontSize:vt,titleColor:yt,labelFont:ce,labelFontSize:Et,labelColor:de},axis:{ticks:!1,grid:!1,domain:!1,labelColor:de,labelFontSize:gt,titleFont:bt,titleColor:yt,titleFontSize:vt,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:U},line:{stroke:U,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:ce,fontSize:gt,fill:de},arc:{fill:U},area:{fill:U,line:!0,opacity:.6},path:{stroke:U},rect:{fill:U},point:{fill:U,filled:!0,size:75},shape:{stroke:U},symbol:{fill:U,strokeWidth:1.5,size:50},legend:{titleFont:ce,titleFontWeight:"bold",titleColor:de,labelFont:ce,labelFontSize:Et,labelColor:de,symbolType:"circle",symbolSize:75},range:{category:[U,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:It,heatmap:It,ordinal:[Ot,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",U]}},_e='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',be={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Vn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Wn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function ye({theme:e,background:t}){const r=["white","g10"].includes(e)?"light":"dark",n=be.gridBg[e],a=be.textPrimary[e],l=be.textSecondary[e],s=r==="dark"?Vn:Wn,f=r==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:f},area:{fill:f},path:{stroke:f},rect:{fill:f},shape:{stroke:f},symbol:{stroke:f},circle:{fill:f},view:{fill:n,stroke:n},group:{fill:n},title:{color:a,anchor:"start",dy:-15,fontSize:16,font:_e,fontWeight:600},axis:{labelColor:l,labelFontSize:12,labelFont:'IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',labelFontWeight:400,titleColor:a,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:be.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:_e,fill:l,fontWeight:400},"guide-title":{font:_e,fill:l,fontWeight:400}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Xn=ye({theme:"white",background:"#ffffff"}),Hn=ye({theme:"g10",background:"#f4f4f4"}),Yn=ye({theme:"g90",background:"#262626"}),qn=ye({theme:"g100",background:"#161616"}),Jn=Fn,Qn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Hn,carbong100:qn,carbong90:Yn,carbonwhite:Xn,dark:Dn,excel:Pn,fivethirtyeight:kn,ggplot2:_n,googlecharts:Gn,latimes:Mn,powerbi:Bn,quartz:jn,urbaninstitute:Un,version:Jn,vox:zn},Symbol.toStringTag,{value:"Module"}));function Nt(e,t){return JSON.stringify(e,function(r){const n=[];return function(a,l){if(typeof l!="object"||l===null)return l;const s=n.indexOf(this)+1;return n.length=s,n.length>r?"[Object]":n.indexOf(l)>=0?"[Circular]":(n.push(l),l)}}(t))}var Kn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const xt="vg-tooltip-element",Zn={offsetX:10,offsetY:10,id:xt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(e,t,r,n){if(Ar(e))return`[${e.map(a=>t(oe(a)?a:Nt(a,r))).join(", ")}]`;if($e(e)){let a="";const{title:l,image:s,...f}=e;l&&(a+=`<h2>${t(l)}</h2>`),s&&(a+=`<img src="${new URL(t(s),n||location.href).href}">`);const o=Object.keys(f);if(o.length>0){a+="<table>";for(const i of o){let u=f[i];u!==void 0&&($e(u)&&(u=Nt(u,r)),a+=`<tr><td class="key">${t(i)}</td><td class="value">${t(u)}</td></tr>`)}a+="</table>"}return a||"{}"}return t(e)},baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function At(e,t,{offsetX:r,offsetY:n}){const a=Lt({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,r,n),l=["bottom-right","bottom-left","top-right","top-left"];for(const s of l)if(Rt(a[s],t))return a[s];return a["top-left"]}function Lt(e,t,r,n){const a=(e.x1+e.x2)/2,l=(e.y1+e.y2)/2,s=e.x1-t.width-r,f=a-t.width/2,o=e.x2+r,i=e.y1-t.height-n,u=l-t.height/2,c=e.y2+n;return{top:{x:f,y:i},bottom:{x:f,y:c},left:{x:s,y:u},right:{x:o,y:u},"top-left":{x:s,y:i},"top-right":{x:o,y:i},"bottom-left":{x:s,y:c},"bottom-right":{x:o,y:c}}}function Rt(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function ei(e,t,r){return e.clientX>=t.x&&e.clientX<=t.x+r.width&&e.clientY>=t.y&&e.clientY<=t.y+r.height}class ti{constructor(t){this.options={...Zn,...t};const r=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const n=document.createElement("style");n.setAttribute("id",this.options.styleId),n.innerHTML=function(l){if(!/^[A-Za-z]+[-:.\w]*$/.test(l))throw new Error("Invalid HTML ID");return Kn.toString().replace(xt,l)}(r);const a=document.head;a.childNodes.length>0?a.insertBefore(n,a.childNodes[0]):a.appendChild(n)}}tooltipHandler(t,r,n,a){if(this.el=document.getElementById(this.options.id),!this.el&&(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),a==null||a==="")return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(a,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:l,y:s}=this.options.anchor==="mark"?function(f,o,i,u,c){const{position:d,offsetX:b,offsetY:S}=c,x=function(N,_,L){const C=L.isVoronoi?L.datum.bounds:L.bounds;let F=N.left+_[0]+C.x1,P=N.top+_[1]+C.y1,k=L;for(;k.mark.group;)k=k.mark.group,F+=k.x??0,P+=k.y??0;return{x1:F,x2:F+(C.x2-C.x1),y1:P,y2:P+(C.y2-C.y1)}}(f._el.getBoundingClientRect(),f._origin,i),T=Lt(x,u,b,S),G=Array.isArray(d)?d:[d];for(const N of G)if(Rt(T[N],u)&&!ei(o,T[N],u))return T[N];return At(o,u,c)}(t,r,n,this.el.getBoundingClientRect(),this.options):At(r,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${l}px`}}var Me={},ri=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)a.hasOwnProperty(l)&&(n[l]=a[l])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ni=Object.prototype.hasOwnProperty;/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */function je(e,t){return ni.call(e,t)}function ze(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);var n=[];for(var a in e)je(e,a)&&n.push(a);return n}function M(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Ue(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0}function Z(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function $t(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Ge(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)if(Ge(e[t]))return!0}else if(typeof e=="object"){for(var n=ze(e),a=n.length,l=0;l<a;l++)if(Ge(e[n[l]]))return!0}}return!1}function Tt(e,t){var r=[e];for(var n in t){var a=typeof t[n]=="object"?JSON.stringify(t[n],null,2):t[n];a!==void 0&&r.push(n+": "+a)}return r.join(`
`)}var St=function(e){function t(r,n,a,l,s){var f=this.constructor,o=e.call(this,Tt(r,{name:n,index:a,operation:l,tree:s}))||this;return o.name=n,o.index=a,o.operation=l,o.tree=s,Object.setPrototypeOf(o,f.prototype),o.message=Tt(r,{name:n,index:a,operation:l,tree:s}),o}return ri(t,e),t}(Error),$=St,ii=M,ne={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=we(r,this.path);n&&(n=M(n));var a=ee(r,{op:"remove",path:this.from}).removed;return ee(r,{op:"add",path:this.path,value:a}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=we(r,this.from);return ee(r,{op:"add",path:this.path,value:M(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:fe(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},oi={add:function(e,t,r){return Ue(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:ne.move,copy:ne.copy,test:ne.test,_get:ne._get};function we(e,t){if(t=="")return e;var r={op:"_get",path:t};return ee(e,r),r.value}function ee(e,t,r,n,a,l){if(r===void 0&&(r=!1),n===void 0&&(n=!0),a===void 0&&(a=!0),l===void 0&&(l=0),r&&(typeof r=="function"?r(t,0,e,t.path):Ie(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=we(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=fe(e,t.value),s.test===!1)throw new $("Test operation failed","TEST_OPERATION_FAILED",l,t,e);return s.newDocument=e,s}if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(r)throw new $("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",l,t,e);return s}n||(e=M(e));var f=(t.path||"").split("/"),o=e,i=1,u=f.length,c=void 0,d=void 0,b=void 0;for(b=typeof r=="function"?r:Ie;;){if((d=f[i])&&d.indexOf("~")!=-1&&(d=$t(d)),a&&(d=="__proto__"||d=="prototype"&&i>0&&f[i-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&c===void 0&&(o[d]===void 0?c=f.slice(0,i).join("/"):i==u-1&&(c=t.path),c!==void 0&&b(t,0,e,c)),i++,Array.isArray(o)){if(d==="-")d=o.length;else{if(r&&!Ue(d))throw new $("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",l,t,e);Ue(d)&&(d=~~d)}if(i>=u){if(r&&t.op==="add"&&d>o.length)throw new $("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",l,t,e);if((s=oi[t.op].call(t,o,d,e)).test===!1)throw new $("Test operation failed","TEST_OPERATION_FAILED",l,t,e);return s}}else if(i>=u){if((s=ne[t.op].call(t,o,d,e)).test===!1)throw new $("Test operation failed","TEST_OPERATION_FAILED",l,t,e);return s}if(o=o[d],r&&i<u&&(!o||typeof o!="object"))throw new $("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",l,t,e)}}function Oe(e,t,r,n,a){if(n===void 0&&(n=!0),a===void 0&&(a=!0),r&&!Array.isArray(t))throw new $("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=M(e));for(var l=new Array(t.length),s=0,f=t.length;s<f;s++)l[s]=ee(e,t[s],r,!0,a,s),e=l[s].newDocument;return l.newDocument=e,l}function Ie(e,t,r,n){if(typeof e!="object"||e===null||Array.isArray(e))throw new $("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!ne[e.op])throw new $("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if(typeof e.path!="string")throw new $("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new $('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new $("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new $("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Ge(e.value))throw new $("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r){if(e.op=="add"){var a=e.path.split("/").length,l=n.split("/").length;if(a!==l+1&&a!==l)throw new $("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==n)throw new $("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if(e.op==="move"||e.op==="copy"){var s=Ct([{op:"_get",path:e.from,value:void 0}],r);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new $("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}function Ct(e,t,r){try{if(!Array.isArray(e))throw new $("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Oe(M(t),M(e),r||!0);else{r=r||Ie;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(a){if(a instanceof $)return a;throw a}}function fe(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r,n,a,l=Array.isArray(e),s=Array.isArray(t);if(l&&s){if((n=e.length)!=t.length)return!1;for(r=n;r--!==0;)if(!fe(e[r],t[r]))return!1;return!0}if(l!=s)return!1;var f=Object.keys(e);if((n=f.length)!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!t.hasOwnProperty(f[r]))return!1;for(r=n;r--!==0;)if(!fe(e[a=f[r]],t[a]))return!1;return!0}return e!=e&&t!=t}var si=Object.freeze({__proto__:null,JsonPatchError:$,_areEquals:fe,applyOperation:ee,applyPatch:Oe,applyReducer:function(e,t,r){var n=ee(e,t);if(n.test===!1)throw new $("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument},deepClone:ii,getValueByPointer:we,validate:Ct,validator:Ie}),Be=new WeakMap,ai=function(){return function(e){this.observers=new Map,this.obj=e}}(),li=function(){return function(e,t){this.callback=e,this.observer=t}}();/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */function Ve(e,t){t===void 0&&(t=!1);var r=Be.get(e.object);We(r.value,e.object,e.patches,"",t),e.patches.length&&Oe(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function We(e,t,r,n,a){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var l=ze(t),s=ze(e),f=!1,o=s.length-1;o>=0;o--){var i=e[c=s[o]];if(!je(t,c)||t[c]===void 0&&i!==void 0&&Array.isArray(t)===!1)Array.isArray(e)===Array.isArray(t)?(a&&r.push({op:"test",path:n+"/"+Z(c),value:M(i)}),r.push({op:"remove",path:n+"/"+Z(c)}),f=!0):(a&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}));else{var u=t[c];typeof i=="object"&&i!=null&&typeof u=="object"&&u!=null&&Array.isArray(i)===Array.isArray(u)?We(i,u,r,n+"/"+Z(c),a):i!==u&&(a&&r.push({op:"test",path:n+"/"+Z(c),value:M(i)}),r.push({op:"replace",path:n+"/"+Z(c),value:M(u)}))}}if(f||l.length!=s.length)for(o=0;o<l.length;o++){var c;je(e,c=l[o])||t[c]===void 0||r.push({op:"add",path:n+"/"+Z(c),value:M(t[c])})}}}var Ft,Dt,Pt,kt,ci=Object.freeze({__proto__:null,compare:function(e,t,r){r===void 0&&(r=!1);var n=[];return We(e,t,n,"",r),n},generate:Ve,observe:function(e,t){var r,n=function(f){return Be.get(f)}(e);if(n){var a=function(f,o){return f.observers.get(o)}(n,t);r=a&&a.observer}else n=new ai(e),Be.set(e,n);if(r)return r;if(r={},n.value=M(e),t){r.callback=t,r.next=null;var l=function(){Ve(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(l)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=[],r.object=e,r.unobserve=function(){Ve(r),clearTimeout(r.next),function(f,o){f.observers.delete(o.callback)}(n,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},n.observers.set(t,new li(t,r)),r},unobserve:function(e,t){t.unobserve()}});function di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xe(){if(kt)return Pt;kt=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Pt=r=>r?typeof r!="object"?e:r:t}Object.assign({},si,ci,{JsonPatchError:St,deepClone:M,escapePathComponent:Z,unescapePathComponent:$t});var _t,Mt,jt,zt,Ut,Gt,Bt,Vt,Wt,Xt,Ht,Yt,qt,Jt,Qt,Kt,Zt,er,tr,rr,nr,ir,or,sr,ar,He,lr,Ye,cr,dr,fr,qe={exports:{}};function Je(){return Mt?_t:(Mt=1,_t={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2})}function Ne(){return zt?jt:(zt=1,jt=typeof process=="object"&&Me&&Me.NODE_DEBUG&&/\bsemver\b/i.test(Me.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{})}function Qe(){return Ut||(Ut=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=Je(),l=Ne(),s=(t=e.exports={}).re=[],f=t.safeRe=[],o=t.src=[],i=t.t={};let u=0;const c="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",a],[c,n]],b=(S,x,T)=>{const G=(_=>{for(const[L,C]of d)_=_.split(`${L}*`).join(`${L}{0,${C}}`).split(`${L}+`).join(`${L}{1,${C}}`);return _})(x),N=u++;l(S,N,x),i[S]=N,o[N]=x,s[N]=new RegExp(x,T?"g":void 0),f[N]=new RegExp(G,T?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),b("MAINVERSION",`(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${o[i.NUMERICIDENTIFIER]}|${o[i.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${o[i.NUMERICIDENTIFIERLOOSE]}|${o[i.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${o[i.PRERELEASEIDENTIFIER]}(?:\\.${o[i.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${o[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[i.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${c}+`),b("BUILD",`(?:\\+(${o[i.BUILDIDENTIFIER]}(?:\\.${o[i.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${o[i.MAINVERSION]}${o[i.PRERELEASE]}?${o[i.BUILD]}?`),b("FULL",`^${o[i.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${o[i.MAINVERSIONLOOSE]}${o[i.PRERELEASELOOSE]}?${o[i.BUILD]}?`),b("LOOSE",`^${o[i.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${o[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${o[i.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:${o[i.PRERELEASE]})?${o[i.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:${o[i.PRERELEASELOOSE]})?${o[i.BUILD]}?)?)?`),b("XRANGE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),b("COERCE",`${o[i.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",o[i.COERCEPLAIN]+`(?:${o[i.PRERELEASE]})?(?:${o[i.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",o[i.COERCE],!0),b("COERCERTLFULL",o[i.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${o[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${o[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${o[i.LONECARET]}${o[i.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${o[i.LONECARET]}${o[i.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${o[i.GTLT]}\\s*(${o[i.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]}|${o[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${o[i.XRANGEPLAIN]})\\s+-\\s+(${o[i.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${o[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[i.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(qe,qe.exports)),qe.exports}function Ke(){if(Wt)return Vt;Wt=1;const e=Ne(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=Je(),{safeRe:n,t:a}=Qe(),l=Xe(),{compareIdentifiers:s}=function(){if(Bt)return Gt;Bt=1;const o=/^[0-9]+$/,i=(u,c)=>{const d=o.test(u),b=o.test(c);return d&&b&&(u=+u,c=+c),u===c?0:d&&!b?-1:b&&!d?1:u<c?-1:1};return Gt={compareIdentifiers:i,rcompareIdentifiers:(u,c)=>i(c,u)}}();class f{constructor(i,u){if(u=l(u),i instanceof f){if(i.loose===!!u.loose&&i.includePrerelease===!!u.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",i,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const c=i.trim().match(u.loose?n[a.LOOSE]:n[a.FULL]);if(!c)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const b=+d;if(b>=0&&b<r)return b}return d}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(e("SemVer.compare",this.version,this.options,i),!(i instanceof f)){if(typeof i=="string"&&i===this.version)return 0;i=new f(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof f||(i=new f(i,this.options)),s(this.major,i.major)||s(this.minor,i.minor)||s(this.patch,i.patch)}comparePre(i){if(i instanceof f||(i=new f(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let u=0;do{const c=this.prerelease[u],d=i.prerelease[u];if(e("prerelease compare",u,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c!==d)return s(c,d)}while(++u)}compareBuild(i){i instanceof f||(i=new f(i,this.options));let u=0;do{const c=this.build[u],d=i.build[u];if(e("build compare",u,c,d),c===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(c===void 0)return-1;if(c!==d)return s(c,d)}while(++u)}inc(i,u,c){switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,c),this.inc("pre",u,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,c),this.inc("pre",u,c);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(c)?1:0;if(!u&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let b=this.prerelease.length;for(;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);if(b===-1){if(u===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(u){let b=[u,d];c===!1&&(b=[u]),s(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=b):this.prerelease=b}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Vt=f}function ie(){if(Ht)return Xt;Ht=1;const e=Ke();return Xt=(t,r,n)=>new e(t,n).compare(new e(r,n))}function fi(){if(ar)return sr;ar=1;const e=function(){if(qt)return Yt;qt=1;const s=ie();return Yt=(f,o,i)=>s(f,o,i)===0}(),t=function(){if(Qt)return Jt;Qt=1;const s=ie();return Jt=(f,o,i)=>s(f,o,i)!==0}(),r=function(){if(Zt)return Kt;Zt=1;const s=ie();return Kt=(f,o,i)=>s(f,o,i)>0}(),n=function(){if(tr)return er;tr=1;const s=ie();return er=(f,o,i)=>s(f,o,i)>=0}(),a=function(){if(nr)return rr;nr=1;const s=ie();return rr=(f,o,i)=>s(f,o,i)<0}(),l=function(){if(or)return ir;or=1;const s=ie();return ir=(f,o,i)=>s(f,o,i)<=0}();return sr=(s,f,o,i)=>{switch(f){case"===":return typeof s=="object"&&(s=s.version),typeof o=="object"&&(o=o.version),s===o;case"!==":return typeof s=="object"&&(s=s.version),typeof o=="object"&&(o=o.version),s!==o;case"":case"=":case"==":return e(s,o,i);case"!=":return t(s,o,i);case">":return r(s,o,i);case">=":return n(s,o,i);case"<":return a(s,o,i);case"<=":return l(s,o,i);default:throw new TypeError(`Invalid operator: ${f}`)}}}function pr(){if(cr)return Ye;cr=1;const e=/\s+/g;class t{constructor(m,p){if(p=n(p),m instanceof t)return m.loose===!!p.loose&&m.includePrerelease===!!p.includePrerelease?m:new t(m.raw,p);if(m instanceof a)return this.raw=m.value,this.set=[[m]],this.formatted=void 0,this;if(this.options=p,this.loose=!!p.loose,this.includePrerelease=!!p.includePrerelease,this.raw=m.trim().replace(e," "),this.set=this.raw.split("||").map(g=>this.parseRange(g.trim())).filter(g=>g.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const g=this.set[0];if(this.set=this.set.filter(h=>!S(h[0])),this.set.length===0)this.set=[g];else if(this.set.length>1){for(const h of this.set)if(h.length===1&&x(h[0])){this.set=[h];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let m=0;m<this.set.length;m++){m>0&&(this.formatted+="||");const p=this.set[m];for(let g=0;g<p.length;g++)g>0&&(this.formatted+=" "),this.formatted+=p[g].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(m){const p=((this.options.includePrerelease&&d)|(this.options.loose&&b))+":"+m,g=r.get(p);if(g)return g;const h=this.options.loose,E=h?f[o.HYPHENRANGELOOSE]:f[o.HYPHENRANGE];m=m.replace(E,j(this.options.includePrerelease)),l("hyphen replace",m),m=m.replace(f[o.COMPARATORTRIM],i),l("comparator trim",m),m=m.replace(f[o.TILDETRIM],u),l("tilde trim",m),m=m.replace(f[o.CARETTRIM],c),l("caret trim",m);let w=m.split(" ").map(y=>G(y,this.options)).join(" ").split(/\s+/).map(y=>Le(y,this.options));h&&(w=w.filter(y=>(l("loose invalid filter",y,this.options),!!y.match(f[o.COMPARATORLOOSE])))),l("range list",w);const O=new Map,I=w.map(y=>new a(y,this.options));for(const y of I){if(S(y))return[y];O.set(y.value,y)}O.size>1&&O.has("")&&O.delete("");const R=[...O.values()];return r.set(p,R),R}intersects(m,p){if(!(m instanceof t))throw new TypeError("a Range is required");return this.set.some(g=>T(g,p)&&m.set.some(h=>T(h,p)&&g.every(E=>h.every(w=>E.intersects(w,p)))))}test(m){if(!m)return!1;if(typeof m=="string")try{m=new s(m,this.options)}catch{return!1}for(let p=0;p<this.set.length;p++)if(te(this.set[p],m,this.options))return!0;return!1}}Ye=t;const r=new(Dt?Ft:(Dt=1,Ft=class{constructor(){this.max=1e3,this.map=new Map}get(v){const m=this.map.get(v);return m===void 0?void 0:(this.map.delete(v),this.map.set(v,m),m)}delete(v){return this.map.delete(v)}set(v,m){if(!this.delete(v)&&m!==void 0){if(this.map.size>=this.max){const p=this.map.keys().next().value;this.delete(p)}this.map.set(v,m)}return this}})),n=Xe(),a=function(){if(lr)return He;lr=1;const v=Symbol("SemVer ANY");class m{static get ANY(){return v}constructor(y,A){if(A=p(A),y instanceof m){if(y.loose===!!A.loose)return y;y=y.value}y=y.trim().split(/\s+/).join(" "),w("comparator",y,A),this.options=A,this.loose=!!A.loose,this.parse(y),this.semver===v?this.value="":this.value=this.operator+this.semver.version,w("comp",this)}parse(y){const A=this.options.loose?g[h.COMPARATORLOOSE]:g[h.COMPARATOR],D=y.match(A);if(!D)throw new TypeError(`Invalid comparator: ${y}`);this.operator=D[1]!==void 0?D[1]:"",this.operator==="="&&(this.operator=""),D[2]?this.semver=new O(D[2],this.options.loose):this.semver=v}toString(){return this.value}test(y){if(w("Comparator.test",y,this.options.loose),this.semver===v||y===v)return!0;if(typeof y=="string")try{y=new O(y,this.options)}catch{return!1}return E(y,this.operator,this.semver,this.options)}intersects(y,A){if(!(y instanceof m))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""||new I(y.value,A).test(this.value):y.operator===""?y.value===""||new I(this.value,A).test(y.semver):!((A=p(A)).includePrerelease&&(this.value==="<0.0.0-0"||y.value==="<0.0.0-0")||!A.includePrerelease&&(this.value.startsWith("<0.0.0")||y.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!y.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!y.operator.startsWith("<"))&&(this.semver.version!==y.semver.version||!this.operator.includes("=")||!y.operator.includes("="))&&!(E(this.semver,"<",y.semver,A)&&this.operator.startsWith(">")&&y.operator.startsWith("<"))&&!(E(this.semver,">",y.semver,A)&&this.operator.startsWith("<")&&y.operator.startsWith(">")))}}He=m;const p=Xe(),{safeRe:g,t:h}=Qe(),E=fi(),w=Ne(),O=Ke(),I=pr();return He}(),l=Ne(),s=Ke(),{safeRe:f,t:o,comparatorTrimReplace:i,tildeTrimReplace:u,caretTrimReplace:c}=Qe(),{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:b}=Je(),S=v=>v.value==="<0.0.0-0",x=v=>v.value==="",T=(v,m)=>{let p=!0;const g=v.slice();let h=g.pop();for(;p&&g.length;)p=g.every(E=>h.intersects(E,m)),h=g.pop();return p},G=(v,m)=>(l("comp",v,m),v=C(v,m),l("caret",v),v=_(v,m),l("tildes",v),v=P(v,m),l("xrange",v),v=me(v,m),l("stars",v),v),N=v=>!v||v.toLowerCase()==="x"||v==="*",_=(v,m)=>v.trim().split(/\s+/).map(p=>L(p,m)).join(" "),L=(v,m)=>{const p=m.loose?f[o.TILDELOOSE]:f[o.TILDE];return v.replace(p,(g,h,E,w,O)=>{let I;return l("tilde",v,g,h,E,w,O),N(h)?I="":N(E)?I=`>=${h}.0.0 <${+h+1}.0.0-0`:N(w)?I=`>=${h}.${E}.0 <${h}.${+E+1}.0-0`:O?(l("replaceTilde pr",O),I=`>=${h}.${E}.${w}-${O} <${h}.${+E+1}.0-0`):I=`>=${h}.${E}.${w} <${h}.${+E+1}.0-0`,l("tilde return",I),I})},C=(v,m)=>v.trim().split(/\s+/).map(p=>F(p,m)).join(" "),F=(v,m)=>{l("caret",v,m);const p=m.loose?f[o.CARETLOOSE]:f[o.CARET],g=m.includePrerelease?"-0":"";return v.replace(p,(h,E,w,O,I)=>{let R;return l("caret",v,h,E,w,O,I),N(E)?R="":N(w)?R=`>=${E}.0.0${g} <${+E+1}.0.0-0`:N(O)?R=E==="0"?`>=${E}.${w}.0${g} <${E}.${+w+1}.0-0`:`>=${E}.${w}.0${g} <${+E+1}.0.0-0`:I?(l("replaceCaret pr",I),R=E==="0"?w==="0"?`>=${E}.${w}.${O}-${I} <${E}.${w}.${+O+1}-0`:`>=${E}.${w}.${O}-${I} <${E}.${+w+1}.0-0`:`>=${E}.${w}.${O}-${I} <${+E+1}.0.0-0`):(l("no pr"),R=E==="0"?w==="0"?`>=${E}.${w}.${O}${g} <${E}.${w}.${+O+1}-0`:`>=${E}.${w}.${O}${g} <${E}.${+w+1}.0-0`:`>=${E}.${w}.${O} <${+E+1}.0.0-0`),l("caret return",R),R})},P=(v,m)=>(l("replaceXRanges",v,m),v.split(/\s+/).map(p=>k(p,m)).join(" ")),k=(v,m)=>{v=v.trim();const p=m.loose?f[o.XRANGELOOSE]:f[o.XRANGE];return v.replace(p,(g,h,E,w,O,I)=>{l("xRange",v,g,h,E,w,O,I);const R=N(E),y=R||N(w),A=y||N(O),D=A;return h==="="&&D&&(h=""),I=m.includePrerelease?"-0":"",R?g=h===">"||h==="<"?"<0.0.0-0":"*":h&&D?(y&&(w=0),O=0,h===">"?(h=">=",y?(E=+E+1,w=0,O=0):(w=+w+1,O=0)):h==="<="&&(h="<",y?E=+E+1:w=+w+1),h==="<"&&(I="-0"),g=`${h+E}.${w}.${O}${I}`):y?g=`>=${E}.0.0${I} <${+E+1}.0.0-0`:A&&(g=`>=${E}.${w}.0${I} <${E}.${+w+1}.0-0`),l("xRange return",g),g})},me=(v,m)=>(l("replaceStars",v,m),v.trim().replace(f[o.STAR],"")),Le=(v,m)=>(l("replaceGTE0",v,m),v.trim().replace(f[m.includePrerelease?o.GTE0PRE:o.GTE0],"")),j=v=>(m,p,g,h,E,w,O,I,R,y,A,D)=>`${p=N(g)?"":N(h)?`>=${g}.0.0${v?"-0":""}`:N(E)?`>=${g}.${h}.0${v?"-0":""}`:w?`>=${p}`:`>=${p}${v?"-0":""}`} ${I=N(R)?"":N(y)?`<${+R+1}.0.0-0`:N(A)?`<${R}.${+y+1}.0-0`:D?`<=${R}.${y}.${A}-${D}`:v?`<${R}.${y}.${+A+1}-0`:`<=${I}`}`.trim(),te=(v,m,p)=>{for(let g=0;g<v.length;g++)if(!v[g].test(m))return!1;if(m.prerelease.length&&!p.includePrerelease){for(let g=0;g<v.length;g++)if(l(v[g].semver),v[g].semver!==a.ANY&&v[g].semver.prerelease.length>0){const h=v[g].semver;if(h.major===m.major&&h.minor===m.minor&&h.patch===m.patch)return!0}return!1}return!0};return Ye}var hr=di(function(){if(fr)return dr;fr=1;const e=pr();return dr=(t,r,n)=>{try{r=new e(r,n)}catch{return!1}return r.test(t)}}()),pi=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function ur(e,...t){for(const r of t)hi(e,r);return e}function hi(e,t){for(const r of Object.keys(t))Rr(e,r,t[r],!0)}const B=yn;let pe=Cn;const xe=typeof window<"u"?window:void 0;pe===void 0&&((Ir=xe==null?void 0:xe.vl)!=null&&Ir.compile)&&(pe=xe.vl);const ui={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},mi={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},he={vega:"Vega","vega-lite":"Vega-Lite"},Ae={vega:B.version,"vega-lite":pe?pe.version:"not available"},gi={vega:e=>e,"vega-lite":(e,t)=>pe.compile(e,{config:t}).spec},Ei=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,vi="chart-wrapper";function mr(e,t,r,n){const a=`<html><head>${t}</head><body><pre><code class="json">`,l=`</code></pre>${r}</body></html>`,s=window.open("");s.document.write(a+e+l),s.document.title=`${he[n]} JSON Source`}function gr(e){return!(!e||!("load"in e))}function Er(e){return gr(e)?e:B.loader(e)}async function bi(e,t,r={}){let n,a;oe(t)?(a=Er(r.loader),n=JSON.parse(await a.load(t))):n=t;const l=function(u){var d;const c=((d=u.usermeta)==null?void 0:d.embedOptions)??{};return oe(c.defaultStyle)&&(c.defaultStyle=!1),c}(n),s=l.loader;a&&!s||(a=Er(r.loader??s));const f=await vr(l,a),o=await vr(r,a),i={...ur(o,f),config:ot(o.config??{},f.config??{})};return await async function(u,c,d={},b){const S=d.theme?ot(Qn[d.theme],d.config??{}):d.config,x=Lr(d.actions)?d.actions:ur({},ui,d.actions??{}),T={...mi,...d.i18n},G=d.renderer??"canvas",N=d.logLevel??B.Warn,_=d.downloadFileName??"visualization",L=typeof u=="string"?document.querySelector(u):u;if(!L)throw new Error(`${u} does not exist`);if(d.defaultStyle!==!1){const p="vega-embed-style",{root:g,rootContainer:h}=function(E){const w=E.getRootNode?E.getRootNode():document;return w instanceof ShadowRoot?{root:w,rootContainer:w}:{root:document,rootContainer:document.head??document.body}}(L);if(!g.getElementById(p)){const E=document.createElement("style");E.id=p,E.innerHTML=d.defaultStyle===void 0||d.defaultStyle===!0?pi.toString():d.defaultStyle,h.appendChild(E)}}const C=function(p,g){if(p.$schema){const h=lt(p.$schema);g&&g!==h.library&&console.warn(`The given visualization spec is written in ${he[h.library]}, but mode argument sets ${he[g]??g}.`);const E=h.library;return hr(Ae[E],`^${h.version.slice(1)}`)||console.warn(`The input spec uses ${he[E]} ${h.version}, but the current version of ${he[E]} is v${Ae[E]}.`),E}return"mark"in p||"encoding"in p||"layer"in p||"hconcat"in p||"vconcat"in p||"facet"in p||"repeat"in p?"vega-lite":"marks"in p||"signals"in p||"scales"in p||"axes"in p?"vega":g??"vega"}(c,d.mode);let F=gi[C](c,S);if(C==="vega-lite"&&F.$schema){const p=lt(F.$schema);hr(Ae.vega,`^${p.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${p.version}, but current version is v${Ae.vega}.`)}L.classList.add("vega-embed"),x&&L.classList.add("has-actions"),L.innerHTML="";let P=L;if(x){const p=document.createElement("div");p.classList.add(vi),L.appendChild(p),P=p}const k=d.patch;if(k&&(F=k instanceof Function?k(F):Oe(F,k,!0,!1).newDocument),d.formatLocale&&B.formatLocale(d.formatLocale),d.timeFormatLocale&&B.timeFormatLocale(d.timeFormatLocale),d.expressionFunctions)for(const p in d.expressionFunctions){const g=d.expressionFunctions[p];"fn"in g?B.expressionFunction(p,g.fn,g.visitor):g instanceof Function&&B.expressionFunction(p,g)}const{ast:me}=d,Le=B.parse(F,C==="vega-lite"?{}:S,{ast:me}),j=new(d.viewClass||B.View)(Le,{loader:b,logLevel:N,renderer:G,...me?{expr:B.expressionInterpreter??d.expr??Tn}:{}});if(j.addSignalListener("autosize",(p,g)=>{const{type:h}=g;h=="fit-x"?(P.classList.add("fit-x"),P.classList.remove("fit-y")):h=="fit-y"?(P.classList.remove("fit-x"),P.classList.add("fit-y")):h=="fit"?P.classList.add("fit-x","fit-y"):P.classList.remove("fit-x","fit-y")}),d.tooltip!==!1){const{loader:p,tooltip:g}=d,h=p&&!gr(p)?p==null?void 0:p.baseURL:void 0,E=typeof g=="function"?g:new ti({baseURL:h,...g===!0?{}:g}).call;j.tooltip(E)}let te,{hover:v}=d;if(v===void 0&&(v=C==="vega"),v){const{hoverSet:p,updateSet:g}=typeof v=="boolean"?{}:v;j.hover(p,g)}if(d&&(d.width!=null&&j.width(d.width),d.height!=null&&j.height(d.height),d.padding!=null&&j.padding(d.padding)),await j.initialize(P,d.bind).runAsync(),x!==!1){let p=L;if(d.defaultStyle!==!1||d.forceActionsMenu){const h=document.createElement("details");h.title=T.CLICK_TO_VIEW_ACTIONS,L.append(h),p=h;const E=document.createElement("summary");E.innerHTML=Ei,h.append(E),te=w=>{h.contains(w.target)||h.removeAttribute("open")},document.addEventListener("click",te)}const g=document.createElement("div");if(p.append(g),g.classList.add("vega-actions"),x===!0||x.export!==!1){for(const h of["svg","png"])if(x===!0||x.export===!0||x.export[h]){const E=T[`${h.toUpperCase()}_ACTION`],w=document.createElement("a"),O=$e(d.scaleFactor)?d.scaleFactor[h]:d.scaleFactor;w.text=E,w.href="#",w.target="_blank",w.download=`${_}.${h}`,w.addEventListener("mousedown",async function(I){I.preventDefault();const R=await j.toImageURL(h,O);this.href=R}),g.append(w)}}if(x===!0||x.source!==!1){const h=document.createElement("a");h.text=T.SOURCE_ACTION,h.href="#",h.addEventListener("click",function(E){mr(Se(c),d.sourceHeader??"",d.sourceFooter??"",C),E.preventDefault()}),g.append(h)}if(C==="vega-lite"&&(x===!0||x.compiled!==!1)){const h=document.createElement("a");h.text=T.COMPILED_ACTION,h.href="#",h.addEventListener("click",function(E){mr(Se(F),d.sourceHeader??"",d.sourceFooter??"","vega"),E.preventDefault()}),g.append(h)}if(x===!0||x.editor!==!1){const h=d.editorUrl??"https://vega.github.io/editor/",E=document.createElement("a");E.text=T.EDITOR_ACTION,E.href="#",E.addEventListener("click",function(w){(function(O,I,R){const y=O.open(I),{origin:A}=new URL(I);let D=40;O.addEventListener("message",function Re(Nr){Nr.source===y&&(D=0,O.removeEventListener("message",Re,!1))},!1),setTimeout(function Re(){D<=0||(y.postMessage(R,A),setTimeout(Re,250),D-=1)},250)})(window,h,{config:S,mode:k?"vega":C,renderer:G,spec:Se(k?F:c)}),w.preventDefault()}),g.append(E)}}function m(){te&&document.removeEventListener("click",te),j.finalize()}return{view:j,spec:c,vgSpec:F,finalize:m,embedOptions:d}}(e,n,i,a)}async function vr(e,t){const r=oe(e.config)?JSON.parse(await t.load(e.config)):e.config??{},n=oe(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...n?{patch:n}:{},...r?{config:r}:{}}}function yi(e,t){Object.keys(t).forEach(r=>{(function(n,a,l){var s;l&&((s=l)&&{}.toString.call(s)==="[object Function]"?l(n.data(a)):n.change(a,B.changeset().remove(()=>!0).insert(l)))})(e,r,t[r])})}function br(e){const t=new Set;return e.forEach(r=>{Object.keys(r).forEach(n=>{t.add(n)})}),t}const yr=()=>{};function Ze(e,t){const r=Object.keys(t);return r.forEach(n=>{try{e.addSignalListener(n,t[n])}catch(a){console.warn("Cannot add invalid signal listener.",a)}}),r.length>0}function wr(e,t){const r=Object.keys(t);return r.forEach(n=>{try{e.removeSignalListener(n,t[n])}catch(a){console.warn("Cannot remove invalid signal listener.",a)}}),r.length>0}function et(e){const{spec:t,width:r,height:n}=e;return r!==void 0&&n!==void 0?{...t,width:r,height:n}:r!==void 0?{...t,width:r}:n!==void 0?{...t,height:n}:t}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Or extends V.PureComponent{constructor(){super(...arguments),ue(this,"containerRef",V.createRef()),ue(this,"resultPromise",void 0),ue(this,"handleError",t=>{const{onError:r=yr}=this.props;r(t,this.containerRef.current),console.warn(t)}),ue(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(r=>(r&&t(r.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const r=br([this.props,t]);if(r.delete("className"),r.delete("signalListeners"),r.delete("spec"),r.delete("style"),r.delete("width"),r.delete("height"),Array.from(r).some(n=>this.props[n]!==t[n]))this.clearView(),this.createView();else{const n=function(s,f){if(s===f)return!1;const o={width:!1,height:!1,isExpensive:!1},i=br([s,f]);return!i.has("width")||"width"in s&&"width"in f&&s.width===f.width||("width"in s&&typeof s.width=="number"?o.width=s.width:o.isExpensive=!0),!i.has("height")||"height"in s&&"height"in f&&s.height===f.height||("height"in s&&typeof s.height=="number"?o.height=s.height:o.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(u=>!(u in s)||!(u in f)||!wn(s[u],f[u]))&&(o.isExpensive=!0),!(o.width===!1&&o.height===!1&&!o.isExpensive)&&o}(et(this.props),et(t)),{signalListeners:a}=this.props,{signalListeners:l}=t;if(n)if(n.isExpensive)this.clearView(),this.createView();else{const s=!Te(a,l);this.modifyView(f=>{n.width!==!1&&f.width(n.width),n.height!==!1&&f.height(n.height),s&&(l&&wr(f,l),a&&Ze(f,a)),f.run()})}else Te(a,l)||this.modifyView(s=>{l&&wr(s,l),a&&Ze(s,a),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:r,signalListeners:n={},width:a,height:l,...s}=this.props;if(this.containerRef.current){const f=et(this.props);this.resultPromise=bi(this.containerRef.current,f,s).then(o=>{if(o){const{view:i}=o;Ze(i,n)&&i.run()}return o}).catch(this.handleError),r&&this.modifyView(r)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:r}=this.props;return V.createElement("div",{ref:this.containerRef,className:t,style:r})}}function tt(){return tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tt.apply(this,arguments)}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ue(Or,"propTypes",{className:st.string,onError:st.func});class nt extends V.PureComponent{constructor(){super(...arguments),rt(this,"vegaEmbed",V.createRef()),rt(this,"handleNewView",t=>{this.update();const{onNewView:r=yr}=this.props;r(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Te(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(r=>{yi(r,t),r.resize().run()})}render(){const{data:t,...r}=this.props;return V.createElement(Or,tt({ref:this.vegaEmbed},r,{onNewView:this.handleNewView}))}}function it(){return it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},it.apply(this,arguments)}function wi(e){return V.createElement(nt,it({},e,{mode:"vega-lite"}))}rt(nt,"defaultProps",{data:{}});export{nt as V,wi as a};
