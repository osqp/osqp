import{s as b}from"./chunk-DZLz74EQ.js";import{d as g,l as k}from"./jotai-BTnrNcC1.js";import{Zn as v,ar as y,et as F,lr as x,p,w as D}from"./cells-A69p56PE.js";import{t as H}from"./compiler-runtime-Cr9loedd.js";import{u as V}from"./hotkeys-ClCtr3_I.js";import{r as Z}from"./requests-BACZP_uj.js";import{o as _}from"./dist-8_YHxBVW.js";import{n as i}from"./useEvent-CRDKqG3C.js";var u=b(H(),1);const w=g(!1);function j(){let r=(0,u.c)(2),t=f(),n;return r[0]===t?n=r[1]:(n=()=>t(x(p())),r[0]=t,r[1]=n),i(n)}function q(r){let t=(0,u.c)(3),n=f(),o;return t[0]!==r||t[1]!==n?(o=()=>{r!==void 0&&n([r])},t[0]=r,t[1]=n,t[2]=o):o=t[2],i(o)}function z(){let r=(0,u.c)(2),t=f(),n;return r[0]===t?n=r[1]:(n=()=>t(y(p())),r[0]=t,r[1]=n),i(n)}function f(){let r=(0,u.c)(4),{prepareForRun:t}=D(),{sendRun:n}=Z(),o=k(w),e;return r[0]!==t||r[1]!==n||r[2]!==o?(e=async s=>{if(s.length===0)return;let l=p();return o(!0),I({cellIds:s,sendRun:n,prepareForRun:t,notebook:l})},r[0]=t,r[1]=n,r[2]=o,r[3]=e):e=r[3],i(e)}async function I({cellIds:r,sendRun:t,prepareForRun:n,notebook:o}){var d,R,h;if(r.length===0)return;let{cellHandles:e,cellData:s}=o,l=[];for(let a of r){let c=(R=(d=e[a])==null?void 0:d.current)==null?void 0:R.editorView,m;c?(v(c)!=="markdown"&&_(c),m=F(c)):m=((h=s[a])==null?void 0:h.code)||"",l.push(m),n({cellId:a})}await t({cellIds:r,codes:l}).catch(a=>{V.error(a)})}export{f as a,q as i,I as n,j as o,z as r,w as t};
