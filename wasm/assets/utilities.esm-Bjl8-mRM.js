var jn=Object.defineProperty;var Tn=(t,e,n)=>e in t?jn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var d=(t,e,n)=>Tn(t,typeof e!="symbol"?e+"":e,n);var de;import{s as we}from"./chunk-DZLz74EQ.js";import{d as ie,n as Be,s as Ne}from"./jotai-BTnrNcC1.js";import{t as Hn}from"./react-BcIddLXZ.js";import{Nr as $n,Or as On,Pr as ve,Sr as Un,b as Wn,y as Bn}from"./cells-A69p56PE.js";import{A as xe,C as gt,F as Se,L as Gn,O as Vn,P as Xn,V as Yn,w as yt,z as bt}from"./zod-U2NFpcFA.js";import{t as wt}from"./compiler-runtime-Cr9loedd.js";import{t as Jn}from"./debounce-BUM2losY.js";import{t as Kn}from"./_baseSet-L2qemYhz.js";import{f as $,u as G}from"./hotkeys-ClCtr3_I.js";import{t as Qn}from"./invariant-D5a0EE05.js";import{x as Zn}from"./utils-DEDX0RLo.js";import{g as er}from"./config-C6qInAhC.js";import{t as tr}from"./api-YJHlT7KM.js";import{n as vt}from"./globals-Dp5TPAWC.js";import{t as xt}from"./ErrorBoundary-_uEOjNWh.js";import{t as nr}from"./jsx-runtime-mwDPpfh_.js";import{t as rr}from"./cn-ZXtYmczU.js";import{t as ar}from"./button-ZC2axIBq.js";import{G as ir,q as lr}from"./Output-DWmT-7NV.js";import{t as St}from"./requests-BACZP_uj.js";import{t as Ge}from"./Deferred-NfAvvkGM.js";import{t as or}from"./uuid-D0hUC3Qw.js";import{n as sr}from"./key-Cx1qY8eM.js";import{t as ur}from"./use-toast-midBZAtS.js";import{r as dr}from"./useLifecycle-DogGOXPh.js";import{t as Et}from"./createLucideIcon-CNVopWor.js";import{h as cr}from"./select-5fcaZwou.js";import{t as Ct}from"./tooltip-BHnVWzH0.js";import{t as zt}from"./mode-Bq6LjPC-.js";import{n as fr,r as pr,t as mr}from"./share-8z32Sr0F.js";import{t as hr}from"./dist-DBrqGLzW.js";import{t as kt}from"./toggle-DlfY8wql.js";function gr(t,e,n){return t==null?t:Kn(t,e,n)}var Rt=gr,yr=Et("crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),br=Et("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);function wr(t){return{all:t||(t=new Map),on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}var u=we(Hn(),1),Ve=(0,u.createContext)(null),vr=t=>{let{controller:e}=(0,u.useContext)(Ve),n=u.useRef(Symbol("fill"));return(0,u.useEffect)(()=>(e.mount({name:t.name,ref:n.current,children:t.children}),()=>{e.unmount({name:t.name,ref:n.current})}),[]),(0,u.useEffect)(()=>{e.update({name:t.name,ref:n.current,children:t.children})}),null},xr=Object.defineProperty,Sr=(t,e,n)=>e in t?xr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,It=(t,e,n)=>(Sr(t,typeof e=="symbol"?e:e+"",n),n),Nt=console,Er=class{constructor(t){It(this,"_bus"),It(this,"_db"),this._bus=t,this.handleFillMount=this.handleFillMount.bind(this),this.handleFillUpdated=this.handleFillUpdated.bind(this),this.handleFillUnmount=this.handleFillUnmount.bind(this),this._db={byName:new Map,byFill:new Map}}mount(){this._bus.on("fill-mount",this.handleFillMount),this._bus.on("fill-updated",this.handleFillUpdated),this._bus.on("fill-unmount",this.handleFillUnmount)}unmount(){this._bus.off("fill-mount",this.handleFillMount),this._bus.off("fill-updated",this.handleFillUpdated),this._bus.off("fill-unmount",this.handleFillUnmount)}handleFillMount({fill:t}){let e=u.Children.toArray(t.children),n=t.name,r={fill:t,children:e,name:n},i=this._db.byName.get(n);i?(i.components.push(r),i.listeners.forEach(a=>a([...i.components]))):this._db.byName.set(n,{listeners:[],components:[r]}),this._db.byFill.set(t.ref,r)}handleFillUpdated({fill:t}){let e=this._db.byFill.get(t.ref),n=u.Children.toArray(t.children);if(e){e.children=n;let r=this._db.byName.get(e.name);if(r)r.listeners.forEach(i=>i([...r.components]));else throw Error("registration was expected to be defined")}else{Nt.error("[handleFillUpdated] component was expected to be defined");return}}handleFillUnmount({fill:t}){let e=this._db.byFill.get(t.ref);if(!e){Nt.error("[handleFillUnmount] component was expected to be defined");return}let n=e.name,r=this._db.byName.get(n);if(!r)throw Error("registration was expected to be defined");r.components=r.components.filter(i=>i!==e),this._db.byFill.delete(t.ref),r.listeners.length===0&&r.components.length===0?this._db.byName.delete(n):r.listeners.forEach(i=>i([...r.components]))}onComponentsChange(t,e){let n=this._db.byName.get(t);n?(n.listeners.push(e),e(n.components)):(this._db.byName.set(t,{listeners:[e],components:[]}),e([]))}getFillsByName(t){let e=this._db.byName.get(t);return e?e.components.map(n=>n.fill):[]}getChildrenByName(t){let e=this._db.byName.get(t);return e?e.components.map(n=>n.children).reduce((n,r)=>n.concat(r),[]):[]}removeOnComponentsChange(t,e){let n=this._db.byName.get(t);if(!n)throw Error("expected registration to be defined");let r=n.listeners;r.splice(r.indexOf(e),1)}},Cr=Object.defineProperty,zr=(t,e,n)=>e in t?Cr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kr=(t,e,n)=>(zr(t,typeof e=="symbol"?e:e+"",n),n),Pt=class{constructor(){kr(this,"bus",wr())}mount(t){this.bus.emit("fill-mount",{fill:t})}unmount(t){this.bus.emit("fill-unmount",{fill:t})}update(t){this.bus.emit("fill-updated",{fill:t})}};function Rr(t){let e=t||new Pt;return{controller:e,manager:new Er(e.bus)}}var Ir=({controller:t,children:e})=>{let[n]=u.useState(()=>{let r=Rr(t);return r.manager.mount(),r});return u.useEffect(()=>()=>{n.manager.unmount()},[]),u.createElement(Ve.Provider,{value:n},e)};function Xe(t,e){let[n,r]=(0,u.useState)([]),{manager:i}=(0,u.useContext)(Ve);return(0,u.useEffect)(()=>(i.onComponentsChange(t,r),()=>{i.removeOnComponentsChange(t,r)}),[t]),n.flatMap((a,l)=>{let{children:o}=a;return o.map((s,g)=>{if(typeof s=="number"||typeof s=="string")throw Error("Only element children will work here");return u.cloneElement(s,{key:l.toString()+g.toString(),...e})})})}var At=t=>{let e=Xe(t.name,t.childProps);if(typeof t.children=="function"){let n=t.children(e);if(u.isValidElement(n)||n===null)return n;throw Error("Slot rendered with function must return a valid React Element.")}return e};const Nr=new Pt,Pe={SIDEBAR:"sidebar",CONTEXT_AWARE_PANEL:"context-aware-panel"};var Pr=1e10,Ar=1e3;function Ae(t,e){let n=t.map(r=>`"${r}"`).join(", ");return Error(`This RPC instance cannot ${e} because the transport did not provide one or more of these methods: ${n}`)}function _r(t={}){let e={};function n(c){e=c}let r={};function i(c){var x;r.unregisterHandler&&r.unregisterHandler(),r=c,(x=r.registerHandler)==null||x.call(r,_)}let a;function l(c){if(typeof c=="function"){a=c;return}a=(x,P)=>{let C=c[x];if(C)return C(P);let N=c._;if(!N)throw Error(`The requested method has no handler: ${x}`);return N(x,P)}}let{maxRequestTime:o=Ar}=t;t.transport&&i(t.transport),t.requestHandler&&l(t.requestHandler),t._debugHooks&&n(t._debugHooks);let s=0;function g(){return s<=Pr?++s:s=0}let h=new Map,f=new Map;function p(c,...x){let P=x[0];return new Promise((C,N)=>{var q;if(!r.send)throw Ae(["send"],"make requests");let M=g(),U={type:"request",id:M,method:c,params:P};h.set(M,{resolve:C,reject:N}),o!==1/0&&f.set(M,setTimeout(()=>{f.delete(M),N(Error("RPC request timed out."))},o)),(q=e.onSend)==null||q.call(e,U),r.send(U)})}let y=new Proxy(p,{get:(c,x,P)=>x in c?Reflect.get(c,x,P):C=>p(x,C)}),v=y;function z(c,...x){var N;let P=x[0];if(!r.send)throw Ae(["send"],"send messages");let C={type:"message",id:c,payload:P};(N=e.onSend)==null||N.call(e,C),r.send(C)}let b=new Proxy(z,{get:(c,x,P)=>x in c?Reflect.get(c,x,P):C=>z(x,C)}),I=b,A=new Map,D=new Set;function H(c,x){var P;if(!r.registerHandler)throw Ae(["registerHandler"],"register message listeners");if(c==="*"){D.add(x);return}A.has(c)||A.set(c,new Set),(P=A.get(c))==null||P.add(x)}function V(c,x){var P,C;if(c==="*"){D.delete(x);return}(P=A.get(c))==null||P.delete(x),((C=A.get(c))==null?void 0:C.size)===0&&A.delete(c)}async function _(c){var x,P;if((x=e.onReceive)==null||x.call(e,c),!("type"in c))throw Error("Message does not contain a type.");if(c.type==="request"){if(!r.send||!a)throw Ae(["send","requestHandler"],"handle requests");let{id:C,method:N,params:M}=c,U;try{U={type:"response",id:C,success:!0,payload:await a(N,M)}}catch(q){if(!(q instanceof Error))throw q;U={type:"response",id:C,success:!1,error:q.message}}(P=e.onSend)==null||P.call(e,U),r.send(U);return}if(c.type==="response"){let C=f.get(c.id);C!=null&&clearTimeout(C);let{resolve:N,reject:M}=h.get(c.id)??{};c.success?N==null||N(c.payload):M==null||M(Error(c.error));return}if(c.type==="message"){for(let N of D)N(c.id,c.payload);let C=A.get(c.id);if(!C)return;for(let N of C)N(c.payload);return}throw Error(`Unexpected RPC message type: ${c.type}`)}return{setTransport:i,setRequestHandler:l,request:y,requestProxy:v,send:b,sendProxy:I,addMessageListener:H,removeMessageListener:V,proxy:{send:I,request:v},_setDebugHooks:n}}function Mr(t){return _r(t)}var _t="[transport-id]";function Fr(t,e){let{transportId:n}=e;return n==null?t:{[_t]:n,data:t}}function Lr(t,e){let{transportId:n,filter:r}=e,i=r==null?void 0:r();if(n!=null&&i!=null)throw Error("Cannot use both `transportId` and `filter` at the same time");let a=t;if(n){if(t[_t]!==n)return[!0];a=t.data}return i===!1?[!0]:[!1,a]}function Dr(t,e={}){let{transportId:n,filter:r,remotePort:i}=e,a=t,l=i??t,o;return{send(s){l.postMessage(Fr(s,{transportId:n}))},registerHandler(s){o=g=>{let h=g.data,[f,p]=Lr(h,{transportId:n,filter:()=>r==null?void 0:r(g)});f||s(p)},a.addEventListener("message",o)},unregisterHandler(){o&&a.removeEventListener("message",o)}}}function qr(t,e){return Dr(t,e)}function Mt(t){return Mr({transport:qr(t,{transportId:"marimo-transport"}),maxRequestTime:2e4,_debugHooks:{onSend:e=>{G.debug("[rpc] Parent -> Worker",e)},onReceive:e=>{G.debug("[rpc] Worker -> Parent",e)}}})}const Ft=ie("Initializing..."),jr=ie(t=>{let e=t(Bn),n=Object.values(e.cellRuntime);return n.some(r=>!ir(r.output))?!0:n.every(r=>r.status==="idle")});var Lt=we(fr(),1),Dt="marimo:file",qt=new Un(null);const Tr={saveFile(t){qt.set(Dt,t)},readFile(){return qt.get(Dt)}};var Hr={saveFile(t){ve.setCodeForHash((0,Lt.compressToEncodedURIComponent)(t))},readFile(){let t=ve.getCodeFromHash()||ve.getCodeFromSearchParam();return t?(0,Lt.decompressFromEncodedURIComponent)(t):null}};const $r={saveFile(t){},readFile(){let t=document.querySelector("marimo-code");return t?decodeURIComponent(t.textContent||"").trim():null}};var Or={saveFile(t){},readFile(){if(window.location.hostname!=="marimo.app")return null;let t=new URL("files/wasm-intro.py",document.baseURI);return fetch(t.toString()).then(e=>e.ok?e.text():null).catch(()=>null)}},Ur={saveFile(t){},readFile(){return["import marimo","app = marimo.App()","","@app.cell","def __():","  return","",'if __name__ == "__main__":',"  app.run()"].join(`
`)}},jt=class{constructor(t){this.stores=t}insert(t,e){this.stores.splice(t,0,e)}saveFile(t){this.stores.forEach(e=>e.saveFile(t))}readFile(){for(let t of this.stores){let e=t.readFile();if(e)return e}return null}};const _e=new jt([$r,Hr]),Ye=new jt([Tr,Or,Ur]);var Wr=class Fn{constructor(){d(this,"initialized",new Ge);d(this,"sendRename",async({filename:e})=>(e===null||(ve.setFilename(e),await this.rpc.proxy.request.bridge({functionName:"rename_file",payload:e})),null));d(this,"sendSave",async e=>{if(!this.saveRpc)return G.warn("Save RPC not initialized"),null;await this.saveRpc.saveNotebook(e);let n=await this.readCode();return n.contents&&(_e.saveFile(n.contents),Ye.saveFile(n.contents)),this.rpc.proxy.request.saveNotebook(e).catch(r=>{G.error(r)}),null});d(this,"sendCopy",async()=>{$()});d(this,"sendStdin",async e=>(await this.rpc.proxy.request.bridge({functionName:"put_input",payload:e.text}),null));d(this,"sendPdb",async()=>{$()});d(this,"sendRun",async e=>(await this.rpc.proxy.request.loadPackages(e.codes.join(`
`)),await this.putControlRequest(e),null));d(this,"sendRunScratchpad",async e=>(await this.rpc.proxy.request.loadPackages(e.code),await this.putControlRequest(e),null));d(this,"sendInterrupt",async()=>(this.interruptBuffer!==void 0&&(this.interruptBuffer[0]=2),null));d(this,"sendShutdown",async()=>(window.close(),null));d(this,"sendFormat",async e=>await this.rpc.proxy.request.bridge({functionName:"format",payload:e}));d(this,"sendDeleteCell",async e=>(await this.putControlRequest(e),null));d(this,"sendInstallMissingPackages",async e=>(this.putControlRequest(e),null));d(this,"sendCodeCompletionRequest",async e=>(Be.get(Wn)||await this.rpc.proxy.request.bridge({functionName:"code_complete",payload:e}),null));d(this,"saveUserConfig",async e=>(await this.rpc.proxy.request.bridge({functionName:"save_user_config",payload:e}),tr.post("/kernel/save_user_config",e,{baseUrl:"/"}).catch(n=>(G.error(n),null))));d(this,"saveAppConfig",async e=>(await this.rpc.proxy.request.bridge({functionName:"save_app_config",payload:e}),null));d(this,"saveCellConfig",async e=>(await this.putControlRequest(e),null));d(this,"sendRestart",async()=>{let e=await this.readCode();return e.contents&&(_e.saveFile(e.contents),Ye.saveFile(e.contents)),pr(),null});d(this,"readCode",async()=>this.saveRpc?{contents:await this.saveRpc.readNotebook()}:(G.warn("Save RPC not initialized"),{contents:""}));d(this,"readSnippets",async()=>await this.rpc.proxy.request.bridge({functionName:"read_snippets",payload:void 0}));d(this,"openFile",async({path:e})=>{let n=mr({code:null,baseUrl:window.location.origin});return window.open(n,"_blank"),null});d(this,"sendListFiles",async e=>await this.rpc.proxy.request.bridge({functionName:"list_files",payload:e}));d(this,"sendSearchFiles",async e=>await this.rpc.proxy.request.bridge({functionName:"search_files",payload:e}));d(this,"sendComponentValues",async e=>(await this.putControlRequest({...e,token:or()}),null));d(this,"sendInstantiate",async e=>null);d(this,"sendFunctionRequest",async e=>(await this.putControlRequest(e),null));d(this,"sendCreateFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"create_file_or_directory",payload:e}));d(this,"sendDeleteFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"delete_file_or_directory",payload:e}));d(this,"sendRenameFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"move_file_or_directory",payload:e}));d(this,"sendUpdateFile",async e=>await this.rpc.proxy.request.bridge({functionName:"update_file",payload:e}));d(this,"sendFileDetails",async e=>await this.rpc.proxy.request.bridge({functionName:"file_details",payload:e}));d(this,"exportAsHTML",async e=>await this.rpc.proxy.request.bridge({functionName:"export_html",payload:e}));d(this,"exportAsMarkdown",async e=>await this.rpc.proxy.request.bridge({functionName:"export_markdown",payload:e}));d(this,"previewDatasetColumn",async e=>(await this.putControlRequest(e),null));d(this,"previewSQLTable",async e=>(await this.putControlRequest(e),null));d(this,"previewSQLTableList",async e=>(await this.putControlRequest(e),null));d(this,"previewDataSourceConnection",async e=>(await this.putControlRequest(e),null));d(this,"validateSQL",async e=>(await this.putControlRequest(e),null));d(this,"sendModelValue",async e=>(await this.putControlRequest(e),null));d(this,"syncCellIds",()=>Promise.resolve(null));d(this,"getUsageStats",$);d(this,"openTutorial",$);d(this,"getRecentFiles",$);d(this,"getWorkspaceFiles",$);d(this,"getRunningNotebooks",$);d(this,"shutdownSession",$);d(this,"autoExportAsHTML",$);d(this,"autoExportAsMarkdown",$);d(this,"autoExportAsIPYNB",$);d(this,"addPackage",async e=>this.rpc.proxy.request.addPackage(e));d(this,"removePackage",async e=>this.rpc.proxy.request.removePackage(e));d(this,"getPackageList",async()=>await this.rpc.proxy.request.listPackages());d(this,"getDependencyTree",async()=>({tree:{dependencies:[],name:"",tags:[],version:null}}));d(this,"listSecretKeys",async e=>(await this.putControlRequest(e),null));d(this,"writeSecret",async e=>(await this.putControlRequest(e),null));d(this,"invokeAiTool",$);d(this,"clearCache",$);d(this,"getCacheInfo",$);er()&&(this.rpc=Mt(new Worker(new URL(""+new URL("worker-CUYGINRG.js",import.meta.url).href,""+import.meta.url),{type:"module",name:vt()})),this.rpc.addMessageListener("ready",()=>{this.startSession()}),this.rpc.addMessageListener("initialized",()=>{this.saveRpc=this.getSaveWorker(),this.setInterruptBuffer(),this.initialized.resolve()}),this.rpc.addMessageListener("initializingMessage",({message:e})=>{Be.set(Ft,e)}),this.rpc.addMessageListener("initializedError",({error:e})=>{this.initialized.status==="resolved"&&(G.error(e),ur({title:"Error initializing",description:e,variant:"danger"})),this.initialized.reject(Error(e))}),this.rpc.addMessageListener("kernelMessage",({message:e})=>{var n;(n=this.messageConsumer)==null||n.call(this,e)}))}static get INSTANCE(){let e="_marimo_private_PyodideBridge";return window[e]||(window[e]=new Fn),window[e]}getSaveWorker(){return zt()==="read"?(G.debug("Skipping SaveWorker in read-mode"),{readFile:$,readNotebook:$,saveNotebook:$}):Mt(new Worker(new URL(""+new URL("save-worker-Bn51_kZE.js",import.meta.url).href,""+import.meta.url),{type:"module",name:vt()})).proxy.request}async startSession(){let e=await _e.readFile(),n=await Ye.readFile(),r=ve.getFilename(),i=Be.get(Zn),a={},l=new URLSearchParams(window.location.search);for(let o of l.keys()){let s=l.getAll(o);a[o]=s.length===1?s[0]:s}await this.rpc.proxy.request.startSession({queryParameters:a,code:e||n||"",filename:r,userConfig:{...i,runtime:{...i.runtime,auto_instantiate:zt()==="read"?!0:i.runtime.auto_instantiate}}})}setInterruptBuffer(){crossOriginIsolated?(this.interruptBuffer=new Uint8Array(new SharedArrayBuffer(1)),this.rpc.proxy.request.setInterruptBuffer(this.interruptBuffer)):G.warn("Not running in a secure context; interrupts are not available.")}consumeMessages(e){this.messageConsumer=e,this.rpc.proxy.send.consumerReady({})}async putControlRequest(e){await this.rpc.proxy.request.bridge({functionName:"put_control_request",payload:e})}},Br=class{constructor(t){d(this,"CONNECTING",WebSocket.CONNECTING);d(this,"OPEN",WebSocket.OPEN);d(this,"CLOSING",WebSocket.CLOSING);d(this,"CLOSED",WebSocket.CLOSED);d(this,"binaryType","blob");d(this,"bufferedAmount",0);d(this,"extensions","");d(this,"protocol","");d(this,"url","");d(this,"onclose",null);d(this,"onerror",null);d(this,"onmessage",null);d(this,"onopen",null);d(this,"openSubscriptions",new Set);d(this,"closeSubscriptions",new Set);d(this,"messageSubscriptions",new Set);d(this,"errorSubscriptions",new Set);d(this,"dispatchEvent",$);d(this,"reconnect",$);d(this,"send",$);d(this,"readyState",WebSocket.OPEN);d(this,"retryCount",0);d(this,"shouldReconnect",!1);this.bridge=t}consumeMessages(){this.bridge.consumeMessages(t=>{this.messageSubscriptions.forEach(e=>{e({data:t})})})}addEventListener(t,e,n){switch(t){case"open":this.openSubscriptions.add(e),e();break;case"close":this.closeSubscriptions.add(e);break;case"message":this.messageSubscriptions.add(e),this.consumeMessages();break;case"error":this.errorSubscriptions.add(e);break}}removeEventListener(t,e,n){switch(t){case"open":this.openSubscriptions.delete(e);break;case"close":this.closeSubscriptions.delete(e);break;case"message":this.messageSubscriptions.delete(e);break;case"error":this.errorSubscriptions.delete(e);break}}close(){}};function Me(t){return()=>({TYPE:t,is(e){return e.type===t},create(e){return new CustomEvent(t,e)}})}const Tt=Me("marimo-value-input")(),Ht=Me("marimo-value-update")(),$t=Me("marimo-value-ready")(),Ot=Me("marimo-incoming-message")();function Gr(t,e){return Tt.create({bubbles:!0,composed:!0,detail:{value:t,element:e}})}var Ut=class Ln{static get INSTANCE(){let e="_marimo_private_UIElementRegistry";return window[e]||(window[e]=new Ln),window[e]}constructor(){this.entries=new Map}has(e){return this.entries.has(e)}set(e,n){if(this.entries.has(e))throw Error(`UIElement ${e} already registered`);this.entries.set(e,{objectId:e,value:n,elements:new Set})}registerInstance(e,n){let r=this.entries.get(e);r===void 0?this.entries.set(e,{objectId:e,value:$n(n,this),elements:new Set([n])}):r.elements.add(n)}removeInstance(e,n){let r=this.entries.get(e);r!=null&&r.elements.has(n)&&r.elements.delete(n)}removeElementsByCell(e){[...this.entries.keys()].filter(n=>n.startsWith(`${e}-`)).forEach(n=>{this.entries.delete(n)})}lookupValue(e){let n=this.entries.get(e);return n===void 0?void 0:n.value}broadcastMessage(e,n,r){let i=this.entries.get(e);i===void 0?G.warn("UIElementRegistry missing entry",e):i.elements.forEach(a=>{a.dispatchEvent(Ot.create({bubbles:!1,composed:!0,detail:{objectId:e,message:n,buffers:r}}))})}broadcastValueUpdate(e,n,r){let i=this.entries.get(n);i===void 0?G.warn("UIElementRegistry missing entry",n):(i.value=r,i.elements.forEach(a=>{a!==e&&a.dispatchEvent(Ht.create({bubbles:!1,composed:!0,detail:{value:r,element:a}}))}),document.dispatchEvent($t.create({bubbles:!0,composed:!0,detail:{objectId:n}})))}};const Vr=Ut.INSTANCE,Xr=new sr("function-call-result",async(t,e)=>{await St().sendFunctionRequest({functionCallId:t,...e})}),Yr="68px";var Jr="288px";const Kr=t=>t?/^\d+$/.test(t)?`${t}px`:t:Jr,Qr=On({isOpen:!0},(t,e)=>{if(!e)return t;switch(e.type){case"toggle":return{...t,isOpen:e.isOpen??t.isOpen};case"setWidth":return{...t,width:e.width};default:return t}});function Zr(t,e,n){if(!e||e.length===0)return t;n&&Qn(n.length===e.length,"Buffers and buffer paths not the same length");let r=structuredClone(t);for(let[i,a]of e.entries()){let l=n[i];if(!l){G.warn("Could not find buffer at path",a);continue}r=Rt(r,a,l)}return r}const Wt=new class{constructor(t=1e4){d(this,"models",new Map);this.timeout=t}get(t){let e=this.models.get(t);return e||(e=new Ge,this.models.set(t,e),setTimeout(()=>{e.status==="pending"&&(e.reject(Error(`Model not found for key: ${t}`)),this.models.delete(t))},this.timeout)),e.promise}set(t,e){let n=this.models.get(t);n||(n=new Ge,this.models.set(t,n)),n.resolve(e)}delete(t){this.models.delete(t)}};var Bt=(de=class{constructor(e,n,r,i){d(this,"ANY_CHANGE_EVENT","change");d(this,"listeners",{});d(this,"widget_manager",{async get_model(e){let n=await de._modelManager.get(e);if(!n)throw Error(`Model not found with id: ${e}. This is likely because the model was not registered.`);return n}});d(this,"emitAnyChange",Jn(()=>{var e;(e=this.listeners[this.ANY_CHANGE_EVENT])==null||e.forEach(n=>n())},0));this.data=e,this.onChange=n,this.sendToWidget=r,this.dirtyFields=new Set(i)}off(e,n){var r;if(!e){this.listeners={};return}if(!n){this.listeners[e]=new Set;return}(r=this.listeners[e])==null||r.delete(n)}send(e,n,r){r&&G.warn("buffers not supported in marimo anywidget.send"),this.sendToWidget({content:e,buffers:r}).then(n)}get(e){return this.data[e]}set(e,n){this.data={...this.data,[e]:n},this.dirtyFields.add(e),this.emit(`change:${e}`,n),this.emitAnyChange()}save_changes(){if(this.dirtyFields.size===0)return;let e={};this.dirtyFields.forEach(n=>{e[n]=this.data[n]}),this.onChange(e)}updateAndEmitDiffs(e){Object.keys(e).forEach(n=>{let r=n;hr(this.data[r],e[r])||this.set(r,e[r])})}receiveCustomMessage(e,n=[]){var i;let r=Gt.safeParse(e);if(r.success){let a=r.data;switch(a.method){case"update":this.updateAndEmitDiffs(a.state);break;case"custom":(i=this.listeners["msg:custom"])==null||i.forEach(l=>l(a.content,n));break;case"open":this.updateAndEmitDiffs(a.state);break}}else G.error("Failed to parse message",r.error),G.error("Message",e)}on(e,n){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(n)}emit(e,n){this.listeners[e]&&this.listeners[e].forEach(r=>r(n))}},d(de,"_modelManager",Wt),de),Je=yt(yt(Yn([bt(),Xn()]))),Ke=Gn(bt(),gt()),Gt=Vn("method",[Se({method:xe("open"),state:Ke,buffer_paths:Je.optional()}),Se({method:xe("update"),state:Ke,buffer_paths:Je.optional()}),Se({method:xe("custom"),content:gt()}),Se({method:xe("echo_update"),buffer_paths:Je,state:Ke}),Se({method:xe("close")})]);function ea(t){return t==null?!1:Gt.safeParse(t).success}async function ta({modelId:t,msg:e,buffers:n,modelManager:r}){if(e.method==="echo_update")return;if(e.method==="custom"){(await r.get(t)).receiveCustomMessage(e);return}if(e.method==="close"){r.delete(t);return}let{method:i,state:a,buffer_paths:l=[]}=e,o=Zr(a,l,n);if(i==="open"){let s=new Bt(o,g=>{l&&G.warn("Changed data with buffer paths may not be supported",g),St().sendModelValue({modelId:t,message:{state:g,bufferPaths:[]},buffers:[]})},$,new Set);r.set(t,s);return}if(i==="update"){(await r.get(t)).updateAndEmitDiffs(o);return}dr(i)}const Vt=ie(null),na=ie(null),Xt=ie(!1),ra=ie(!1),Yt=ie(!1);var Fe=(0,u.createContext)(null);Fe.displayName="PanelGroupContext";var T={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Qe=10,le=u.useLayoutEffect,Jt=u.useId,aa=typeof Jt=="function"?Jt:()=>null,ia=0;function Ze(t=null){let e=aa(),n=(0,u.useRef)(t||e||null);return n.current===null&&(n.current=""+ia++),t??n.current}function Kt({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:a,id:l,maxSize:o,minSize:s,onCollapse:g,onExpand:h,onResize:f,order:p,style:y,tagName:v="div",...z}){let b=(0,u.useContext)(Fe);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:I,expandPanel:A,getPanelSize:D,getPanelStyle:H,groupId:V,isPanelCollapsed:_,reevaluatePanelConstraints:c,registerPanel:x,resizePanel:P,unregisterPanel:C}=b,N=Ze(l),M=(0,u.useRef)({callbacks:{onCollapse:g,onExpand:h,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:o,minSize:s},id:N,idIsFromProps:l!==void 0,order:p});(0,u.useRef)({didLogMissingDefaultSizeWarning:!1}),le(()=>{let{callbacks:q,constraints:B}=M.current,X={...B};M.current.id=N,M.current.idIsFromProps=l!==void 0,M.current.order=p,q.onCollapse=g,q.onExpand=h,q.onResize=f,B.collapsedSize=n,B.collapsible=r,B.defaultSize=i,B.maxSize=o,B.minSize=s,(X.collapsedSize!==B.collapsedSize||X.collapsible!==B.collapsible||X.maxSize!==B.maxSize||X.minSize!==B.minSize)&&c(M.current,X)}),le(()=>{let q=M.current;return x(q),()=>{C(q)}},[p,N,x,C]),(0,u.useImperativeHandle)(a,()=>({collapse:()=>{I(M.current)},expand:q=>{A(M.current,q)},getId(){return N},getSize(){return D(M.current)},isCollapsed(){return _(M.current)},isExpanded(){return!_(M.current)},resize:q=>{P(M.current,q)}}),[I,A,D,_,N,P]);let U=H(M.current,i);return(0,u.createElement)(v,{...z,children:t,className:e,id:N,style:{...U,...y},[T.groupId]:V,[T.panel]:"",[T.panelCollapsible]:r||void 0,[T.panelId]:N,[T.panelSize]:parseFloat(""+U.flexGrow).toFixed(1)})}var et=(0,u.forwardRef)((t,e)=>(0,u.createElement)(Kt,{...t,forwardedRef:e}));Kt.displayName="Panel",et.displayName="forwardRef(Panel)";var la;function oa(){return la}var tt=null,sa=!0,Le=-1,Z=null;function ua(t,e){if(e){let n=(e&ln)!==0,r=(e&on)!==0,i=(e&sn)!==0,a=(e&un)!==0;if(n)return i?"se-resize":a?"ne-resize":"e-resize";if(r)return i?"sw-resize":a?"nw-resize":"w-resize";if(i)return"s-resize";if(a)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function da(){Z!==null&&(document.head.removeChild(Z),tt=null,Z=null,Le=-1)}function nt(t,e){var i;if(!sa)return;let n=ua(t,e);if(tt!==n){if(tt=n,Z===null){Z=document.createElement("style");let a=oa();a&&Z.setAttribute("nonce",a),document.head.appendChild(Z)}if(Le>=0){var r;(r=Z.sheet)==null||r.removeRule(Le)}Le=((i=Z.sheet)==null?void 0:i.insertRule(`*{cursor: ${n} !important;}`))??-1}}function Qt(t){return t.type==="keydown"}function Zt(t){return t.type.startsWith("pointer")}function en(t){return t.type.startsWith("mouse")}function De(t){if(Zt(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(en(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function ca(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function fa(t,e,n){return n?t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y:t.x<=e.x+e.width&&t.x+t.width>=e.x&&t.y<=e.y+e.height&&t.y+t.height>=e.y}function pa(t,e){if(t===e)throw Error("Cannot compare node with itself");let n={a:rn(t),b:rn(e)},r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;R(r,"Stacking order can only be calculated for elements with a common ancestor");let i={a:nn(tn(n.a)),b:nn(tn(n.b))};if(i.a===i.b){let a=r.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)},o=a.length;for(;o--;){let s=a[o];if(s===l.a)return 1;if(s===l.b)return-1}}return Math.sign(i.a-i.b)}var ma=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ha(t){let e=getComputedStyle(an(t)??t).display;return e==="flex"||e==="inline-flex"}function ga(t){let e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||ha(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||ma.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function tn(t){let e=t.length;for(;e--;){let n=t[e];if(R(n,"Missing node"),ga(n))return n}return null}function nn(t){return t&&Number(getComputedStyle(t).zIndex)||0}function rn(t){let e=[];for(;t;)e.push(t),t=an(t);return e}function an(t){let{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}var ln=1,on=2,sn=4,un=8,ya=ca()==="coarse",K=[],fe=!1,oe=new Map,qe=new Map,Ee=new Set;function ba(t,e,n,r,i){let{ownerDocument:a}=e,l={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},o=oe.get(a)??0;return oe.set(a,o+1),Ee.add(l),je(),function(){qe.delete(t),Ee.delete(l);let s=oe.get(a)??1;if(oe.set(a,s-1),je(),s===1&&oe.delete(a),K.includes(l)){let g=K.indexOf(l);g>=0&&K.splice(g,1),ot(),i("up",!0,null)}}}function wa(t){let{target:e}=t,{x:n,y:r}=De(t);fe=!0,it({target:e,x:n,y:r}),je(),K.length>0&&(Te("down",t),t.preventDefault(),dn(e)||t.stopImmediatePropagation())}function rt(t){let{x:e,y:n}=De(t);if(fe&&t.buttons===0&&(fe=!1,Te("up",t)),!fe){let{target:r}=t;it({target:r,x:e,y:n})}Te("move",t),ot(),K.length>0&&t.preventDefault()}function at(t){let{target:e}=t,{x:n,y:r}=De(t);qe.clear(),fe=!1,K.length>0&&(t.preventDefault(),dn(e)||t.stopImmediatePropagation()),Te("up",t),it({target:e,x:n,y:r}),ot(),je()}function dn(t){let e=t;for(;e;){if(e.hasAttribute(T.resizeHandle))return!0;e=e.parentElement}return!1}function it({target:t,x:e,y:n}){K.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),Ee.forEach(i=>{let{element:a,hitAreaMargins:l}=i,o=a.getBoundingClientRect(),{bottom:s,left:g,right:h,top:f}=o,p=ya?l.coarse:l.fine;if(e>=g-p&&e<=h+p&&n>=f-p&&n<=s+p){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&pa(r,a)>0){let y=r,v=!1;for(;y&&!y.contains(a);){if(fa(y.getBoundingClientRect(),o,!0)){v=!0;break}y=y.parentElement}if(v)return}K.push(i)}})}function lt(t,e){qe.set(t,e)}function ot(){let t=!1,e=!1;K.forEach(r=>{let{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;qe.forEach(r=>{n|=r}),t&&e?nt("intersection",n):t?nt("horizontal",n):e?nt("vertical",n):da()}var st=new AbortController;function je(){st.abort(),st=new AbortController;let t={capture:!0,signal:st.signal};Ee.size&&(fe?(K.length>0&&oe.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("contextmenu",at,t),r.addEventListener("pointerleave",rt,t),r.addEventListener("pointermove",rt,t))}),window.addEventListener("pointerup",at,t),window.addEventListener("pointercancel",at,t)):oe.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("pointerdown",wa,t),r.addEventListener("pointermove",rt,t))}))}function Te(t,e){Ee.forEach(n=>{let{setResizeHandlerState:r}=n;r(t,K.includes(n),e)})}function va(){let[t,e]=(0,u.useState)(0);return(0,u.useCallback)(()=>e(n=>n+1),[])}function R(t,e){if(!t)throw console.error(e),Error(e)}function se(t,e,n=Qe){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function ee(t,e,n=Qe){return se(t,e,n)===0}function Y(t,e,n){return se(t,e,n)===0}function xa(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],a=e[r];if(!Y(i,a,n))return!1}return!0}function pe({panelConstraints:t,panelIndex:e,size:n}){let r=t[e];R(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:a,maxSize:l=100,minSize:o=0}=r;if(se(n,o)<0)if(a){let s=(i+o)/2;n=se(n,s)<0?i:o}else n=o;return n=Math.min(l,n),n=parseFloat(n.toFixed(Qe)),n}function Ce({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:a}){if(Y(t,0))return e;let l=[...e],[o,s]=r;R(o!=null,"Invalid first pivot index"),R(s!=null,"Invalid second pivot index");let g=0;if(a==="keyboard"){{let h=t<0?s:o,f=n[h];R(f,`Panel constraints not found for index ${h}`);let{collapsedSize:p=0,collapsible:y,minSize:v=0}=f;if(y){let z=e[h];if(R(z!=null,`Previous layout not found for panel index ${h}`),Y(z,p)){let b=v-z;se(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{let h=t<0?o:s,f=n[h];R(f,`No panel constraints found for index ${h}`);let{collapsedSize:p=0,collapsible:y,minSize:v=0}=f;if(y){let z=e[h];if(R(z!=null,`Previous layout not found for panel index ${h}`),Y(z,v)){let b=z-p;se(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}}{let h=t<0?1:-1,f=t<0?s:o,p=0;for(;;){let v=e[f];R(v!=null,`Previous layout not found for panel index ${f}`);let z=pe({panelConstraints:n,panelIndex:f,size:100})-v;if(p+=z,f+=h,f<0||f>=n.length)break}let y=Math.min(Math.abs(t),Math.abs(p));t=t<0?0-y:y}{let h=t<0?o:s;for(;h>=0&&h<n.length;){let f=Math.abs(t)-Math.abs(g),p=e[h];R(p!=null,`Previous layout not found for panel index ${h}`);let y=p-f,v=pe({panelConstraints:n,panelIndex:h,size:y});if(!Y(p,v)&&(g+=p-v,l[h]=v,g.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?h--:h++}}if(xa(i,l))return i;{let h=t<0?s:o,f=e[h];R(f!=null,`Previous layout not found for panel index ${h}`);let p=f+g,y=pe({panelConstraints:n,panelIndex:h,size:p});if(l[h]=y,!Y(y,p)){let v=p-y,z=t<0?s:o;for(;z>=0&&z<n.length;){let b=l[z];R(b!=null,`Previous layout not found for panel index ${z}`);let I=b+v,A=pe({panelConstraints:n,panelIndex:z,size:I});if(Y(b,A)||(v-=A-b,l[z]=A),Y(v,0))break;t>0?z--:z++}}}return Y(l.reduce((h,f)=>f+h,0),100)?l:i}function Sa({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,a=0,l=0,o=n[0];return R(o!=null,"No pivot index found"),e.forEach((s,g)=>{let{constraints:h}=s,{maxSize:f=100,minSize:p=0}=h;g===o?(r=p,i=f):(a+=p,l+=f)}),{valueMax:Math.min(i,100-a),valueMin:Math.max(r,100-l),valueNow:t[o]}}function ze(t,e=document){return Array.from(e.querySelectorAll(`[${T.resizeHandleId}][data-panel-group-id="${t}"]`))}function cn(t,e,n=document){return ze(t,n).findIndex(r=>r.getAttribute(T.resizeHandleId)===e)??null}function fn(t,e,n){let r=cn(t,e,n);return r==null?[-1,-1]:[r,r+1]}function pn(t,e=document){var n;return e instanceof HTMLElement&&((n=e==null?void 0:e.dataset)==null?void 0:n.panelGroupId)==t?e:e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`)||null}function He(t,e=document){return e.querySelector(`[${T.resizeHandleId}="${t}"]`)||null}function Ea(t,e,n,r=document){var o,s;let i=He(e,r),a=ze(t,r),l=i?a.indexOf(i):-1;return[((o=n[l])==null?void 0:o.id)??null,((s=n[l+1])==null?void 0:s.id)??null]}function Ca({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:a,setLayout:l}){(0,u.useRef)({didWarnAboutMissingResizeHandle:!1}),le(()=>{if(!a)return;let o=ze(n,a);for(let s=0;s<i.length-1;s++){let{valueMax:g,valueMin:h,valueNow:f}=Sa({layout:r,panelsArray:i,pivotIndices:[s,s+1]}),p=o[s];if(p!=null){let y=i[s];R(y,`No panel data found for index "${s}"`),p.setAttribute("aria-controls",y.id),p.setAttribute("aria-valuemax",""+Math.round(g)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",f==null?"":""+Math.round(f))}}return()=>{o.forEach((s,g)=>{s.removeAttribute("aria-controls"),s.removeAttribute("aria-valuemax"),s.removeAttribute("aria-valuemin"),s.removeAttribute("aria-valuenow")})}},[n,r,i,a]),(0,u.useEffect)(()=>{if(!a)return;let o=e.current;R(o,"Eager values not found");let{panelDataArray:s}=o;R(pn(n,a)!=null,`No group found for id "${n}"`);let g=ze(n,a);R(g,`No resize handles found for group id "${n}"`);let h=g.map(f=>{let p=f.getAttribute(T.resizeHandleId);R(p,"Resize handle element has no handle id attribute");let[y,v]=Ea(n,p,s,a);if(y==null||v==null)return()=>{};let z=b=>{if(!b.defaultPrevented)switch(b.key){case"Enter":{b.preventDefault();let I=s.findIndex(A=>A.id===y);if(I>=0){let A=s[I];R(A,`No panel data found for index ${I}`);let D=r[I],{collapsedSize:H=0,collapsible:V,minSize:_=0}=A.constraints;if(D!=null&&V){let c=Ce({delta:Y(D,H)?_-H:H-D,initialLayout:r,panelConstraints:s.map(x=>x.constraints),pivotIndices:fn(n,p,a),prevLayout:r,trigger:"keyboard"});r!==c&&l(c)}}break}}};return f.addEventListener("keydown",z),()=>{f.removeEventListener("keydown",z)}});return()=>{h.forEach(f=>f())}},[a,t,e,n,r,i,l])}function mn(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function hn(t,e){let n=t==="horizontal",{x:r,y:i}=De(e);return n?r:i}function za(t,e,n,r,i){let a=n==="horizontal",l=He(e,i);R(l,`No resize handle element found for id "${e}"`);let o=l.getAttribute(T.groupId);R(o,"Resize handle element has no group id attribute");let{initialCursorPosition:s}=r,g=hn(n,t),h=pn(o,i);R(h,`No group element found for id "${o}"`);let f=h.getBoundingClientRect(),p=a?f.width:f.height;return(g-s)/p*100}function ka(t,e,n,r,i,a){if(Qt(t)){let l=n==="horizontal",o=0;o=t.shiftKey?100:i??10;let s=0;switch(t.key){case"ArrowDown":s=l?0:o;break;case"ArrowLeft":s=l?-o:0;break;case"ArrowRight":s=l?o:0;break;case"ArrowUp":s=l?0:-o;break;case"End":s=100;break;case"Home":s=-100;break}return s}else return r==null?0:za(t,e,n,r,a)}function Ra({panelDataArray:t}){let e=Array(t.length),n=t.map(a=>a.constraints),r=0,i=100;for(let a=0;a<t.length;a++){let l=n[a];R(l,`Panel constraints not found for index ${a}`);let{defaultSize:o}=l;o!=null&&(r++,e[a]=o,i-=o)}for(let a=0;a<t.length;a++){let l=n[a];R(l,`Panel constraints not found for index ${a}`);let{defaultSize:o}=l;if(o!=null)continue;let s=t.length-r,g=i/s;r++,e[a]=g,i-=g}return e}function me(t,e,n){e.forEach((r,i)=>{let a=t[i];R(a,`Panel data not found for index ${i}`);let{callbacks:l,constraints:o,id:s}=a,{collapsedSize:g=0,collapsible:h}=o,f=n[s];if(f==null||r!==f){n[s]=r;let{onCollapse:p,onExpand:y,onResize:v}=l;v&&v(r,f),h&&(p||y)&&(y&&(f==null||ee(f,g))&&!ee(r,g)&&y(),p&&(f==null||!ee(f,g))&&ee(r,g)&&p())}})}function $e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function Ia({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:a=3}){let l=n[i],o;return o=l==null?t==null?"1":t.toPrecision(a):r.length===1?"1":l.toPrecision(a),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:e===null?void 0:"none"}}function Na(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function gn(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function yn(t){return`react-resizable-panels:${t}`}function bn(t){return t.map(e=>{let{constraints:n,id:r,idIsFromProps:i,order:a}=e;return i?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function wn(t,e){try{let n=yn(t),r=e.getItem(n);if(r){let i=JSON.parse(r);if(typeof i=="object"&&i)return i}}catch{}return null}function Pa(t,e,n){return(wn(t,n)??{})[bn(e)]??null}function Aa(t,e,n,r,i){let a=yn(t),l=bn(e),o=wn(t,i)??{};o[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(a,JSON.stringify(o))}catch(s){console.error(s)}}function vn({layout:t,panelConstraints:e}){let n=[...t],r=n.reduce((a,l)=>a+l,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!Y(r,100)&&n.length>0)for(let a=0;a<e.length;a++){let l=n[a];R(l!=null,`No layout data found for index ${a}`),n[a]=100/r*l}let i=0;for(let a=0;a<e.length;a++){let l=n[a];R(l!=null,`No layout data found for index ${a}`);let o=pe({panelConstraints:e,panelIndex:a,size:l});l!=o&&(i+=l-o,n[a]=o)}if(!Y(i,0))for(let a=0;a<e.length;a++){let l=n[a];R(l!=null,`No layout data found for index ${a}`);let o=l+i,s=pe({panelConstraints:e,panelIndex:a,size:o});if(l!==s&&(i-=s-l,n[a]=s,Y(i,0)))break}return n}var _a=100,ke={getItem:t=>(gn(ke),ke.getItem(t)),setItem:(t,e)=>{gn(ke),ke.setItem(t,e)}},xn={};function Sn({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:a=null,onLayout:l=null,keyboardResizeBy:o=null,storage:s=ke,style:g,tagName:h="div",...f}){let p=Ze(a),y=(0,u.useRef)(null),[v,z]=(0,u.useState)(null),[b,I]=(0,u.useState)([]),A=va(),D=(0,u.useRef)({}),H=(0,u.useRef)(new Map),V=(0,u.useRef)(0),_=(0,u.useRef)({autoSaveId:t,direction:r,dragState:v,id:p,keyboardResizeBy:o,onLayout:l,storage:s}),c=(0,u.useRef)({layout:b,panelDataArray:[],panelDataArrayChanged:!1});(0,u.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,u.useImperativeHandle)(i,()=>({getId:()=>_.current.id,getLayout:()=>{let{layout:m}=c.current;return m},setLayout:m=>{let{onLayout:w}=_.current,{layout:S,panelDataArray:E}=c.current,k=vn({layout:m,panelConstraints:E.map(F=>F.constraints)});mn(S,k)||(I(k),c.current.layout=k,w&&w(k),me(E,k,D.current))}}),[]),le(()=>{_.current.autoSaveId=t,_.current.direction=r,_.current.dragState=v,_.current.id=p,_.current.onLayout=l,_.current.storage=s}),Ca({committedValuesRef:_,eagerValuesRef:c,groupId:p,layout:b,panelDataArray:c.current.panelDataArray,setLayout:I,panelGroupElement:y.current}),(0,u.useEffect)(()=>{let{panelDataArray:m}=c.current;if(t){if(b.length===0||b.length!==m.length)return;let w=xn[t];w??(w=Na(Aa,_a),xn[t]=w);let S=[...m],E=new Map(H.current);w(t,S,E,b,s)}},[t,b,s]),(0,u.useEffect)(()=>{});let x=(0,u.useCallback)(m=>{let{onLayout:w}=_.current,{layout:S,panelDataArray:E}=c.current;if(m.constraints.collapsible){let k=E.map(O=>O.constraints),{collapsedSize:F=0,panelSize:j,pivotIndices:W}=ue(E,m,S);if(R(j!=null,`Panel size not found for panel "${m.id}"`),!ee(j,F)){H.current.set(m.id,j);let O=Ce({delta:he(E,m)===E.length-1?j-F:F-j,initialLayout:S,panelConstraints:k,pivotIndices:W,prevLayout:S,trigger:"imperative-api"});$e(S,O)||(I(O),c.current.layout=O,w&&w(O),me(E,O,D.current))}}},[]),P=(0,u.useCallback)((m,w)=>{let{onLayout:S}=_.current,{layout:E,panelDataArray:k}=c.current;if(m.constraints.collapsible){let F=k.map(te=>te.constraints),{collapsedSize:j=0,panelSize:W=0,minSize:O=0,pivotIndices:Q}=ue(k,m,E),J=w??O;if(ee(W,j)){let te=H.current.get(m.id),Ie=te!=null&&te>=J?te:J,ae=Ce({delta:he(k,m)===k.length-1?W-Ie:Ie-W,initialLayout:E,panelConstraints:F,pivotIndices:Q,prevLayout:E,trigger:"imperative-api"});$e(E,ae)||(I(ae),c.current.layout=ae,S&&S(ae),me(k,ae,D.current))}}},[]),C=(0,u.useCallback)(m=>{let{layout:w,panelDataArray:S}=c.current,{panelSize:E}=ue(S,m,w);return R(E!=null,`Panel size not found for panel "${m.id}"`),E},[]),N=(0,u.useCallback)((m,w)=>{let{panelDataArray:S}=c.current;return Ia({defaultSize:w,dragState:v,layout:b,panelData:S,panelIndex:he(S,m)})},[v,b]),M=(0,u.useCallback)(m=>{let{layout:w,panelDataArray:S}=c.current,{collapsedSize:E=0,collapsible:k,panelSize:F}=ue(S,m,w);return R(F!=null,`Panel size not found for panel "${m.id}"`),k===!0&&ee(F,E)},[]),U=(0,u.useCallback)(m=>{let{layout:w,panelDataArray:S}=c.current,{collapsedSize:E=0,collapsible:k,panelSize:F}=ue(S,m,w);return R(F!=null,`Panel size not found for panel "${m.id}"`),!k||se(F,E)>0},[]),q=(0,u.useCallback)(m=>{let{panelDataArray:w}=c.current;w.push(m),w.sort((S,E)=>{let k=S.order,F=E.order;return k==null&&F==null?0:k==null?-1:F==null?1:k-F}),c.current.panelDataArrayChanged=!0,A()},[A]);le(()=>{if(c.current.panelDataArrayChanged){c.current.panelDataArrayChanged=!1;let{autoSaveId:m,onLayout:w,storage:S}=_.current,{layout:E,panelDataArray:k}=c.current,F=null;if(m){let W=Pa(m,k,S);W&&(H.current=new Map(Object.entries(W.expandToSizes)),F=W.layout)}F??(F=Ra({panelDataArray:k}));let j=vn({layout:F,panelConstraints:k.map(W=>W.constraints)});mn(E,j)||(I(j),c.current.layout=j,w&&w(j),me(k,j,D.current))}}),le(()=>{let m=c.current;return()=>{m.layout=[]}},[]);let B=(0,u.useCallback)(m=>{let w=!1,S=y.current;return S&&window.getComputedStyle(S,null).getPropertyValue("direction")==="rtl"&&(w=!0),function(E){E.preventDefault();let k=y.current;if(!k)return()=>null;let{direction:F,dragState:j,id:W,keyboardResizeBy:O,onLayout:Q}=_.current,{layout:J,panelDataArray:te}=c.current,{initialLayout:Ie}=j??{},ae=fn(W,m,k),ne=ka(E,m,F,j,O,k),mt=F==="horizontal";mt&&w&&(ne=-ne);let Dn=te.map(qn=>qn.constraints),be=Ce({delta:ne,initialLayout:Ie??J,panelConstraints:Dn,pivotIndices:ae,prevLayout:J,trigger:Qt(E)?"keyboard":"mouse-or-touch"}),ht=!$e(J,be);(Zt(E)||en(E))&&V.current!=ne&&(V.current=ne,!ht&&ne!==0?mt?lt(m,ne<0?ln:on):lt(m,ne<0?sn:un):lt(m,0)),ht&&(I(be),c.current.layout=be,Q&&Q(be),me(te,be,D.current))}},[]),X=(0,u.useCallback)((m,w)=>{let{onLayout:S}=_.current,{layout:E,panelDataArray:k}=c.current,F=k.map(Q=>Q.constraints),{panelSize:j,pivotIndices:W}=ue(k,m,E);R(j!=null,`Panel size not found for panel "${m.id}"`);let O=Ce({delta:he(k,m)===k.length-1?j-w:w-j,initialLayout:E,panelConstraints:F,pivotIndices:W,prevLayout:E,trigger:"imperative-api"});$e(E,O)||(I(O),c.current.layout=O,S&&S(O),me(k,O,D.current))},[]),ye=(0,u.useCallback)((m,w)=>{let{layout:S,panelDataArray:E}=c.current,{collapsedSize:k=0,collapsible:F}=w,{collapsedSize:j=0,collapsible:W,maxSize:O=100,minSize:Q=0}=m.constraints,{panelSize:J}=ue(E,m,S);J!=null&&(F&&W&&ee(J,k)?ee(k,j)||X(m,j):J<Q?X(m,Q):J>O&&X(m,O))},[X]),Re=(0,u.useCallback)((m,w)=>{let{direction:S}=_.current,{layout:E}=c.current;if(!y.current)return;let k=He(m,y.current);R(k,`Drag handle element not found for id "${m}"`);let F=hn(S,w);z({dragHandleId:m,dragHandleRect:k.getBoundingClientRect(),initialCursorPosition:F,initialLayout:E})},[]),re=(0,u.useCallback)(()=>{z(null)},[]),ce=(0,u.useCallback)(m=>{let{panelDataArray:w}=c.current,S=he(w,m);S>=0&&(w.splice(S,1),delete D.current[m.id],c.current.panelDataArrayChanged=!0,A())},[A]),Ue=(0,u.useMemo)(()=>({collapsePanel:x,direction:r,dragState:v,expandPanel:P,getPanelSize:C,getPanelStyle:N,groupId:p,isPanelCollapsed:M,isPanelExpanded:U,reevaluatePanelConstraints:ye,registerPanel:q,registerResizeHandle:B,resizePanel:X,startDragging:Re,stopDragging:re,unregisterPanel:ce,panelGroupElement:y.current}),[x,v,r,P,C,N,p,M,U,ye,q,B,X,Re,re,ce]),We={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return(0,u.createElement)(Fe.Provider,{value:Ue},(0,u.createElement)(h,{...f,children:e,className:n,id:a,ref:y,style:{...We,...g},[T.group]:"",[T.groupDirection]:r,[T.groupId]:p}))}var En=(0,u.forwardRef)((t,e)=>(0,u.createElement)(Sn,{...t,forwardedRef:e}));Sn.displayName="PanelGroup",En.displayName="forwardRef(PanelGroup)";function he(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ue(t,e,n){let r=he(t,e),i=r===t.length-1?[r-1,r]:[r,r+1],a=n[r];return{...e.constraints,panelSize:a,pivotIndices:i}}function Ma({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){(0,u.useEffect)(()=>{if(t||n==null||r==null)return;let i=He(e,r);if(i==null)return;let a=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":l.preventDefault(),n(l);break;case"F6":{l.preventDefault();let o=i.getAttribute(T.groupId);R(o,`No group element found for id "${o}"`);let s=ze(o,r),g=cn(o,e,r);R(g!==null,`No resize element found for id "${e}"`),s[l.shiftKey?g>0?g-1:s.length-1:g+1<s.length?g+1:0].focus();break}}};return i.addEventListener("keydown",a),()=>{i.removeEventListener("keydown",a)}},[r,t,e,n])}function ut({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:a,onClick:l,onDragging:o,onFocus:s,onPointerDown:g,onPointerUp:h,style:f={},tabIndex:p=0,tagName:y="div",...v}){let z=(0,u.useRef)(null),b=(0,u.useRef)({onClick:l,onDragging:o,onPointerDown:g,onPointerUp:h});(0,u.useEffect)(()=>{b.current.onClick=l,b.current.onDragging=o,b.current.onPointerDown=g,b.current.onPointerUp=h});let I=(0,u.useContext)(Fe);if(I===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:A,groupId:D,registerResizeHandle:H,startDragging:V,stopDragging:_,panelGroupElement:c}=I,x=Ze(i),[P,C]=(0,u.useState)("inactive"),[N,M]=(0,u.useState)(!1),[U,q]=(0,u.useState)(null),B=(0,u.useRef)({state:P});le(()=>{B.current.state=P}),(0,u.useEffect)(()=>{if(n)q(null);else{let re=H(x);q(()=>re)}},[n,x,H]);let X=(r==null?void 0:r.coarse)??15,ye=(r==null?void 0:r.fine)??5;(0,u.useEffect)(()=>{if(n||U==null)return;let re=z.current;R(re,"Element ref not attached");let ce=!1;return ba(x,re,A,{coarse:X,fine:ye},(Ue,We,m)=>{if(!We){C("inactive");return}switch(Ue){case"down":{C("drag"),ce=!1,R(m,'Expected event to be defined for "down" action'),V(x,m);let{onDragging:w,onPointerDown:S}=b.current;w==null||w(!0),S==null||S();break}case"move":{let{state:w}=B.current;ce=!0,w!=="drag"&&C("hover"),R(m,'Expected event to be defined for "move" action'),U(m);break}case"up":{C("hover"),_();let{onClick:w,onDragging:S,onPointerUp:E}=b.current;S==null||S(!1),E==null||E(),ce||(w==null||w());break}}})},[X,A,n,ye,H,x,U,V,_]),Ma({disabled:n,handleId:x,resizeHandler:U,panelGroupElement:c});let Re={touchAction:"none",userSelect:"none"};return(0,u.createElement)(y,{...v,children:t,className:e,id:i,onBlur:()=>{M(!1),a==null||a()},onFocus:()=>{M(!0),s==null||s()},ref:z,role:"separator",style:{...Re,...f},tabIndex:p,[T.groupDirection]:A,[T.groupId]:D,[T.resizeHandle]:"",[T.resizeHandleActive]:P==="drag"?"pointer":N?"keyboard":void 0,[T.resizeHandleEnabled]:!n,[T.resizeHandleId]:x,[T.resizeHandleState]:P})}ut.displayName="PanelResizeHandle";var Fa=we(wt(),1);const Cn=t=>{let e=(0,Fa.c)(8),{onResize:n,startingWidth:r,minWidth:i,maxWidth:a}=t,l=(0,u.useRef)(null),o=(0,u.useRef)(null),s=(0,u.useRef)(null),g,h;e[0]!==a||e[1]!==i||e[2]!==n?(g=()=>{let v=l.current,z=o.current,b=s.current;if(!v||!z&&!b)return;let I=Number.parseInt(window.getComputedStyle(v).width,10),A=0,D=!1,H=null,V=C=>{if(!v||!D||!H)return;let N=C.clientX-A;A=C.clientX,I=H==="left"?I-N:I+N,i&&(I=Math.max(i,I)),a&&(I=Math.min(a,I)),v.style.width=`${I}px`},_=()=>{D&&(n==null||n(I),D=!1,H=null),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",_)},c=(C,N)=>{C.preventDefault(),D=!0,H=N,A=C.clientX,document.addEventListener("mousemove",V),document.addEventListener("mouseup",_)},x=C=>c(C,"left"),P=C=>c(C,"right");return z&&z.addEventListener("mousedown",x),b&&b.addEventListener("mousedown",P),()=>{z&&z.removeEventListener("mousedown",x),b&&b.removeEventListener("mousedown",P),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",_)}},h=[i,a,n],e[0]=a,e[1]=i,e[2]=n,e[3]=g,e[4]=h):(g=e[3],h=e[4]),(0,u.useEffect)(g,h);let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f={left:o,right:s},e[5]=f):f=e[5];let p=r==="contentWidth"?"var(--content-width-medium)":`${r}px`,y;return e[6]===p?y=e[7]:(y={resizableDivRef:l,handleRefs:f,style:{width:p}},e[6]=p,e[7]=y),y};function zn(t){t||window.dispatchEvent(new Event("resize"))}var kn=we(wt(),1),L=we(nr(),1);const La=()=>{let t=(0,kn.c)(16),[e,n]=Ne(Vt),[r,i]=Ne(Xt),[a,l]=Ne(ra),[o,s]=Ne(Yt),g;t[0]!==i||t[1]!==n?(g=()=>{n(null),i(!1)},t[0]=i,t[1]=n,t[2]=g):g=t[2];let h=g;if(Xe(Pe.CONTEXT_AWARE_PANEL).length===0||!e||!r)return null;let f;t[3]!==o||t[4]!==a||t[5]!==s||t[6]!==l?(f=()=>(0,L.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,L.jsx)(Ct,{content:a?"Unpin panel":"Pin panel",children:(0,L.jsx)(kt,{size:"xs",onPressedChange:()=>l(!a),pressed:a,"aria-label":a?"Unpin panel":"Pin panel",children:a?(0,L.jsx)(br,{className:"w-4 h-4"}):(0,L.jsx)(lr,{className:"w-4 h-4"})})}),(0,L.jsx)(Ct,{content:o?(0,L.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,L.jsx)("span",{children:"Follow focused table"}),(0,L.jsx)("span",{className:"text-xs text-muted-foreground w-64",children:"The panel updates as cells that output tables are focused. Click to fix to the current cell."})]}):(0,L.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,L.jsx)("span",{children:"Focus on current table"}),(0,L.jsx)("span",{className:"text-xs text-muted-foreground w-64",children:"The panel is focused on the current table. Click to update based on which cell is focused."})]}),children:(0,L.jsx)(kt,{size:"xs",onPressedChange:()=>s(!o),pressed:o,"aria-label":o?"Follow focused cell":"Fixed",children:(0,L.jsx)(yr,{className:rr("w-4 h-4",o&&"text-primary")})})})]}),t[3]=o,t[4]=a,t[5]=s,t[6]=l,t[7]=f):f=t[7];let p=f,y;t[8]!==h||t[9]!==p?(y=()=>(0,L.jsxs)("div",{className:"mt-2 pb-7 mb-4 h-full overflow-auto",children:[(0,L.jsxs)("div",{className:"flex flex-row justify-between items-center mx-2",children:[p(),(0,L.jsx)(ar,{variant:"linkDestructive",size:"icon",onClick:h,"aria-label":"Close selection panel",children:(0,L.jsx)(cr,{className:"w-4 h-4"})})]}),(0,L.jsx)(xt,{children:(0,L.jsx)(At,{name:Pe.CONTEXT_AWARE_PANEL})})]}),t[8]=h,t[9]=p,t[10]=y):y=t[10];let v=y;if(!a){let I;return t[11]===v?I=t[12]:(I=(0,L.jsx)(qa,{children:v()}),t[11]=v,t[12]=I),I}let z;t[13]===Symbol.for("react.memo_cache_sentinel")?(z=(0,L.jsx)(ut,{onDragging:zn,className:"resize-handle border-border z-20 no-print border-l"}),t[13]=z):z=t[13];let b;return t[14]===v?b=t[15]:(b=(0,L.jsxs)(L.Fragment,{children:[z,(0,L.jsx)(et,{defaultSize:20,minSize:15,maxSize:80,children:v()})]}),t[14]=v,t[15]=b),b},Da=t=>{let e=(0,kn.c)(2),{children:n}=t,r;return e[0]===n?r=e[1]:(r=(0,L.jsx)(xt,{children:(0,L.jsx)(vr,{name:Pe.CONTEXT_AWARE_PANEL,children:n})}),e[0]=n,e[1]=r),r};var qa=({children:t})=>{let{resizableDivRef:e,handleRefs:n,style:r}=Cn({startingWidth:400,minWidth:300,maxWidth:1500});return(0,L.jsxs)("div",{className:"absolute z-40 right-0 h-full bg-background flex flex-row",children:[(0,L.jsx)("div",{ref:n.left,className:"w-1 h-full cursor-col-resize border-l"}),(0,L.jsx)("div",{ref:e,style:r,children:t})]})};function ja(){var t=[...arguments];return(0,u.useMemo)(()=>e=>{t.forEach(n=>n(e))},t)}var Rn=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0;function Oe(t){let e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function dt(t){return"nodeType"in t}function ge(t){var e;return t?Oe(t)?t:dt(t)?((e=t.ownerDocument)==null?void 0:e.defaultView)??window:window:window}function In(t){let{Document:e}=ge(t);return t instanceof e}function Nn(t){return Oe(t)?!1:t instanceof ge(t).HTMLElement}function Pn(t){return t instanceof ge(t).SVGElement}function Ta(t){return t?Oe(t)?t.document:dt(t)?In(t)?t:Nn(t)||Pn(t)?t.ownerDocument:document:document:document}var ct=Rn?u.useLayoutEffect:u.useEffect;function An(t){let e=(0,u.useRef)(t);return ct(()=>{e.current=t}),(0,u.useCallback)(function(){var n=[...arguments];return e.current==null?void 0:e.current(...n)},[])}function Ha(){let t=(0,u.useRef)(null);return[(0,u.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,u.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[])]}function $a(t,e){e===void 0&&(e=[t]);let n=(0,u.useRef)(t);return ct(()=>{n.current!==t&&(n.current=t)},e),n}function Oa(t,e){let n=(0,u.useRef)();return(0,u.useMemo)(()=>{let r=t(n.current);return n.current=r,r},[...e])}function Ua(t){let e=An(t),n=(0,u.useRef)(null);return[n,(0,u.useCallback)(r=>{r!==n.current&&(e==null||e(r,n.current)),n.current=r},[])]}function Wa(t){let e=(0,u.useRef)();return(0,u.useEffect)(()=>{e.current=t},[t]),e.current}var ft={};function Ba(t,e){return(0,u.useMemo)(()=>{if(e)return e;let n=ft[t]==null?0:ft[t]+1;return ft[t]=n,t+"-"+n},[t,e])}function _n(t){return function(e){return[...arguments].slice(1).reduce((n,r)=>{let i=Object.entries(r);for(let[a,l]of i){let o=n[a];o!=null&&(n[a]=o+t*l)}return n},{...e})}}var Ga=_n(1),Va=_n(-1);function Xa(t){return"clientX"in t&&"clientY"in t}function Ya(t){if(!t)return!1;let{KeyboardEvent:e}=ge(t.target);return e&&t instanceof e}function Ja(t){if(!t)return!1;let{TouchEvent:e}=ge(t.target);return e&&t instanceof e}function Ka(t){if(Ja(t)){if(t.touches&&t.touches.length){let{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){let{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Xa(t)?{x:t.clientX,y:t.clientY}:null}var pt=Object.freeze({Translate:{toString(t){if(!t)return;let{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;let{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[pt.Translate.toString(t),pt.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Mn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Qa(t){return t.matches(Mn)?t:t.querySelector(Mn)}export{jr as $,ut as A,Kr as B,Ba as C,Cn as D,zn as E,Wt as F,Ot as G,Xr as H,Bt as I,Ht as J,Tt as K,ta as L,Vt as M,na as N,et as O,Yt as P,_e as Q,ea as R,Wa as S,Da as T,Ut as U,Qr as V,Vr as W,Wr as X,Gr as Y,Br as Z,Ha as _,Ka as a,Xe as at,Oa as b,In as c,dt as d,Ft as et,Pn as f,An as g,ja as h,Qa as i,At as it,Xt as j,En as k,Nn as l,Va as m,Ga as n,Nr as nt,Ta as o,Rt as ot,Oe as p,$t as q,Rn as r,Ir as rt,ge as s,pt as t,Pe as tt,Ya as u,ct as v,La as w,Ua as x,$a as y,Yr as z};
