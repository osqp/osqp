import{s as i}from"./chunk-DZLz74EQ.js";import{t as f}from"./react-BcIddLXZ.js";import{t as C}from"./compiler-runtime-Cr9loedd.js";import{t as M}from"./jsx-runtime-mwDPpfh_.js";import{t as v}from"./button-ZC2axIBq.js";import{r as k}from"./input-BNb8K99m.js";import{a as m,c as p,i as a,l as u,n as g,r as x,s as c,t as d}from"./alert-dialog-8EwWlboa.js";import{t as O}from"./dialog-BfhgTWm1.js";var b=i(C(),1),h=i(f(),1),e=i(M(),1),j=h.createContext({modal:null,setModal:()=>{}});const y=t=>{let r=(0,b.c)(6),[s,o]=h.useState(null),l;r[0]===s?l=r[1]:(l={modal:s,setModal:o},r[0]=s,r[1]=l);let n;return r[2]!==s||r[3]!==t.children||r[4]!==l?(n=(0,e.jsxs)(j,{value:l,children:[s,t.children]}),r[2]=s,r[3]=t.children,r[4]=l,r[5]=n):n=r[5],n};function w(){let t=h.use(j);if(t===void 0)throw Error("useModal must be used within a ModalProvider");let r=()=>{t.setModal(null)};return{openModal:s=>{t.setModal((0,e.jsx)(O,{open:!0,onOpenChange:o=>{o||r()},children:s}))},openAlert:s=>{t.setModal((0,e.jsx)(d,{open:!0,onOpenChange:o=>{o||r()},children:(0,e.jsxs)(a,{children:[s,(0,e.jsx)(c,{children:(0,e.jsx)(g,{autoFocus:!0,onClick:r,children:"Ok"})})]})}))},openPrompt:s=>{t.setModal((0,e.jsx)(d,{open:!0,onOpenChange:o=>{o||r()},children:(0,e.jsx)(a,{children:(0,e.jsxs)("form",{onSubmit:o=>{o.preventDefault(),s.onConfirm(o.currentTarget.prompt.value),r()},children:[(0,e.jsxs)(p,{children:[(0,e.jsx)(u,{children:s.title}),(0,e.jsx)(m,{children:s.description}),(0,e.jsx)(k,{spellCheck:s.spellCheck,defaultValue:s.defaultValue,className:"my-4 h-8",name:"prompt",required:!0,autoFocus:!0,autoComplete:"off"})]}),(0,e.jsxs)(c,{children:[(0,e.jsx)(x,{onClick:r,children:"Cancel"}),(0,e.jsx)(v,{type:"submit",children:s.confirmText??"Ok"})]})]})})}))},openConfirm:s=>{t.setModal((0,e.jsx)(d,{open:!0,onOpenChange:o=>{o||r()},children:(0,e.jsxs)(a,{children:[(0,e.jsxs)(p,{children:[(0,e.jsx)(u,{className:s.variant==="destructive"?"text-destructive":"",children:s.title}),(0,e.jsx)(m,{children:s.description})]}),(0,e.jsxs)(c,{children:[(0,e.jsx)(x,{onClick:r,children:"Cancel"}),s.confirmAction]})]})}))},closeModal:r}}export{w as n,y as t};
