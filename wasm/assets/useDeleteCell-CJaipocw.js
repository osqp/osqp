import{s as m}from"./chunk-DZLz74EQ.js";import{E as u,x as j,y}from"./cells-Dd1FatlG.js";import{n as h,t as v}from"./jsx-runtime-DvsdsEjx.js";import{r as f}from"./invariant-91cSKJcr.js";import{t as w}from"./useEventListener-g9rPKvBX.js";import{t as D}from"./button-Bxk0BtBn.js";import{a as k}from"./key-D4QiH_7H.js";import{t as C}from"./use-toast-D6NNsC80.js";import{t as I}from"./createLucideIcon-QLW8E4z5.js";import{n as g}from"./useEvent-BOb1a9d1.js";import{n as _}from"./renderShortcut-C9_NT6sD.js";var z=I("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),M=m(h()),d=m(v());const p=e=>{let t=(0,M.c)(7),l;t[0]===e?l=t[1]:(l=s=>{var n;(s.ctrlKey||s.metaKey)&&s.key==="z"&&(s.preventDefault(),s.stopPropagation(),(n=e.onClick)==null||n.call(e,s))},t[0]=e,t[1]=l);let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o={capture:!0},t[2]=o):o=t[2],w(window,"keydown",l,o);let a=e.children??"Undo",i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(_,{className:"ml-2",shortcut:"cmd-z"}),t[3]=i):i=t[3];let r;return t[4]!==a||t[5]!==e?(r=(0,d.jsxs)(D,{"data-testid":"undo-button",size:"sm",variant:"outline",...e,children:[a," ",i]}),t[4]=a,t[5]=e,t[6]=r):r=t[6],r};var b=m(h());function K(){let e=(0,b.c)(4),{deleteCell:t,undoDeleteCell:l}=u(),{sendDeleteCell:o}=k(),a;return e[0]!==t||e[1]!==o||e[2]!==l?(a=i=>{var n;if(f.get(y))return;let{cellId:r}=i,s=(((n=f.get(j).cellData[r])==null?void 0:n.code)??"").trim()==="";if(t({cellId:r}),o({cellId:r}).catch(()=>{l()}),!s){let{dismiss:c}=C({title:"Cell deleted",description:"You can bring it back by clicking undo or through the command palette.",action:(0,d.jsx)(p,{"data-testid":"undo-delete-button",onClick:()=>{l(),x()}})}),x=c}},e[0]=t,e[1]=o,e[2]=l,e[3]=a):a=e[3],g(a)}function S(){let e=(0,b.c)(4),{deleteCell:t,undoDeleteCell:l}=u(),{sendDeleteCell:o}=k(),a;return e[0]!==t||e[1]!==o||e[2]!==l?(a=async i=>{if(f.get(y))return;let{cellIds:r}=i;for(let c of r)await o({cellId:c}).then(()=>{t({cellId:c})});let{dismiss:s}=C({title:"Cells deleted",action:(0,d.jsx)(p,{"data-testid":"undo-delete-button",onClick:()=>{for(let c of r)l();n()}})}),n=s},e[0]=t,e[1]=o,e[2]=l,e[3]=a):a=e[3],g(a)}export{z as i,S as n,p as r,K as t};
